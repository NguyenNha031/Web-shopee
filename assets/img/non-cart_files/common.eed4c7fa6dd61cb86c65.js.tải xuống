(self.miniJsonp=self.miniJsonp||[]).push([[592],{37764:function(e,t,r){var n;n=(e,t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m)=>(()=>{var g={757:(e,t,r)=>{e.exports=r(666)},439:(e,t,r)=>{"use strict";r.d(t,{t:()=>a});var n=r(661),o=r.n(n),a=o().t.bind(o())},187:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,a),n(r)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}E(e,t,a,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&E(e,"error",t,{once:!0})}(e,o)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function i(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var o,a,c,u;if(s(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),c=a[t]),void 0===c)c=a[t]=r,++e._eventsCount;else if("function"==typeof c?c=a[t]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),(o=i(e))>0&&c.length>o&&!c.warned){c.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=c.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=l.bind(n);return o.listener=r,n.wrapFn=o,o}function p(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):_(o,o.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function _(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function E(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(a){n.once&&e.removeEventListener(t,o),r(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return i(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,a=this._events;if(void 0!==a)o=o&&void 0===a.error;else if(!o)return!1;if(o){var c;if(t.length>0&&(c=t[0]),c instanceof Error)throw c;var s=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw s.context=c,s}var i=a[e];if(void 0===i)return!1;if("function"==typeof i)n(i,this,t);else{var u=i.length,l=_(i,u);for(r=0;r<u;++r)n(l[r],this,t)}return!0},a.prototype.addListener=function(e,t){return u(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return u(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,a,c;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){c=r[a].listener,o=a;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,c||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(o=a[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof S?t:S,a=Object.create(o.prototype),c=new C(n||[]);return a._invoke=function(e,t,r){var n=d;return function(o,a){if(n===f)throw new Error("Generator is already running");if(n===_){if("throw"===o)throw a;return P()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=R(c,r);if(s){if(s===E)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var i=l(e,t,r);if("normal"===i.type){if(n=r.done?_:p,i.arg===E)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n=_,r.method="throw",r.arg=i.arg)}}}(e,r,c),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",_="completed",E={};function S(){}function O(){}function h(){}var v={};v[a]=function(){return this};var T=Object.getPrototypeOf,m=T&&T(T(I([])));m&&m!==r&&n.call(m,a)&&(v=m);var g=h.prototype=S.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(o,a,c,s){var i=l(e[o],e,a);if("throw"!==i.type){var u=i.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(i.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return E;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,E;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,E):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,E)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function I(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,c=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}return{next:P}}function P(){return{value:t,done:!0}}return O.prototype=g.constructor=h,h.constructor=O,O.displayName=i(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===O||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,i(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[c]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new y(u(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},b(g),i(g,s,"Generator"),g[a]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],s=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var i=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(i&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,E):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),E}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},782:e=>{"use strict";e.exports=S},830:e=>{"use strict";e.exports=O},292:e=>{"use strict";e.exports=h},846:e=>{"use strict";e.exports=m},674:e=>{"use strict";e.exports=a},378:e=>{"use strict";e.exports=s},464:e=>{"use strict";e.exports=i},428:e=>{"use strict";e.exports=T},661:e=>{"use strict";e.exports=r},444:e=>{"use strict";e.exports=c},598:e=>{"use strict";e.exports=o},550:e=>{"use strict";e.exports=p},383:t=>{"use strict";t.exports=e},252:e=>{"use strict";e.exports=u},655:e=>{"use strict";e.exports=E},944:e=>{"use strict";e.exports=l},975:e=>{"use strict";e.exports=d},947:e=>{"use strict";e.exports=f},855:e=>{"use strict";e.exports=t},672:e=>{"use strict";e.exports=n},455:e=>{"use strict";e.exports=v},459:e=>{"use strict";e.exports=_}},b={};function y(e){var t=b[e];if(void 0!==t)return t.exports;var r=b[e]={exports:{}};return g[e](r,r.exports,y),r.exports}y.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return y.d(t,{a:t}),t},y.d=(e,t)=>{for(var r in t)y.o(t,r)&&!y.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},y.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),y.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var R={};return(()=>{"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}y.r(R),y.d(R,{$tracker:()=>CT,BadRequest:()=>ct,Blacklist:()=>_t,CancelOrderWarning:()=>vt,CustomError:()=>ft,EventBus:()=>oT,ExceptionName:()=>Rv,FileReaderError:()=>mt,Forbidden:()=>dt,FullStoryProjectId:()=>gs,HTTPError:()=>bt,InternalServerError:()=>lt,Limiting:()=>Ot,LiveReportPoint:()=>dv,LiveSecretKey:()=>fv,MarkName:()=>bv,NoLiveKeyMap:()=>mv,NoLiveReportPoint:()=>pv,NoLiveSecretKey:()=>_v,NotFound:()=>it,ReportComponent:()=>yv,ReportPoint:()=>jv,TemporyError:()=>gt,Unauthoried:()=>st,UnprocessableEntity:()=>ut,UntrustedNetwork:()=>ht,UnverifiedPhoneNumber:()=>Tt,Webview:()=>St,addMediaFile:()=>YS,addMediaFileHandler:()=>ku,addOnDealItemDetailCleaner:()=>ie,addOnDealRuleCleaner:()=>le,agentConversationEntitiesSelector:()=>mr,agentConversationSchema:()=>S,allMessageIdsSelector:()=>Jf,allProductsSearchStatusSelector:()=>dh,allProductsSelector:()=>vh,authorizedShopsCountSelector:()=>So,autoTranslation:()=>F_,batchRemoveDraft:()=>yE,batchRemoveDraftHandler:()=>Cu,batchUpdateRecord:()=>Br,blockUserRequested:()=>Ro,bundleDealItemDetailCleaner:()=>de,bundleDealRuleCleaner:()=>pe,cancelReasonsSelector:()=>th,captchaSignatureSelector:()=>Yn,captchaVisibleSelector:()=>Bn,changeConversationStatusRequested:()=>Yi,changeConversationStatusRequestedSaga:()=>td,chatbotImageSelector:()=>y_,chatbotOrderCleaner:()=>qe,checkUserPermissionRequested:()=>vc,checkUserPermissionSucceeded:()=>Tc,clearApiCache:()=>Xt,clearMediaFile:()=>QS,clearMediaFileHandler:()=>Lu,clearReportRequested:()=>yh,closeMediaPreviewModalRequested:()=>tO,closeModal:()=>sn,collectAsyncTask:()=>Hv,collectComponentTask:()=>Fv,collectLoadTask:()=>Gv,configTrackerUser:()=>gT,contactsEntitiesSelector:()=>wr,contactsSchema:()=>O,conversationBeenDeletedSelector:()=>di,conversationDirectionSelector:()=>ks,conversationEntitiesSelector:()=>Tr,conversationHttpStatusSelector:()=>xs,conversationIdsSelector:()=>As,conversationLastMessageSelector:()=>Xf,conversationOperateRequested:()=>Qi,conversationReducer:()=>up,conversationSchema:()=>s,conversationsLengthLevelSelector:()=>Nr,conversationsSelector:()=>Ms,converstionSyncUpdatesSaga:()=>Dd,copySucceedFeedback:()=>tf,createUpdateConversationFilterHandler:()=>hu,curConvsMessageSelector:()=>O_,curMessagesRelatedSelector:()=>qf,curTabFocusedSelector:()=>ao,currentAllMessageShortcutsSelector:()=>k_,currentBuyerIdSelector:()=>qs,currentBuyerOffersSelector:()=>SE,currentBuyerOrdersSelector:()=>ch,currentBuyerSelector:()=>ai,currentBuyerShopIdSelector:()=>ci,currentBuyerShopSelector:()=>fp,currentConversationAutoTranslationSelectors:()=>Zs,currentConversationBuyerIdSelectors:()=>Js,currentConversationCanReadSelector:()=>Us,currentConversationIdSelector:()=>Ns,currentConversationMaxOptionHideTimeSelectors:()=>ei,currentConversationSelector:()=>Qs,currentConversationShopIdSelectors:()=>Xs,currentConversationShopRegionSelectors:()=>zs,currentConversationShopSelectors:()=>Ks,currentConversationStatusSelectors:()=>$s,currentConversationToNameSelector:()=>pi,currentConversationTranslationAccessSelector:()=>ui,currentDraftSelector:()=>wE,currentFaqHistorySeletor:()=>jf,currentFaqSessionInfoSelector:()=>D_,currentFetchResultSelector:()=>hh,currentGroupIdSelector:()=>w_,currentGroupTypeSelector:()=>C_,currentOfferPaginationSelector:()=>EE,currentOffersFetchResultSelector:()=>_E,currentOrderFetchResultSelector:()=>oh,currentPendingOffersCountSelector:()=>Oi,currentPreviewMediaIdSelector:()=>$S,currentShopIdSelector:()=>oi,currentUserDistributionStatusSelector:()=>no,currentUserIdSelector:()=>Nn,currentUserIsSellerSelector:()=>ho,currentUserRoleSelector:()=>ro,currentUserSelector:()=>Kn,currentUserShopIdSelector:()=>eo,currentUserShopSelector:()=>to,defaultPagination:()=>qp,degradeConversationIdsSelector:()=>Hs,deleteConfigDurationSelector:()=>Gn,deleteConfigSelector:()=>Hn,deleteConversationRequested:()=>Ri,deleteConversationSucceedHandler:()=>Ou,deleteConversationSucceeded:()=>Di,deleteMediaFile:()=>WS,deleteMediaFileHandler:()=>Mu,deleteRecord:()=>Vr,distributionAccountStatusSelector:()=>Y_,draftHashSelector:()=>IE,draftReducer:()=>CE,entitiesSelector:()=>hr,entityReducer:()=>Xr,entryPointSelector:()=>n_,exceptionTag:()=>Dv,failedMessageIdsSelector:()=>Zf,fakeConversationSucceeded:()=>Ci,faqHistoryHashSelector:()=>Mf,faqHistoryMessagesSelector:()=>l_,faqHistoryhttpStatusSelector:()=>kf,faqIdSelector:()=>Lf,faqSessionInfoSelector:()=>R_,feedStoryEntitiesSelector:()=>Cr,feedStorySchema:()=>f,feedbackRequested:()=>rS,feedbackSelector:()=>MS,feedbackSucceeded:()=>nS,fetch:()=>uv,fetchConversationsRequested:()=>Ii,fetchConversationsRequestedSaga:()=>Ml,fetchConversationsSucceeded:()=>Pi,fetchDegradeConversationsDetail:()=>Wi,fetchDegradeConversationsDetailSaga:()=>Ll,fetchMessagePreview:()=>xl,fetchSettings:()=>eE,fetchSettingsRequested:()=>q_,fetchSettingsStatusSelector:()=>aO,fetchShopAuth:()=>Fp,fetchShopAuthRequested:()=>Sp,fetchShopDetailInfo:()=>mp,fetchShopSettings:()=>mO,fetchShopTranslationSettings:()=>SO,fetchShopsByIds:()=>Gp,fetchShopsRequested:()=>Ep,fetchUserOrderDetail:()=>Na,fetchUserOrderDetailRequested:()=>ha,fetchUserOrderDetailSucceeded:()=>va,fetchedShopIdsSelector:()=>dp,filterSelector:()=>Bs,filteredConversationsSelector:()=>Ys,flashSaleItemDetailCleaner:()=>fe,forceLogoutRequested:()=>tc,formatOffer:()=>jO,formatSinglePrice:()=>oe,generatePersist:()=>rT,getConversation:()=>ti,getConversationDetailRequested:()=>Ai,getConversationFakingMessages:()=>c_,getConversationIds:()=>Zv,getConversationLastMessage:()=>Yu,getConversationPendingOffersCountSelector:()=>hi,getConversationShopId:()=>ri,getConversationShopRegion:()=>vi,getConversations:()=>ni,getConvsMessagesRelatedSelector:()=>Kf,getDraft:()=>PE,getGuide:()=>Go,getGuideFailed:()=>Lo,getGuideRequested:()=>ko,getGuideSucceeded:()=>Mo,getMessageSelector:()=>Wf,getMessagesSelector:()=>Qf,getPendingOffersCountRequested:()=>au,getRouterPath:()=>fT,getShopUnreadCountByIds:()=>jp,getTimestamp:()=>Gu,getToastInformation:()=>Zp,getTranslation:()=>$v,handle401ErrorRequested:()=>fr,handleConnect:()=>VE,handleLoginSucceededLogic:()=>cc,handleMessageSubscribe:()=>Nu,handleUnreadCountChangeAction:()=>yn,hasDeletePermissionSelector:()=>jn,hasFetchedUnreadSelector:()=>Eo,hasMoreLatestMessageSelector:()=>t_,hasMoreOlderMessageSelector:()=>e_,hasReplyPermissionSelector:()=>Ln,hasVideoPermissionSelector:()=>Mn,heartbeat:()=>Wt,history:()=>pT,inScrollToMessageSelector:()=>b_,initMDAPSdk:()=>Yv,inlocationSelector:()=>Ps,isCBSellerSelector:()=>Jn,isError:()=>yt,isMainPageSelector:()=>oo,isNavigateToUnreadMessageSelector:()=>_i,isScChatSelector:()=>lo,isShared:()=>Vt,isSubAccountSelector:()=>Xn,itemDetailCleaner:()=>ce,itemListDetailCleaner:()=>se,keywordSelector:()=>Vs,legacyMessageShortcutsCountSelector:()=>B_,listsHashSelector:()=>li,loadingSelector:()=>wn,localeSelector:()=>zn,locationMessage:()=>Xi,login:()=>sc,loginRequested:()=>Ja,loginSocket:()=>Yt,loginSucceeded:()=>$a,loginSuccessSelector:()=>po,logout:()=>Os,logoutHandler:()=>Ss,logoutRequested:()=>Za,logoutSucceeded:()=>ec,markMessagesRequested:()=>ki,markMessagesRequestedSaga:()=>zl,markMessagesSucceeded:()=>Mi,mdapConfig:()=>Uv,mediaListSelector:()=>VS,mediaMapSelector:()=>HS,mediaMessagesSelector:()=>d_,mediaPreviewModalReducer:()=>nO,mediaPreviewerReducer:()=>KS,memoize:()=>UT,messageEntitiesSelector:()=>gr,messageFillStatusMapSelector:()=>zf,messageHasNextSelector:()=>r_,messageHttpStatusSelector:()=>Gf,messageOffersSelector:()=>S_,messageSchema:()=>c,messageShortcutGroupContentSelector:()=>I_,messageShortcutGroupEntitiesSelector:()=>Ar,messageShortcutGroupHttpStatusSelector:()=>P_,messageShortcutGroupSelector:()=>A_,messageShortcutsSchema:()=>_,messageShortcutsSelector:()=>N_,messageShortcutsStatusSelector:()=>V_,messageSourceIdsSelector:()=>E_,messageSourceSelector:()=>__,messageTimeStyleSelector:()=>H_,messagesLengthLevelSelector:()=>Ur,messagesRelatedMapSelector:()=>Ff,messagesSelector:()=>a_,missedReadNoticeCountSelector:()=>Is,modalReducer:()=>un,modalSelector:()=>en,modalShowSelector:()=>Zr,muteConversationRequested:()=>ou,myShopSelector:()=>pp,navigateToUnreadMessageIdSelector:()=>Ei,networkJudge:()=>lT,networkStatusSelector:()=>xn,newMessageFlagSelector:()=>Qn,newbieSelector:()=>Un,normalize:()=>T,noticesCountSelector:()=>jS,notificationTypes:()=>Wu,offerCleaner:()=>Se,offerDetailCleaner:()=>Ee,offerHttpStatusSelector:()=>uE,offerSchema:()=>l,offerSelector:()=>pE,offersSelector:()=>lE,offlineMessagesSelector:()=>Hf,openedMenuSelector:()=>uo,orderCleaner:()=>We,orderEntitiesSelector:()=>yr,orderHttpStatusSelector:()=>rh,orderLogisticsCleaner:()=>Qe,orderSchema:()=>i,orderSelector:()=>eh,personalMessageShortcutsSelector:()=>U_,pinConversationRequested:()=>ji,previewMediasSelector:()=>p_,productCleaner:()=>NT,productEntitiesSelector:()=>Rr,productSchema:()=>u,productSelector:()=>sh,productsSelector:()=>ih,rateCardEntitiesSelector:()=>Ir,rateCardSelector:()=>h_,rateCardsSchema:()=>E,readMessage:()=>Ua,readRequestIdsSelector:()=>Cs,reconnectFlagSelector:()=>LS,redirectConversationRequested:()=>Xh,reduxReset:()=>OE,relatedOfferIdsSelector:()=>dE,removeAllDraft:()=>bE,removeAllDraftHandler:()=>Au,removeSingleDraft:()=>gE,removeSingleDraftHandler:()=>Du,replyToMessageIdSelector:()=>T_,replyToMessageSelector:()=>g_,reportApiTime:()=>Wv,reportArraySelector:()=>Th,reportMessageApiTimer:()=>Hu,reportReducer:()=>xh,reportRequested:()=>bh,reportUserRequested:()=>ss,requestIdleCallback:()=>Ev,resendMessagePayloadSelector:()=>Wn,resetConversationRequested:()=>Vi,resetNavigateToUnreadMessageId:()=>ru,resetSearchParams:()=>Gi,resultsSelector:()=>si,reverseMessagesSelector:()=>s_,saveDraft:()=>RE,saveDraftHandler:()=>Iu,scrollToMessageIdSelector:()=>m_,searchConversationHttpStatusSelector:()=>ii,searchConversationsRequested:()=>Gd,searchConversationsSucceeded:()=>Fd,searchMoreResults:()=>qi,searchShopsRequested:()=>Tp,selectHydrated:()=>m,selectVideoInfoByKey:()=>Bf,selectVideoInfoKeyByVid:()=>Yf,sellerRecommendGroupsFetchStatusSelector:()=>Oh,sellerRecommendGroupsSelector:()=>_h,sellerRecommendProductFetchStatusSelector:()=>Sh,sellerRecommendProductsSelector:()=>ph,sendingMessageIdsSelector:()=>$f,serviceDownAlertSelector:()=>mi,serviceDownFlagSelector:()=>Ti,serviceDownListSelector:()=>gi,serviceDownManualCloseSelector:()=>bi,setChatListWidth:()=>_s,setChatSource:()=>Da,setConversationBeenDeleted:()=>nu,setCurrentConversationCanRead:()=>Fi,setCurrentConversationCanReadHandler:()=>gu,setCurrentConversationId:()=>iu,setNavigateToUnreadMessage:()=>eu,setNavigateToUnreadMessageId:()=>tu,setTextBoxHeight:()=>fs,setToastInformation:()=>rf,setToastInformationSaga:()=>uf,settingsFetchStatusSelector:()=>G_,settingsNeedForceUpdateSelectors:()=>L_,settingsReducer:()=>sE,settingsSelector:()=>M_,settingsStatusSelector:()=>j_,shopAccessSelector:()=>fi,shopReducer:()=>Xp,shopSchema:()=>p,shopSelector:()=>lp,shopService:()=>xt,shopStatisticsMapSelector:()=>$n,shopStatisticsSelector:()=>Zn,shopTranslationSettingsSelector:()=>oO,shoppingCartItemDetailCleaner:()=>_e,shopsEntitiesSelector:()=>Pr,shopsUnreadConversationCountSelector:()=>ln,shouldInitFSSDKSelector:()=>kn,shouldPersistItem:()=>nT,showAutoHangupModalSelector:()=>Oo,showCartReminder:()=>VO,showChatWindowSelector:()=>io,showConversationDetailSelector:()=>so,showConversationRequested:()=>Hi,showConversationSucceeded:()=>Bi,showEntrySelector:()=>_o,showFaqHistory:()=>BO,showFeedStory:()=>HO,showMediaPreviewModalRequested:()=>eO,showMediaPreviewModalSelector:()=>JS,showModal:()=>cn,showOffer:()=>GO,showOrder:()=>LO,showProduct:()=>MO,showSearchedConversationRequested:()=>zi,showShop:()=>yp,showUser:()=>wc,showUserRequested:()=>Pc,showVoucher:()=>FO,showWarningMessageIdsSelector:()=>i_,socket:()=>Bt,socketReducer:()=>kS,socketSuccessSelector:()=>fo,sortConversations:()=>ju,sortedConversationsSelector:()=>Ws,stickerEntitiesSelector:()=>br,stickerSchema:()=>d,subaccountHasUnrepliedPermissionSelector:()=>Vn,systemRecommendProductFetchStatusSelector:()=>Eh,systemRecommendProductsSelector:()=>fh,takeEveryWithCancel:()=>rv,teamMessageShortcutsSelector:()=>x_,textBoxHeightSelector:()=>co,timerHandler:()=>Ih,toBottomHasConflictSelector:()=>o_,toMessageIdSelector:()=>v_,toastReducer:()=>vf,toastSelector:()=>Jp,totalUnreadConversationsCountSelector:()=>dn,translatePreferenceReducer:()=>yO,unreadCountActions:()=>pn,unreadCountReducer:()=>Pn,unreadMessageIdsSelector:()=>f_,unreadMessagesSelector:()=>u_,updateCaptchaSignature:()=>$c,updateCaptchaSignatureSaga:()=>es,updateCaptchaSignatureSucceeded:()=>Zc,updateCaptchaVisible:()=>Jc,updateChatEntryStatus:()=>Ia,updateChatWindowStatus:()=>ma,updateChatWindowStatusSaga:()=>ka,updateChatWindowStatusSucceeded:()=>ga,updateConversationDetailStatus:()=>ba,updateConversationDetailStatusSaga:()=>Ma,updateConversationDetailStatusSucceeded:()=>ya,updateConversationFilter:()=>xi,updateConversationListsHash:()=>_r,updateConversationTimestamp:()=>Ui,updateCurTabFocused:()=>Gc,updateCurTabFocusedSaga:()=>Hc,updateCurTabFocusedSucceeded:()=>Fc,updateDelPermission:()=>mc,updateEntities:()=>Fr,updateFetchConversationsDirection:()=>Ni,updateFetchConversationsDirectionHandler:()=>Tu,updateFetchConversationsStatusHandler:()=>vu,updateFetchStatus:()=>hO,updateFetchedShopIds:()=>Op,updateGuide:()=>$o,updateGuideRequested:()=>zo,updateGuideSucceeded:()=>Xo,updateHasFetchedUnread:()=>Pa,updateIsMainPage:()=>jc,updateLocationMode:()=>Ji,updateLoginSuccessStatus:()=>Aa,updateNetworkStatus:()=>Oa,updateNoticesCount:()=>yS,updateOpenedMenu:()=>Ra,updateOrReplaceAction:()=>qO,updatePreviousConversationIdHandler:()=>mu,updateReadRequestData:()=>Li,updateReconnectFlag:()=>KE,updateRecord:()=>Hr,updateSearchParams:()=>Hd,updateServiceDownStatus:()=>uu,updateSettingPreferenceStatus:()=>vO,updateShopFilter:()=>hp,updateShopTranslationSettings:()=>OO,updateShopTranslationSettingsRecord:()=>TO,updateShowAutoHangupModal:()=>Ta,updateSocketSuccessStatus:()=>Ca,updateStatusSelector:()=>cO,updateTimeNowSelector:()=>ws,updateTotalUnreadConversationsCount:()=>mn,updateUnreadCount:()=>Tn,updateUser:()=>wa,updateUserRequested:()=>Sa,updateVoucherStatus:()=>De,userEntitiesSelector:()=>vr,userReducer:()=>Ds,userSchema:()=>a,userSelector:()=>qn,videoMapSelector:()=>Vf,visitShopSellerCenterRequested:()=>vp,voucherCleaner:()=>Re,voucherEntitiesSelector:()=>Dr,voucherHttpStatusSelector:()=>XO,voucherSelector:()=>$O,vouchersSchema:()=>h,vouchersSelector:()=>JO,waitingTimeFilterSelector:()=>Fn,watchBlock:()=>Io,watchCaptcha:()=>ts,watchChannel:()=>AS,watchCheck:()=>yc,watchConversationSagas:()=>sp,watchFeedback:()=>aS,watchGuides:()=>Fo,watchLogin:()=>ic,watchReportSagas:()=>Uh,watchReportUser:()=>us,watchSearch:()=>Bd,watchSettingsSagas:()=>cE,watchShopSagas:()=>Kp,watchShow:()=>Nc,watchSocketSagas:()=>xS,watchTab:()=>Vc,watchToastSagas:()=>hf,watchTranslationSagas:()=>RO,watchTranslationSettings:()=>bO,watchUncontrolledSagas:()=>ev,watchUnreadSagas:()=>In,watchUpdate:()=>La,watchUpdateGuides:()=>Zo,watchUserSagas:()=>ms});var t=y(383);function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(r){e(t,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var o=function(e,r,o){return new t.schema.Entity(e,n({},r),n({},o))},a=o("users"),c=o("messages"),s=o("conversations"),i=o("orders"),u=o("products"),l=o("offers"),d=o("stickers"),p=o("shops"),f=o("feedStories"),_=o("messageShortcuts"),E=o("rateCards"),S=o("agentConversations"),O=o("contacts",{},{idAttribute:"account_id"}),h=o("vouchers"),v={users:a,messages:c,conversations:s,orders:i,offers:l,products:u,stickers:d,shops:p,feedStories:f,messageShortcuts:_,rateCards:E,agentConversations:S,contacts:O,vouchers:h};const T=function(e,r){var n=v[e]||o(e);return r instanceof Array?(0,t.normalize)(r,[n]):(0,t.normalize)(r,n)};var m=function(e,r,n){try{var o=v[e];return r instanceof Array?(0,t.denormalize)(r,[o],n.entityReducer):null==r?void 0:(0,t.denormalize)(r,o,n.entityReducer)}catch(e){return}};function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,s=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(s)throw o}}return a}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=y(855);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?C(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P,w=["id","name","region","shop_id","sold","stock","status","original_price","actual_price","image","image_hash","promotion_label","raw_discount"],N={region:"country",status:"status",original_price:"original_prices",actual_price:"actual_prices",promotion_label:"promotion_label"},U={id:"item_id",region:"region",actual_price:"price"},x=I(I({},U),{},{original_price:"price_before_discount",image_hash:"thumb_url"}),k=I(I({},U),{},{original_price:"price_before_discount",shop_id:"shop_id"}),M=I(I({},U),{},{shop_id:"shop_id"}),L=I(I({},U),{},{shop_id:"shop_id",original_price:"hidden_price_display"}),j={id:"item_id",name:"name",actual_price:"price"},G=["asking_price","buyer_id","conversation_id","create_at","discount","id","model_id","model_name","offer_price","product","product_id","product_deleted","products_count","region","shop_id","status","tax_applicable","tax_value","total_price"],F=["discount","total_price","region","disclaimer"],H=["product","product_deleted"],V={asking_price:"asking_price",create_at:"create_at",model_name:"model_name",offer_price:"offer_price",tax_value:"tax_value"},B=["claimed","code","country","type","id","is_used","name","expired","usage_progress","stock_out","rule_text","displayed_time","discount_text","show_usage_progress_bar","show_usage_progress_text","status","start_time","end_time","current_usage","total_usage"],Y={rule_text:"rule_text",displayed_time:"displayed_time",expired:"expired",stock_out:"stock_out",discount_text:"discount_text",show_usage_progress_bar:"show_usage_progress_bar",show_usage_progress_text:"show_usage_progress_text"},W=y(439).t;function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Q(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var K,z=A.ProductPromotionLabel.SHOW_DISCOUNT,X=A.ProductPromotionLabel.FLASH_SALES,J=A.ProductPromotionLabel.CAMPAIGN,$=A.ProductPromotionLabel.BUNDLE_DEAL,Z=A.ProductPromotionLabel.ADD_ON_DEAL,ee=A.ProductPromotionLabel.GIFT_WITH_PURCHASE,te=[z,X,J,$,Z,ee],re=(e(P={},A.ProductStatusUsingString.DELETED,A.ProductStatusUsingNumber.DELETED),e(P,A.ProductStatusUsingString.NORMAL,A.ProductStatusUsingNumber.NORMAL),e(P,A.ProductStatusUsingString.BANNED,A.ProductStatusUsingNumber.BANNED),e(P,A.ProductStatusUsingString.SOLD_OUT,A.ProductStatusUsingNumber.SOLD_OUT),e(P,A.ProductStatusUsingString.DELISTED,A.ProductStatusUsingNumber.DELISTED),P),ne="???",oe=function(e,t){if(!e)return e;var r=(0,A.formatPrice)(e,t);return r.includes("NaN")&&(r=r.replace("NaN",ne)),r},ae=function(e){var t=e.original_price,r=e.actual_price;return(t===r||r.includes(ne))&&(e.original_price=""),e},ce=function(e){var t={};return w.forEach((function(r){var n=N[r];switch(n){case"country":t[r]=e[n];break;case"status":t[r]=re[e[n]];break;case"original_prices":case"actual_prices":t[r]=function(e,t){var r=D(e,2),n=r[0],o=r[1];if(n===o)return oe(n,t);var a=oe(n,t),c=oe(o,t);return a.includes(ne)?a:c.includes(ne)?c:"".concat(a," - ").concat(c)}(e[n],e.country);break;case"promotion_label":t[r]=function(e){var t=[];return te.forEach((function(r){if(e[r]){var n="common.label.".concat(r);r===z?t.push({key:r,value:W(n,{discount:(0,A.formatDiscount)(e[r])})}):t.push({key:r,value:W(n)})}})),t}(e[n]);break;default:t[r]=e[r]}})),ae(t)},se=function(e,t){var r={};return w.forEach((function(n){var o=x[n];switch(o){case"item_id":case"thumb_url":r[n]=e[o];break;case"region":r[n]=t;break;case"price_before_discount":case"price":r[n]=oe(e[o],t);break;default:r[n]=e[n]}})),ae(r)},ie=function(e,t,r){var n={};return w.forEach((function(o){var a=k[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"price_before_discount":case"price":n[o]=oe(e[a],t);break;default:n[o]=e[o]}})),ae(n)},ue=1e5,le=function(e,t){var r=e.amount_spent;return e.amount_spent=oe("".concat(r/ue),t),e},de=function(e,t,r){var n={};return w.forEach((function(o){var a=M[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"price":n[o]=oe(e[a],t);break;default:n[o]=e[o]}})),ae(n)},pe=function(e,t){var r=e.rule_type,n=e.discount_percentage,o=e.discount_value,a=e.fix_price;if(1===r)e.fix_price=oe("".concat(a/ue),t);else if(2===r){var c=n/ue;"tw"===(t||"SG").toLowerCase()&&(c=10-c/10,Number.isInteger(c)||(c=c.toFixed(1))),e.discount_percentage=c}else e.discount_value=oe("".concat(o/ue),t);return e},fe=function(e,t,r){var n={};return w.forEach((function(o){var a=L[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"hidden_price_display":n[o]=(0,A.transPrice)(e[a],t);break;case"price":n[o]=oe("".concat(e[a]/ue),t);break;default:n[o]=e[o]}})),ae(n)},_e=function(e){var t={};return w.forEach((function(r){var n,o=j[r];switch(o){case"item_id":t[r]=e[o];break;case"name":t[r]=null!=e&&null!==(n=e.model)&&void 0!==n&&n.model_name?e.model.model_name:e[o];break;case"price":var a,c=null!=e&&null!==(a=e.model)&&void 0!==a&&a.price?e.model.price:e[o];t[r]=oe(c,e.region);break;default:t[r]=e[r]}})),ae(t)},Ee=function(e){var t=e.model_name;return t&&t.includes(",")&&(e.model_name=t.replace(/,/g," · ")),e},Se=function(e,t,r,n,o,a){var c={};return F.forEach((function(t){switch(t){case"discount":c[t]=function(e,t,r){var n=e.offer_price,o=e.asking_price,a=Number(n)/Number(o);if(function(e,t){return e&&(0,A.isVisitingCNSC)()||"TW"===(null==t?void 0:t.toUpperCase())}(t,r)){var c=(10*a).toFixed(a<.05?2:1),s=Number.isInteger(Number(c))?Number.parseInt(c):c;return"".concat(s,"折")}var i=(100*(1-a)).toFixed(1),u=Number.parseInt(i),l=[0,100].includes(u)?u:i;return"".concat(l).concat(W("message.offer.discount"))}(e,n,r);break;case"total_price":c[t]=oe(function(e){var t=e.offer_price,r=e.tax_value,n=e.products_count;return((Number(t)-Number(r))*n).toString()}(e),r);break;case"region":c[t]=r;break;case"disclaimer":c[t]=function(e,t){var r=e.offer_disclaimer;return(r.find((function(e){return(0,A.getTranslationLocale)(t).toLocaleLowerCase().includes(e.language.toLocaleLowerCase())}))||r.find((function(e){return"en"===e.language}))||{}).disclaimer}(e,a)}})),H.forEach((function(t){switch(t){case"product":c[t]=q(q({},o),{},{original_price:"",actual_price:oe(e.asking_price,r)});break;case"product_deleted":c[t]=function(e){var t=e.id,r=e.status;return!(!t||r!==A.ProductStatusUsingNumber.DELETED)}(o)}})),G.forEach((function(n){if(!F.includes(n)&&!H.includes(n)){var o=V[n];switch(o){case"asking_price":case"offer_price":case"tax_value":c[n]=oe(e[o],r);break;case"create_at":c[n]=(0,A.getFormattedTime)(e[o]);break;case"model_name":c[n]=function(e,t){if(t&&t.includes(",")){var r="detail"===e?" · ":" / ";return t.replace(/,/g,r)}return t}(t,e[o]);break;default:c[n]=e[n]}}})),c},Oe="message.voucher.rule",he=function(e,t){return(0,A.formatPrice)(e,t,{withUnit:e>=1e4})},ve=function(e){var t=e.country,r=e.min_basket_size,n=e.reward.max_capped_amount,o=he(r,t),a=W("".concat(Oe,".min_spend"),{spend:o});return"number"==typeof n&&(a=W("".concat(Oe,".min_spend_max_cap"),{spend:o,cap:he(n,t)})),a},Te=function(e){var t=e.country,r=e.reward,n=r.value,o=r.type,a=r.discount_type===A.DiscountType.PERCENTAGE?"".concat(n,"%").concat(" "+W("common.label.off")):(0,A.formatPrice)(n,t);return o===A.RewardType.COIN_CASHBACK&&(a="".concat(a," ").concat(W("conversation_detail.workstation.voucher_panel.coins_cashback"))),a},me=function(e){return e.status===A.VoucherStatus.FINISHED},ge=function(e){return e.current_usage>=e.total_usage},be=function(e,t){var r=!t&&me(e),n=e.status,o=e.start_time,a=e.end_time;return W("".concat("conversation_detail.workstation.voucher_panel",".").concat(r?A.VoucherStatus.ONGOING:n,"_time"),{time:n===A.VoucherStatus.SCHEDULED?(0,A.getFormattedTime)(o,"MM.DD.YYYY h:mm"):(0,A.getFormattedTime)(a,"MM.DD.YYYY")})},ye=function(e,t){var r=me(e),n=ge(e),o=e.is_used,a=e.usage_progress,c=e.country,s=o||r||n;return(a>=50||"id"===c.toLowerCase()&&(t||a>=25))&&!s},Re=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},n=me(e),o=ge(e);return B.forEach((function(a){switch(Y[a]){case"rule_text":r[a]=ve(e);break;case"displayed_time":r[a]=be(e,t);break;case"expired":r[a]=n;break;case"stock_out":r[a]=o;break;case"discount_text":r[a]=Te(e);break;case"show_usage_progress_bar":r[a]=ye(e,!0);break;case"show_usage_progress_text":r[a]=ye(e,!1);break;default:r[a]=e[a]}})),r},De=function(e,t){var r=t.expired,n=t.stockOut,o=q({},e);return r?(o.status="finished",{status:"finished",expired:r,displayed_time:be(o,r),show_usage_progress_bar:ye(o,!0),show_usage_progress_text:ye(o,!1)}):n?(o.current_usage=o.total_usage,{current_usage:o.total_usage,stock_out:n,show_usage_progress_bar:ye(o,!0),show_usage_progress_text:ye(o,!1)}):{}},Ae=y(439).t;function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ce(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Pe,we=A.LogisticsLog.ORDER_DETAIL_SHIPPING_CONFIRMED,Ne=A.LogisticsLog.ORDER_DETAIL_SHIPPED,Ue=A.LogisticsLog.ORDER_DETAIL_RECEIVED,xe=A.LogisticsLog.ORDER_DETAIL_CANCELED,ke=A.LogisticsLog.ORDER_DETAIL_NOTIFY_SHIP,Me=(e(K={},we,"detail_received"),e(K,Ne,"shipped"),e(K,Ue,"received_by_buyer"),e(K,xe,"cancelled"),e(K,ke,"notify_ship"),K),Le=["amount","buyer_id","buyer_is_rated","cancel_pending","cancel_reason","cancel_time","canceller","carrier","checkout_id","coin_offset","complete_time","created_at","credit_card_promotion","delivery_time","id","image","image_hash","over_rate_time","pay_by_wallet","pay_time","payment_method","payment_method_str","price_before_discount","products","products_count","rate_by_date","receivables","refund_amount","refund_serial_number","region","remark","seller_note","seller_rate_comment","seller_rate_star","serial_number","ship_by_date","shipping_fee","shop_id","show_cancel_order_btn","show_ship_warning","status","tax_amount","third_party_tns","title","tracking_number","voucher_price","wallet_discount"],je=["model_id","product_id","model_name","image","image_hash","rate_star","region","price","sku","count","title","rate_comment","is_pre_order","returned","id","shop_id"],Ge=function(e,t,r){var n={},o=e.status;return je.forEach((function(a){var c;switch(a){case"model_name":n[a]=null!==(c=e[a])&&void 0!==c&&c.includes(",")?e[a].replace(/,/g," · "):e[a];break;case"region":n[a]=t;break;case"price":n[a]=(0,A.formatPrice)(e[a],t);break;case"returned":n[a]=o===A.OrderItemStatus.RETURNED||o===A.OrderItemStatus.RETURN_RATED;break;case"rate_star":n[a]=e[a]?parseInt(e[a]):-1;break;case"id":n[a]=e.product_id;break;case"shop_id":n[a]=r;break;default:n[a]=e[a]}})),n},Fe=["coin_offset","voucher_price","wallet_discount","local_shopee_coin"],He=function(e){return Ae(e?"label_buyer_cancel_order_reason_".concat(e):"label_cancel_order_reason_buyer")},Ve=function(e){var t=e.cancel_user_id;return t===e.buyer_id?"buyer":t<=0?"system":"seller"},Be=function(e){var t=e.status,r=e.buyer_cancel_reason,n=e.cancel_reason,o=Ve(e);return t===A.OrderTabStatus.CANCELLED?"buyer"===o?He(r):Ae("seller"===o?"label_cancel_order".concat(n?"_reason_".concat(n):""):"label_cancel_order_reason_admin".concat(n?"_".concat(n):"")):He(r)},Ye=15*A.ONE_DAY,We=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={},a=e.price_before_discount,c=e.shipping_fee,s=e.tax_amount,i=e.shop_id,u=e.rate_by_date,l=e.complete_time,d=e.status_ext,p=e.payment_method,f=e.ship_by_date,_=i===t,E=(0,A.getOrderPayment)({order:e,region:r,isOwnOrder:_,isNewPrice:n}),S=E.shopeeCoin,O=E.payment,h=Date.now()>(u?new Date(u).getTime():new Date(l).getTime()+Ye);return Le.forEach((function(n){switch(n){case"region":o[n]=r;break;case"created_at":case"pay_time":case"delivery_time":case"complete_time":case"cancel_time":o[n]=e[n]?(0,A.customizeTime)(e[n],{needFullFormat:!0}):"";break;case"rate_by_date":o[n]=u?(0,A.customizeTime)(u,{needFullFormat:!0}):"";break;case"over_rate_time":o[n]=h;break;case"ship_by_date":o[n]=e[n]?(0,A.customizeTime)(e[n],{needFullFormat:!0}):"--";break;case"show_ship_warning":o[n]=!!f&&A.ONE_DAY+Date.now()>new Date(f).getTime();break;case"payment_method_str":o[n]=(0,A.getPayMethod)(p);break;case"products":o[n]=e[n].map((function(e){return Ge(e,r,t)}));break;case"amount":o[n]=(0,A.formatPrice)(a-c-s,r);break;case"receivables":o[n]=O;break;case"coin_offset":o[n]=(0,A.formatPrice)(S,r,{withMinus:!0});break;case"refund_amount":case"price_before_discount":case"shipping_fee":case"tax_amount":case"credit_card_promotion":case"voucher_price":case"wallet_discount":o[n]=(0,A.formatPrice)(e[n]||0,r,{withMinus:Fe.includes(n)});break;case"seller_note":o[n]=(e[n]||"").trim();break;case"cancel_reason":o[n]=Be(e);break;case"canceller":o[n]=Ve(e);break;case"show_cancel_order_btn":o[n]=(0,A.getCancelOrderDisplayStatus)(e);break;case"cancel_pending":o[n]=d===A.OrderStatusExt.ORDER_EXT_CANCEL_PENDING;break;default:o[n]=e[n]}})),o},Qe=function(e){var t=[];return e.forEach((function(e){var r,n=e.flag,o=e.type,a=e.description,c=e.seller_desc,s=e.created_at,i=(0,A.getFormattedTime)(s);4&n?r=c||a:2==(3&n)?r=a:Me[o]&&(r=Ae("common.order.logistics_log.".concat(Me[o]))),r&&t.push({created_at:i,content:r})})),t};!function(e){e[e.unpaid=1]="unpaid",e[e.to_ship=2]="to_ship",e[e.shipping=3]="shipping",e[e.completed=4]="completed",e[e.cancelled=5]="cancelled"}(Pe||(Pe={}));var qe=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={},a=Ie(Ie({},e),{},{status:Pe[e.order_status],products_count:e.item_count,created_at:1e3*e.create_time,serial_number:e.order_sn,estimated_escrow:e.seller_estimated_escrow/1e5,total_price:e.buyer_pay_amount/1e5}),c=a.shop_id,s=c===t,i=(0,A.getOrderPayment)({order:a,region:r,isOwnOrder:s,isNewPrice:n}),u=i.payment;return Le.forEach((function(e){switch(e){case"region":o[e]=r;break;case"created_at":o[e]=a[e]?(0,A.customizeTime)(a[e],{needFullFormat:!0}):"";break;case"products":o[e]=a.items;break;case"receivables":o[e]=u;break;default:o[e]=a[e]}})),o};function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xe(e,t,r){return t&&ze(e.prototype,t),r&&ze(e,r),e}function Je(e,t){return Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Je(e,t)}function $e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?et(e):t}function rt(e){return rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rt(e)}function nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ot(e,t,r){return ot=nt()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&Je(o,r.prototype),o},ot.apply(null,arguments)}function at(e){var t="function"==typeof Map?new Map:void 0;return at=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ot(e,arguments,rt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Je(n,e)},at(e)}var ct=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this)).name=n.constructor.name,n.message=e,n}return Xe(r,[{key:"handler",value:function(){}}]),r}(at(Error)),st=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e,n){var o;return Ke(this,r),(o=t.call(this,e)).name=o.constructor.name,o}return Xe(r,[{key:"handler",value:function(){(0,A.removeItem)("mini-session"),A.LS.removeItem("mini-session")}}]),r}(at(Error));const it=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(at(Error));var ut=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e,n){var o;return Ke(this,r),(o=t.call(this,e)).name=o.constructor.name,o.errors=n,o}return r}(at(Error)),lt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e)).name=n.constructor.name,n.handler=n.handler.bind(et(n)),n}return Xe(r,[{key:"handler",value:function(){}}]),r}(at(Error)),dt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e,n){var o;return Ke(this,r),(o=t.call(this,e)).name=o.constructor.name,o}return Xe(r,[{key:"handler",value:function(){}}]),r}(at(Error)),pt=y(439).t,ft=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this)).name=n.constructor.name,n.error=e,n.handler=n.handler.bind(et(n)),n}return Xe(r,[{key:"handler",value:function(){var e="";switch(this.error.error_code){case"unauthorized_for_shop":e="forward.error.unauthorized_for_shop";break;case"target_subaccount_unauthorized_for_shop":e="forward.error.target_subaccount_unauthorized_for_shop";break;case"target_group_unauthorized_for_shop":e="forward.error.target_group_unauthorized_for_shop";break;case"conversation_not_belong_to_you":e="forward.error.conversation_not_belong_to_you";break;case"conversation_not_dispatch":e="forward.error.conversation_not_dispatch";break;case"cannot_move_conversation_to_yourself":e="forward.error.cannot_move_conversation_to_yourself";break;case"target_subaccount_not_online":e="forward.error.target_subaccount_not_online";break;case"subaccount_conversation_not_found":e="forward.error.subaccount_conversation_not_found";break;case"conversation_closed":e="forward.error.conversation_closed";break;case"user_have_delete_disable":e="forward.error.user_deleted";break;case"user_has_pending_order":e="conversation_detail.workstation.block_fail_modal.title"}return{show:!0,type:"fail",message:pt(e)}}}]),r}(at(Error)),_t=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e,n,o){var a;return Ke(this,r),(a=t.call(this,e)).name=a.constructor.name,a}return r}(at(Error)),Et=y(439).t,St=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this)).name=n.constructor.name,n.error=e,n}return Xe(r,[{key:"handler",value:function(){var e;switch(this.error.error_code){case"send_rating_card_too_frequently":e="conversation_detail.message_list.rating_card_duplicate";break;case"rating_card_rated":case"rating_card_expired":e="rate_card.submit.fail";break;default:e="common.server_error.warning_tips"}return{message:Et(e),show:!0,type:"fail"}}}]),r}(at(Error)),Ot=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(at(Error)),ht=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e.message)).name=n.constructor.name,n.message=e.message,n}return r}(at(Error)),vt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(at(Error));const Tt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e,n,o){var a;return Ke(this,r),(a=t.call(this,e)).name=a.constructor.name,a.errors=n,a.data=o,a}return r}(at(Error)),mt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e)).name=n.constructor.name,n.message=e,n}return r}(at(Error));var gt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this)).message=e,n}return r}(at(Error)),bt=function(e){switch(e){case 400:return ct;case 401:return st;case 403:return dt;case 404:return it;case 422:return ut;case 429:return Ot;case 451:return ht;case 452:return gt;case 491:return ft;case 492:return _t;case 493:return St;case 494:return vt;case 495:return Tt;case 500:return lt;default:return Error}},yt=function(e){return"".concat(e).startsWith("4")||"".concat(e).startsWith("5")};function Rt(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function Dt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){Rt(a,n,o,c,s,"next",e)}function s(e){Rt(a,n,o,c,s,"throw",e)}c(void 0)}))}}var At=y(757),Ct=y.n(At),It=y(672),Pt=y(598),wt=y.n(Pt);function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ut(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Nt(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xt=new(function(){function t(){Ke(this,t),this.shopsMap={}}var r;return Xe(t,[{key:"updateShopMap",value:function(e){this.shopsMap=Ut(Ut({},this.shopsMap),e)}},{key:"getRegion",value:(r=Dt(Ct().mark((function t(r,n){var o,a,c,s;return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=11;break}if(a=null===(o=this.shopsMap[n])||void 0===o?void 0:o.country){t.next=8;break}return t.next=5,uv({resource:"shop",id:n,params:{need_cache:1,cache_expires:600}});case 5:return c=t.sent,this.updateShopMap(e({},c.id,c)),t.abrupt("return",c.country);case 8:return t.abrupt("return",a);case 11:if(s=(0,A.getRuntimeRegion)().toUpperCase(),!["KR","CN"].includes(s)&&!r){t.next=14;break}return t.abrupt("return","GLOBAL");case 14:return t.abrupt("return",s);case 15:case"end":return t.stop()}}),t,this)}))),function(e,t){return r.apply(this,arguments)})}]),t}());"live"!==(0,A.getRuntimeServer)()&&(window.shopService=xt);var kt,Mt=y(674),Lt=y.n(Mt);function jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gt(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?jt(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ft=(0,A.checkIsScChat)();kt=Ft?"scminichat":"pmminichat";var Ht=new(Lt())({shouldShared:Ft,name:"".concat((0,A.getRuntimeRegion)(),"_").concat((0,A.getRuntimeServer)(),"_seller-push-ws")}),Vt=Ht.isShared,Bt=Ht.socket;Bt.dispatch||(Bt.dispatch=function(){return{}});var Yt=function(e){return Vt?Bt.emit("login",Gt(Gt({},e),{},{app_id:kt}),!0):new Promise((function(t){Bt.emit("login",Gt(Gt({},e),{},{app_id:kt}),(function(e){return t(JSON.parse(e))}))}))},Wt=function(e){var t=e.noticesCount,r=e.readMissedCount,n={app_id:kt,noticesCount:t,readMissedCount:r},o="".concat(kt,"|").concat(t,"|").concat(r);return Vt?Bt.heartbeat({emitEvent:"heartbeat",args:n,pollingTime:6e4,remedyTime:9e4,separator:"|"}):Bt.emit("heartbeat",o)};function Qt(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var qt=y(444),Kt=y.n(qt);window.__CHANGE_FETCH__||(window.fetch=Kt(),window.__CHANGE_FETCH__=!0);var zt="CHAT_API",Xt=function(){window.caches&&window.caches.delete(zt)};function Jt(e,t){return $t.apply(this,arguments)}function $t(){return($t=Dt(Ct().mark((function e(t,r){var n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g;return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=new URL(t),o=n.searchParams,a=o.get("need_cache"),c=o.get("force_update"),s=o.get("_ts"),i=r.method&&"get"===r.method.toLowerCase(),u="&csrf_token=".concat(encodeURIComponent(o.get("csrf_token")||"")),l="&force_update=".concat(String(c)),d=t.replace(u,"").replace(l,"").replace(s||"",""),!(i&&a&&window.caches)){e.next=44;break}return e.next=13,window.caches.open(zt);case 13:return p=e.sent,e.next=16,p.match(d);case 16:if(f=e.sent,_=Date.now(),!f){e.next=25;break}if(!(_<Number(f.headers.get("cache-expires")))||c){e.next=23;break}return e.abrupt("return",f);case 23:return e.next=25,p.delete(d);case 25:return e.next=27,window.fetch(t,r);case 27:if(E=e.sent,S=E.clone(),200!==E.status){e.next=41;break}return O=Qt(E.headers.entries()),h={},v=Number(o.get("cache_expires"))||3600,T=_+1e3*v,e.next=36,E.blob();case 36:m=e.sent,O.forEach((function(e){h[e[0]]=e[1]})),h["cache-expires"]=T,g=new Response(m,{headers:new Headers(h)});try{p.put(d,g)}catch(e){window.caches.delete(zt)}case 41:return e.abrupt("return",S);case 44:return e.abrupt("return",window.fetch(t,r));case 45:e.next=50;break;case 47:return e.prev=47,e.t0=e.catch(0),e.abrupt("return",window.fetch(t,r));case 50:case"end":return e.stop()}}),e,null,[[0,47]])})))).apply(this,arguments)}var Zt,er,tr,rr=y(378),nr=y.n(rr),or=y(464),ar=y.n(or);!function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR"}(tr||(tr={}));var cr=(e(Zt={},tr.ONE,"70c74f4e-dcda-483e-826b-19dd2c42e799"),e(Zt,tr.TWO,"29ffec18-c614-4645-8f1c-686e22d2e26a"),e(Zt,tr.THREE,"04229e76-1ba3-4ac9-8a4e-68d46a3881a2"),e(Zt,tr.FOUR,"a3769a87-35cf-45e9-a5a7-2b4016c52e92"),Zt),sr=(e(er={},tr.ONE,"396c15ad-6d3e-4018-98be-cef58cb45cd0"),e(er,tr.TWO,"607c871d-b766-4c6f-ba89-b6c6ca32b156"),e(er,tr.THREE,"42990074-9a73-4459-b749-f3110d222a72"),e(er,tr.FOUR,"5702b6f3-62a3-44d2-abe8-fece100a8bf4"),er);function ir(e,t){var r=t.url,n=t.method,o=t.token,a=t.ctoken,c=t.extra,s=function(e){return"live"===(0,A.getRuntimeServer)()?sr[e]:cr[e]}(e);switch(e){case 1:return function(e,t,r){if(r){var n=r.plat,o=r.fromID,a=r.reqID,c=r.toID,s=r.timestamp,i=r.type,u=r.strinput,l="key=".concat(t,"&plat=").concat(n,"&ver=v1.2&fromID=").concat(o,"&reqID=").concat(a,"&toID=").concat(c,"&timestamp=").concat(s,"&type=").concat(i,"&strinput=").concat(u);return ar()(l).toString()}return nr()(e+t).toString()}(r,s,c);case 2:return function(e,t,r){return nr()(e+t+r).toString()}(r,s,n);case 3:return function(e,t,r){return nr()(e+t+r).toString()}(r,s,o);case 4:return function(e,t,r){return nr()(e+t+r).toString()}(r,s,a);default:return""}}var ur,lr=function(e){var t=e.url,r=e.method,n=e.token,o=e.ctoken,a=void 0===o?"":o,c=e.version,s=e.fromID,i=e.payload,u=void 0===i?"{}":i,l=e.timestamp,d=JSON.parse(u),p=d.to_id,f=d.request_id,_=d.type,E=d.content,S=void 0===E?{}:E;return{url:t,method:r,token:n,ctoken:a,extra:{plat:c,fromID:s,reqID:f,toID:p,timestamp:l,type:_,strinput:"text"===_&&S.text?S.text:""}}},dr=y(252);!function(e){e.HANDLE_401_ERROR_REQUESTED="HANDLE_401_ERROR_REQUESTED",e.UPDATE_CONVERSATION_LISTS_HASH="UPDATE_CONVERSATION_LISTS_HASH"}(ur||(ur={}));var pr,fr=(0,dr.createActions)(e({},ur.HANDLE_401_ERROR_REQUESTED,(function(e){return{resource:e.resource}}))).handle401ErrorRequested,_r=(0,dr.createActions)(e({},ur.UPDATE_CONVERSATION_LISTS_HASH,(function(){return{}}))).updateConversationListsHash,Er=y(944),Sr=y(975),Or=function(e){return e<=100?1:e<=500?2:e<=1e3?3:4},hr=function(e){return e.entityReducer},vr=(0,Sr.createSelector)(hr,(function(e){return e.users})),Tr=(0,Sr.createSelector)(hr,(function(e){return e.conversations})),mr=(0,Sr.createSelector)(hr,(function(e){return e.agentConversations})),gr=(0,Sr.createSelector)(hr,(function(e){return function(e){return(0,A.checkEmptyObject)(e)?{}:e}(e.messages)})),br=(0,Sr.createSelector)(hr,(function(e){return e.stickers})),yr=(0,Sr.createSelector)(hr,(function(e){return e.orders})),Rr=(0,Sr.createSelector)(hr,(function(e){return e.products})),Dr=(0,Sr.createSelector)(hr,(function(e){return e.vouchers})),Ar=(0,Sr.createSelector)(hr,(function(e){return e.messageShortcutsGroups})),Cr=(0,Sr.createSelector)(hr,(function(e){return e.feedStories})),Ir=(0,Sr.createSelector)(hr,(function(e){return e.rateCards})),Pr=(0,Sr.createSelector)(hr,(function(e){return e.shops})),wr=(0,Sr.createSelector)(hr,(function(e){return e.contacts})),Nr=(0,Sr.createSelector)(Tr,mr,(function(e,t){var r=Object.keys(e).length+Object.keys(t).length;return Or(r)})),Ur=(0,Sr.createSelector)(gr,(function(e){return Or(Object.keys(e).length)}));function xr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?xr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.UPDATE_ENTITIES="UPDATE_ENTITIES",e.UPDATE_RECORD="UPDATE_RECORD",e.DELETE_RECORD="DELETE_RECORD",e.BATCH_UPDATE_RECORD="BATCH_UPDATE_RECORD"}(pr||(pr={}));const Mr=e({},pr.UPDATE_ENTITIES,(function(t,r){var n=r.payload.entities;return Object.entries(n).reduce((function(t,r){var n=D(r,2),o=n[0],a=n[1];return"persist"!==o?("shops"===o&&xt.updateShopMap(a),kr(kr({},t),{},e({},o,kr(kr({},t[o]),a)))):kr(kr({},t),{},e({},o,a))}),t)}));var Lr,jr,Gr=(0,dr.createActions)((e(Lr={},pr.UPDATE_ENTITIES,(function(e){return{entities:e.entities}})),e(Lr,pr.UPDATE_RECORD,(function(e){return{name:e.name,id:e.id,record:e.record}})),e(Lr,pr.DELETE_RECORD,(function(e){return{name:e.name,id:e.id}})),e(Lr,pr.BATCH_UPDATE_RECORD,(function(e){return{name:e.name,records:e.records,checkProp:e.checkProp}})),Lr)),Fr=Gr.updateEntities,Hr=Gr.updateRecord,Vr=Gr.deleteRecord,Br=Gr.batchUpdateRecord;function Yr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Yr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Qr=(e(jr={},pr.UPDATE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.id,c=n.record;return Wr(Wr({},t),{},e({},o,Wr(Wr({},t[o]),{},e({},a,Wr(Wr({},t[o][a]),c)))))})),e(jr,pr.DELETE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.id,c=t[o];return delete c[a],Wr(Wr({},t),{},e({},o,c))})),e(jr,pr.BATCH_UPDATE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.records,c=n.checkProp,s=Wr({},t[o]);return Object.keys(a).forEach((function(e){(!c||c&&a[e][c]>s[e][c])&&(s[e]=Wr(Wr({},s[e]),a[e]))})),Wr(Wr({},t),{},e({},o,s))})),jr);function qr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?qr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var zr,Xr=(0,dr.handleActions)(Kr(Kr({},Mr),Qr),{users:{},messages:{},conversations:{},agentConversations:{},stickers:{},orders:{},offers:{},products:{},shops:{},rateCards:{},feedStories:{},persist:null,vouchers:{},messageShortcuts:{}});!function(e){e.SHOW_MODAL="SHOW_MODAL",e.CLOSE_MODAL="CLOSE_MODAL"}(zr||(zr={}));var Jr,$r,Zr=function(e){return e.modalReducer.show},en=(0,Sr.createSelector)(Zr,(function(e){return e.modalReducer.type}),(function(e,t){return{show:e,type:t}}));function tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rn(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?tn(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var nn,on,an=(0,dr.createActions)((e(Jr={},zr.SHOW_MODAL,(function(e){var t=e.type,r=e.title,n=void 0===r?"":r,o=e.content,a=e.actions,c=void 0===a?{}:a,s=e.additions;return{type:t,title:n,content:o,actions:c,additions:void 0===s?{}:s}})),e(Jr,zr.CLOSE_MODAL,(function(){return{}})),Jr)),cn=an.showModal,sn=an.closeModal,un=(0,dr.handleActions)((e($r={},zr.SHOW_MODAL,(function(e,t){var r=t.payload,n=r.type,o=r.title;return{show:!0,type:n,content:r.content,title:o,actions:r.actions,additions:r.additions}})),e($r,zr.CLOSE_MODAL,(function(e){return rn(rn({},e),{},{show:!1})})),$r),{show:!1,type:"",title:"",content:"",actions:{},additions:{}}),ln=function(e){return e.unreadCountReducer.shopsUnreadConversationCount},dn=function(e){return e.unreadCountReducer.totalUnreadConversationsCount},pn={MARK_AS_READ:"markAsRead",MARK_AS_UNREAD:"markASUnread",CLOSE_CONVERSATION:"closeConversation",RESTART_CONVERSATION:"restartConversation",DELETE_CONVERSATION:"deleteConversation",FORWARD_CONVERSATION:"forwardConversation",RECEIVE_UNREADABLE_MESSAGE:"receiveUnreadableMessage",REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT:"refreshTotalUnreadConversationCount",REFRESH_SHOPS_UNREAD_CONVERSATIONS_COUNT:"refreshShopsUnreadConversationsCount",REFRESH_SINGLE_SHOP_UNREAD_CONVERSATION_COUNT:"refreshSingleShopUnreadConversationCount",UPDATE_CONVERSATION:"updateConversation",MESSAGE_QUEUE_UPDATE:"messageQueueUpdate",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_CLOSE:"mass_close",ACTIVE_CONVERSATION:"activeConversation",CLEAR_CONVERSATION_COUNT:"clearConversationCount"};function fn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _n(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?fn(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.UPDATE_UNREAD_COUNT="UPDATE_UNREAD_COUNT",e.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT="UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT",e.UPDATE_SINGLE_SHOP_UNREAD_COUNT="UPDATE_SINGLE_SHOP_UNREAD_COUNT",e.UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT="UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT",e.UPDATE_REGION_UNREAD_COUNT="UPDATE_REGION_UNREAD_COUNT",e.UPDATE_AGENT_UNREAD_CONVERSATION_COUNT="UPDATE_AGENT_UNREAD_CONVERSATION_COUNT"}(nn||(nn={}));var En=Ct().mark(gn),Sn=Ct().mark(bn),On=Ct().mark(yn),hn=Ct().mark(Rn),vn=(0,dr.createActions)((e(on={},nn.UPDATE_UNREAD_COUNT,(function(e){return{type:e.type,conversation:e.conversation,messageQueueUpdate:e.messageQueueUpdate,shopId:e.shopId,shopIds:e.shopIds,source:e.source,count:e.count}})),e(on,nn.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT,(function(e){return{count:e.count}})),e(on,nn.UPDATE_SINGLE_SHOP_UNREAD_COUNT,(function(e){return{shopId:e.shopId,num:e.num,action:e.action}})),e(on,nn.UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT,(function(e){return{shopUnreadCounts:e.shopUnreadCounts}})),on)),Tn=vn.updateUnreadCount,mn=vn.updateTotalUnreadConversationsCount;function gn(e,t){return Ct().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,Er.put)(Hr({name:"conversations",id:e,record:{unread_count:t}}));case 2:case"end":return r.stop()}}),En)}function bn(e){var t,r,n,o,a,c;return Ct().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.source,s.prev=1,r=t===A.UnreadSource.PRELOAD,n=t?{_s:t}:{},s.next=6,(0,Er.call)(uv,{shared:!r,parent:"conversation",resource:"unread-count",params:n});case 6:return o=s.sent,a=o.total_unread_count,s.next=10,(0,Er.put)(mn({count:a}));case 10:return s.next=12,(0,Er.select)(lo);case 12:c=s.sent,r&&CT({operation:A.TrackerOperation.IMPRESSION,trackerName:"impressionChatIcon",data:{ctx_url:window.location.href,has_unread_convo:!!a,unread_convo_cnt:a},page:c?"seller_center_chat":"minichat_page"}),s.next=18;break;case 16:s.prev=16,s.t0=s.catch(1);case 18:case"end":return s.stop()}}),Sn,null,[[1,16]])}function yn(e){var t,r,n,o,a,c,s,i,u,l,d,p;return Ct().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,r=t.type,n=t.conversation,o=void 0===n?{}:n,t.shopId,t.shopIds,a=t.messageQueueUpdate,c=t.source,s=t.count,i=o.id,u=o.unread_count,o.shop_id,f.next=4,(0,Er.select)(dn);case 4:l=f.sent,f.t0=r,f.next=f.t0===pn.FORWARD_CONVERSATION||f.t0===pn.CLOSE_CONVERSATION||f.t0===pn.DELETE_CONVERSATION||f.t0===pn.UPDATE_CONVERSATION?8:f.t0===pn.CLEAR_CONVERSATION_COUNT||f.t0===pn.MARK_AS_READ?14:f.t0===pn.ACTIVE_CONVERSATION?20:f.t0===pn.MARK_AS_UNREAD?23:f.t0===pn.RECEIVE_UNREADABLE_MESSAGE?28:f.t0===pn.RESTART_CONVERSATION?34:f.t0===pn.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT?37:f.t0===pn.MESSAGE_QUEUE_UPDATE?42:f.t0===pn.MASS_READ?46:f.t0===pn.MASS_UNREAD?49:f.t0===pn.MASS_CLOSE?52:55;break;case 8:if(0===u){f.next=13;break}return f.next=11,(0,Er.put)(mn({count:l-1}));case 11:return f.next=13,(0,Er.call)(gn,i,0);case 13:case 19:case 22:case 27:case 33:case 36:case 41:case 45:case 48:case 51:case 54:case 55:return f.abrupt("break",56);case 14:if(!(u>0)){f.next=19;break}return f.next=17,(0,Er.put)(mn({count:l-1}));case 17:return f.next=19,(0,Er.call)(gn,i,0);case 20:return f.next=22,(0,Er.put)(mn({count:l+1}));case 23:return f.next=25,(0,Er.put)(mn({count:l+1}));case 25:return f.next=27,(0,Er.call)(gn,i,u+1);case 28:if(0!==u){f.next=31;break}return f.next=31,(0,Er.put)(mn({count:l+1}));case 31:return f.next=33,(0,Er.call)(gn,i,u+1);case 34:return f.next=36,(0,Er.call)(bn,{source:c});case 37:return f.next=39,(0,Er.call)(bn,{source:c});case 39:return f.next=41,(0,Er.put)(Pa({hasFetchedUnread:!0}));case 42:return p=(d=a).totalIncrease,d.shopsIncrease,f.next=45,(0,Er.put)(mn({count:l+p}));case 46:return f.next=48,(0,Er.put)(mn({count:l-s}));case 49:return f.next=51,(0,Er.put)(mn({count:l+s}));case 52:return f.next=54,(0,Er.put)(mn({count:l-s}));case 56:case"end":return f.stop()}}),On)}function Rn(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(Tn,yn);case 2:case"end":return e.stop()}}),hn)}vn.updateSingleShopUnreadCount,vn.updateShopsUnreadConversationsCount;const Dn=e({},nn.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT,(function(e,t){var r=t.payload.count;return _n(_n({},e),{},{totalUnreadConversationsCount:r<0?0:r})}));function An(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Cn,In=[Rn],Pn=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?An(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Dn),{totalUnreadConversationsCount:0}),wn=function(e){return e.userReducer.loading},Nn=function(e){return e.userReducer.currentUserId},Un=function(e){return e.userReducer.newbie},xn=function(e){return e.userReducer.networkStatus},kn=function(e){return e.userReducer.shouldInitFSSDK},Mn=function(e){return e.userReducer.hasVideoPermission},Ln=function(e){return e.userReducer.hasReplyPermission},jn=function(e){return e.userReducer.hasDeletePermission},Gn=function(e){return e.userReducer.deleteConfigDuration},Fn=function(e){return e.userReducer.waitingTimeFilter},Hn=function(e){var t=e.userReducer;return{hasDeletePermission:t.hasDeletePermission,deleteConfigVersion:t.deleteConfigVersion,deleteConfigDuration:t.deleteConfigDuration}},Vn=function(e){return e.userReducer.subaccountHasUnrepliedPermission},Bn=function(e){return e.userReducer.captchaVisible},Yn=function(e){return e.userReducer.captchaSignature},Wn=function(e){return e.userReducer.resendMessagePayload},Qn=function(e){return e.userReducer.newMessageFlag},qn=function(e){return(0,Sr.createSelector)(hr,(function(r){return(0,t.denormalize)(e,a,{users:r})}))},Kn=(0,Sr.createSelector)(vr,Nn,(function(e,r){return(0,t.denormalize)(r,a,{users:e})||{}})),zn=(0,Sr.createSelector)(Kn,(function(e){return e&&e.locale})),Xn=(0,Sr.createSelector)(Kn,(function(e){return!(0,A.checkEmptyObject)(e)&&e.type===A.AccountType.SUBACCOUNT})),Jn=(0,Sr.createSelector)(Kn,(function(e){return!(0,A.checkEmptyObject)(e)&&e.is_cb})),$n=function(e){return e.userReducer.shopStatisticsMap},Zn=function(e,t){return(0,Sr.createSelector)($n,(function(r){return r["".concat(e,"-").concat(t)]||{}}))},eo=(0,Sr.createSelector)(Kn,Xn,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t?void 0:e.shop_id})),to=(0,Sr.createSelector)(Kn,Xn,Pr,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return r?void 0:(0,t.denormalize)(e.shop_id,p,{shops:n})||{}})),ro=(0,Sr.createSelector)(Kn,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.role||""})),no=(0,Sr.createSelector)(Kn,(function(e){return e&&e.distribution_status||""})),oo=function(e){return e.userReducer.isMainPage},ao=function(e){return e.userReducer.curTabFocused},co=function(e){return e.userReducer.textBoxHeight},so=function(e){return e.userReducer.showConversationDetail},io=function(e){return e.userReducer.showChatWindow},uo=function(e){return e.userReducer.openedMenu},lo=function(e){return e.userReducer.isScChat},po=function(e){return e.userReducer.loginSuccess},fo=function(e){return e.userReducer.socketSuccess},_o=function(e){return e.userReducer.showEntry},Eo=function(e){return e.userReducer.hasFetchedUnread},So=(0,Sr.createSelector)(Kn,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.authorizedShopsCount||0})),Oo=function(e){return e.userReducer.showAutoHangupModal},ho=(0,Sr.createSelector)(Kn,Xn,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return!!t||e.is_seller}));!function(e){e.BLOCK_USER_REQUESTED="BLOCK_USER_REQUESTED",e.CHECK_USER_PERMISSION_REQUESTED="CHECK_USER_PERMISSION_REQUESTED",e.CHECK_USER_PERMISSION_SUCCEEDED="CHECK_USER_PERMISSION_SUCCEEDED",e.CLOSE_HANGUP_TIPS_REQUESTED="CLOSE_HANGUP_TIPS_REQUESTED",e.SEND_FEEDBACK_REQUESTED="SEND_FEEDBACK_REQUESTED",e.GET_GUIDE_REQUESTED="GET_GUIDE_REQUESTED",e.GET_GUIDE_SUCCEEDED="GET_GUIDE_SUCCEEDED",e.GET_GUIDE_FAILED="GET_GUIDE_FAILED",e.SHOW_LOADING_SUCCEEDED="SHOW_LOADING_SUCCEEDED",e.SET_HAS_SESSION="SET_HAS_SESSION",e.SHOW_USER_REQUESTED="SHOW_USER_REQUESTED",e.FETCH_USER_ORDER_DETAIL_REQUESTED="FETCH_USER_ORDER_DETAIL_REQUESTED",e.FETCH_USER_ORDER_DETAIL_SUCCEEDED="FETCH_USER_ORDER_DETAIL_SUCCEEDED",e.FETCH_USER_PERFORMANCE_REQUESTED="FETCH_USER_PERFORMANCE_REQUESTED",e.FETCH_USER_PERFORMANCE_SUCCEED="FETCH_USER_PERFORMANCE_SUCCEED",e.UPDATE_USER_REQUESTED="UPDATE_USER_REQUESTED",e.UPDATE_NETWORK_STATUS="UPDATE_NETWORK_STATUS",e.UPDATE_CUR_TAB_FOCUSED="UPDATE_CUR_TAB_FOCUSED",e.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED="UPDATE_CUR_TAB_FOCUSED_SUCCEEDED",e.UPDATE_WORKSTATION_PANEL="UPDATE_WORKSTATION_PANEL",e.UPDATE_NEW_MESSAGE_FLAG="UPDATE_NEW_MESSAGE_FLAG",e.UPDATE_CHAT_WINDOW_STATUS="UPDATE_CHAT_WINDOW_STATUS",e.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED="UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED",e.UPDATE_CONVERSATION_DETAIL_STATUS="UPDATE_CONVERSATION_DETAIL_STATUS",e.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED="UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED",e.UPDATE_OPENED_MENU="UPDATE_OPENED_MENU",e.SET_CHAT_SOURCE="SET_CHAT_SOURCE",e.UPDATE_LOGIN_SUCCESS_STATUS="UPDATE_LOGIN_SUCCESS_STATUS",e.UPDATE_SOCKET_SUCCESS_STATUS="UPDATE_SOCKET_SUCCESS_STATUS",e.UPDATE_CHAT_ENTRY_STATUS="UPDATE_CHAT_ENTRY_STATUS",e.UPDATE_GUIDE_REQUESTED="UPDATE_GUIDE_REQUESTED",e.UPDATE_GUIDE_SUCCEEDED="UPDATE_GUIDE_SUCCEEDED",e.LOGIN_REQUESTED="LOGIN_REQUESTED",e.LOGIN_SUCCEEDED="LOGIN_SUCCEEDED",e.LOGOUT_REQUESTED="LOGOUT_REQUESTED",e.LOGOUT_SUCCEEDED="LOGOUT_SUCCEEDED",e.UPDATE_LOGIN_STATUS="UPDATE_LOGIN_STATUS",e.SHOW_TRANSLATION_GUIDE="SHOW_TRANSLATION_GUIDE",e.SHOW_REGION_FILTER_GUIDE="SHOW_REGION_FILTER_GUIDE",e.FORCE_LOGOUT_REQUESTED="FORCE_LOGOUT_REQUESTED",e.CONNECT_SOCKET="CONNECT_SOCKET",e.REPORT_ASYNC_TASK="REPORT_ASYNC_TASK",e.UPLOAD_FEEDBACK_VIDEO_REQUESTED="UPLOAD_FEEDBACK_VIDEO_REQUESTED",e.UPLOAD_FEEDBACK_VIDEO_STATUS="UPLOAD_FEEDBACK_VIDEO_STATUS",e.UPDATE_CAPTCHA_VISIBLE="UPDATE_CAPTCHA_VISIBLE",e.UPDATE_CAPTCHA_SIGNATURE="UPDATE_CAPTCHA_SIGNATURE",e.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED="UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED",e.SET_TEXT_BOX_HEIGHT="SET_TEXT_BOX_HEIGHT",e.UPDATE_RELATED_CAPACITY="UPDATE_RELATED_CAPACITY",e.UPDATE_IS_MAIN_PAGE="UPDATE_IS_MAIN_PAGE",e.UPDATE_DEL_PERMISSION="UPDATE_DEL_PERMISSION",e.GET_FEEDBACK_CLASSIFICATION_REQUESTED="GET_FEEDBACK_CLASSIFICATION_REQUESTED",e.GET_CLASSIFICATION_SUCCEED="GET_CLASSIFICATION_SUCCEED",e.UPDATE_SHOW_AUTO_HANGUP_MODAL="UPDATE_SHOW_AUTO_HANGUP_MODAL",e.REPORT_USER_REQUESTED="REPORT_USER_REQUESTED",e.SET_CHAT_LIST_WIDTH="SET_CHAT_LIST_WIDTH",e.UPDATE_HAS_FETCHED_UNREAD="UPDATE_HAS_FETCHED_UNREAD"}(Cn||(Cn={}));var vo,To,mo=y(439).t,go=Ct().mark(Co),bo=Ct().mark(Io),yo=(0,dr.createActions)(e({},Cn.BLOCK_USER_REQUESTED,(function(e){var t=e.buyerName,r=e.buyerId,n=e.block;return{buyerName:t,buyerId:r,block:void 0===n||n,shopId:e.shopId,conversationId:e.conversationId}}))),Ro=yo.blockUserRequested,Do=function(e){return{type:"CONFIRM_MODAL",title:{key:"conversation_detail.workstation.block_fail_modal.title",vars:{username:e}},actions:{confirm:{label:{key:"common.confirm"}}}}},Ao=function(e,t,r){return{toast:{show:!0,type:e?"fail":"warn",message:e?mo("common.server_error.warning_tips"):mo("conversation_detail.".concat(t?"blocked":"unblocked"),{username:r})}}};function Co(e){var t,r,n,o,a,c,s;return Ct().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.buyerName,n=t.buyerId,o=t.block,a=t.shopId,c=t.conversationId,i.prev=1,s=o?"PUT":"DELETE",i.next=5,(0,Er.call)(uv,{method:s,parent:"user",resource:"blocks",id:n,params:{shop_id:a}});case 5:return i.next=7,(0,Er.put)(rf(Ao(!1,o,r)));case 7:return i.next=9,(0,Er.put)(Hr({name:"users",id:n,record:{is_blocked:o}}));case 9:return i.next=11,(0,Er.put)(Hr({name:"conversations",id:c,record:{is_blocked:o}}));case 11:case 18:i.next=22;break;case 13:if(i.prev=13,i.t0=i.catch(1),!(i.t0 instanceof ft&&o&&i.t0.handler().message)){i.next=20;break}return i.next=18,(0,Er.put)(cn(Do(r)));case 20:return i.next=22,(0,Er.put)(rf(Ao(!0)));case 22:case"end":return i.stop()}}),go,null,[[1,13]])}function Io(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(Ro,Co);case 2:case"end":return e.stop()}}),bo)}function Po(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wo(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Po(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Po(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var No=Ct().mark(Go),Uo=Ct().mark(Fo),xo=(0,dr.createActions)((e(vo={},Cn.GET_GUIDE_REQUESTED,(function(e){return{userId:e.userId,version:e.version}})),e(vo,Cn.GET_GUIDE_SUCCEEDED,(function(e){return{newbie:e.newbie}})),e(vo,Cn.GET_GUIDE_FAILED,(function(){return{}})),vo)),ko=xo.getGuideRequested,Mo=xo.getGuideSucceeded,Lo=xo.getGuideFailed,jo="newbie-completed-info";function Go(e){var t,r,n,o,a,c;return Ct().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.userId,n=t.version,s.prev=1,s.next=4,(0,A.getItem)(jo);case 4:if(s.sent!=="".concat(r,"-").concat(n)){s.next=7;break}return s.abrupt("return",[]);case 7:return o=[1],s.next=10,(0,Er.call)(uv,{resource:"newbie",suffix:"uncompleted",params:{chat_types:"[".concat(o.join(","),"]")}});case 10:return a=s.sent,c=a.newbie,s.next=14,(0,Er.put)(Mo({newbie:c}));case 14:if(!(c.findIndex((function(e){return(e.name||"").toLocaleLowerCase().includes("mini")}))<0)){s.next=18;break}return s.next=18,(0,A.setItem)(jo,"".concat(r,"-").concat(n));case 18:return s.abrupt("return",c);case 21:return s.prev=21,s.t0=s.catch(1),s.next=25,(0,Er.put)(Lo());case 25:return s.abrupt("return",[]);case 26:case"end":return s.stop()}}),No,null,[[1,21]])}function Fo(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(ko,Go);case 2:case"end":return e.stop()}}),Uo)}const Ho=(e(To={},Cn.GET_GUIDE_SUCCEEDED,(function(e,t){var r=t.payload.newbie;return wo(wo({},e),{},{newbie:r})})),e(To,Cn.GET_GUIDE_FAILED,(function(e){return wo(wo({},e),{},{newbie:[]})})),To);var Vo;function Bo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yo(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Bo(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Wo=Ct().mark($o),Qo=Ct().mark(Zo);function qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ko=(0,dr.createActions)((e(Vo={},Cn.UPDATE_GUIDE_REQUESTED,(function(e){return{newbieId:e.newbieId}})),e(Vo,Cn.UPDATE_GUIDE_SUCCEEDED,(function(e){return{newbie:e.newbie}})),Vo)),zo=Ko.updateGuideRequested,Xo=Ko.updateGuideSucceeded;function Jo(e,t){var r,n=Qt(e),o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return qo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qo(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}(n);try{for(o.s();!(r=o.n()).done;){var a=r.value,c=a.children.findIndex((function(e){return e.id===t}));if(-1!==c){a.children.splice(c,1);break}}}catch(e){o.e(e)}finally{o.f()}return n}function $o(e){var t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.newbieId,o.next=3,(0,Er.select)(Un);case 3:return r=o.sent,n=Jo(r,t),o.next=7,(0,Er.put)(Xo({newbie:n}));case 7:return o.prev=7,o.next=10,(0,Er.call)(uv,{method:"PUT",resource:"newbie",id:t});case 10:o.next=14;break;case 12:o.prev=12,o.t0=o.catch(7);case 14:case"end":return o.stop()}}),Wo,null,[[7,12]])}function Zo(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(zo,$o);case 2:case"end":return e.stop()}}),Qo)}const ea=e({},Cn.UPDATE_GUIDE_SUCCEEDED,(function(e,t){var r=t.payload.newbie;return Yo(Yo({},e),{},{newbie:r})}));var ta,ra,na=y(550),oa=y.n(na),aa=y(947),ca=y.n(aa);function sa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ia(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?sa(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ua=Ct().mark(wa),la=Ct().mark(Na),da=Ct().mark(Ua),pa=Ct().mark(ka),fa=Ct().mark(Ma),_a=Ct().mark(La),Ea=(0,dr.createActions)((e(ta={},Cn.UPDATE_USER_REQUESTED,(function(e){return{status:e.status}})),e(ta,Cn.UPDATE_NETWORK_STATUS,(function(e){return{networkStatus:e.networkStatus}})),e(ta,Cn.FETCH_USER_ORDER_DETAIL_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId}})),e(ta,Cn.FETCH_USER_ORDER_DETAIL_SUCCEEDED,(function(e){return{userId:e.userId,shopId:e.shopId,data:e.data}})),e(ta,Cn.UPDATE_SHOW_AUTO_HANGUP_MODAL,(function(e){return{showAutoHangupModal:e.showAutoHangupModal}})),e(ta,Cn.UPDATE_CHAT_WINDOW_STATUS,(function(e){return{shouldShowWindow:e.shouldShowWindow,from:e.from}})),e(ta,Cn.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED,(function(e){return{shouldShowWindow:e.shouldShowWindow}})),e(ta,Cn.UPDATE_CONVERSATION_DETAIL_STATUS,(function(e){var t=e.shouldShowConversationDetail,r=e.needMark;return{shouldShowConversationDetail:t,needMark:void 0!==r&&r}})),e(ta,Cn.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED,(function(e){return{shouldShowConversationDetail:e.shouldShowConversationDetail}})),e(ta,Cn.UPDATE_OPENED_MENU,(function(e){return{openedMenu:e}})),e(ta,Cn.SET_CHAT_SOURCE,(function(e){return{isScChat:e.isScChat}})),e(ta,Cn.UPDATE_LOGIN_SUCCESS_STATUS,(function(e){return{loginSuccess:e.loginSuccess}})),e(ta,Cn.UPDATE_SOCKET_SUCCESS_STATUS,(function(e){return{socketSuccess:e.socketSuccess}})),e(ta,Cn.UPDATE_CHAT_ENTRY_STATUS,(function(e){return{showEntry:e.showEntry}})),e(ta,Cn.UPDATE_HAS_FETCHED_UNREAD,(function(e){return{hasFetchedUnread:e.hasFetchedUnread}})),ta)),Sa=Ea.updateUserRequested,Oa=Ea.updateNetworkStatus,ha=Ea.fetchUserOrderDetailRequested,va=Ea.fetchUserOrderDetailSucceeded,Ta=Ea.updateShowAutoHangupModal,ma=Ea.updateChatWindowStatus,ga=Ea.updateChatWindowStatusSucceeded,ba=Ea.updateConversationDetailStatus,ya=Ea.updateConversationDetailStatusSucceeded,Ra=Ea.updateOpenedMenu,Da=Ea.setChatSource,Aa=Ea.updateLoginSuccessStatus,Ca=Ea.updateSocketSuccessStatus,Ia=Ea.updateChatEntryStatus,Pa=Ea.updateHasFetchedUnread;function wa(e){var t;return Ct().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.status,r.prev=1,r.next=4,(0,Er.call)(uv,{method:"PUT",resource:"user",payload:JSON.stringify({distribution_status:t})});case 4:if(!(0,A.checkIsScChat)()||"working"!==t){r.next=9;break}return r.next=9,(0,Er.put)(bh({event_time:(Date.parse(new Date+"")/1e3).toString(),url:window.location.href}));case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(1),r.next=15,(0,Er.put)(rf({error:r.t0}));case 15:case"end":return r.stop()}}),ua,null,[[1,11]])}function Na(e){var t,r,n,o;return Ct().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,a.prev=1,a.next=4,(0,Er.call)(uv,{parent:"users",parentId:r,resource:"get_user_shop_statistics_info",params:{shop_id:n}});case 4:return o=a.sent,a.next=7,(0,Er.put)(va({userId:r,shopId:n,data:o}));case 7:a.next=11;break;case 9:a.prev=9,a.t0=a.catch(1);case 11:case"end":return a.stop()}}),la,null,[[1,9]])}function Ua(){var e,t,r,n,o;return Ct().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,Er.select)(Qs);case 2:if(!(e=a.sent)){a.next=8;break}if(t=e.status,r=e.id,n=e.unread_count,o=e.latest_message_id,!("closed"!==t&&n>0)){a.next=8;break}return a.next=8,(0,Er.put)(ki({conversationId:r,isRead:!0,latestMessageId:o}));case 8:case"end":return a.stop()}}),da)}var xa=!0;function ka(e){var t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.shouldShowWindow,n=t.from,o.next=3,(0,Er.put)(ga({shouldShowWindow:r}));case 3:if(!r){o.next=17;break}return o.next=6,oa().call(ca().updateChatbotFrom({payload:n||A.ChatbotFromType.LandingPage}));case 6:return window.CsChat&&window.CsChat.minimizeCsChatWindow&&window.CsChat.minimizeCsChatWindow(),o.next=9,(0,Er.call)(Ua);case 9:if(!xa){o.next=15;break}return o.next=12,(0,Er.spawn)(eE);case 12:return o.next=14,(0,Er.call)(Ml,{payload:{direction:"reset"}});case 14:xa=!1;case 15:return o.next=17,oa().call(ca().handleNewConversationMessageQueue());case 17:case"end":return o.stop()}}),pa)}function Ma(e){var t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.shouldShowConversationDetail,n=t.needMark,o.next=3,(0,Er.put)(ya({shouldShowConversationDetail:r}));case 3:if(!n||!r){o.next=6;break}return o.next=6,(0,Er.call)(Ua);case 6:case"end":return o.stop()}}),fa)}function La(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(Sa,wa);case 2:return e.next=4,(0,Er.takeEvery)(ha,Na);case 4:return e.next=6,(0,Er.takeEvery)(ma,ka);case 6:return e.next=8,(0,Er.takeEvery)(ba,Ma);case 8:case"end":return e.stop()}}),_a)}const ja=(e(ra={},Cn.UPDATE_NETWORK_STATUS,(function(e,t){var r=t.payload.networkStatus;return ia(ia({},e),{},{networkStatus:r})})),e(ra,Cn.FETCH_USER_ORDER_DETAIL_SUCCEEDED,(function(t,r){var n=r.payload,o=n.userId,a=n.shopId,c=n.data,s="".concat(o,"-").concat(a),i=t.shopStatisticsMap;return ia(ia({},t),{},{shopStatisticsMap:ia(ia({},i),{},e({},s,c))})})),e(ra,Cn.UPDATE_SHOW_AUTO_HANGUP_MODAL,(function(e,t){var r=t.payload.showAutoHangupModal;return ia(ia({},e),{},{showAutoHangupModal:r})})),e(ra,Cn.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED,(function(e,t){var r=t.payload.shouldShowWindow;return ia(ia({},e),{},{showChatWindow:r})})),e(ra,Cn.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED,(function(e,t){var r=t.payload.shouldShowConversationDetail;return ia(ia({},e),{},{showConversationDetail:r})})),e(ra,Cn.UPDATE_OPENED_MENU,(function(e,t){var r=t.payload.openedMenu;return ia(ia({},e),{},{openedMenu:r})})),e(ra,Cn.SET_CHAT_SOURCE,(function(e,t){var r=t.payload.isScChat;return ia(ia({},e),{},{isScChat:r})})),e(ra,Cn.UPDATE_LOGIN_SUCCESS_STATUS,(function(e,t){var r=t.payload.loginSuccess;return ia(ia({},e),{},{loginSuccess:r})})),e(ra,Cn.UPDATE_SOCKET_SUCCESS_STATUS,(function(e,t){var r=t.payload.socketSuccess;return ia(ia({},e),{},{socketSuccess:r})})),e(ra,Cn.UPDATE_CHAT_ENTRY_STATUS,(function(e,t){var r=t.payload.showEntry;return ia(ia({},e),{},{showEntry:r})})),e(ra,Cn.UPDATE_HAS_FETCHED_UNREAD,(function(e,t){var r=t.payload.hasFetchedUnread;return ia(ia({},e),{},{hasFetchedUnread:r})})),ra);var Ga,Fa,Ha=y(459);function Va(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ba(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Va(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Va(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ya,Wa=Ct().mark(rc),Qa=Ct().mark(nc),qa=Ct().mark(cc),Ka=Ct().mark(sc),za=Ct().mark(ic);Ya=(0,A.checkIsScChat)();var Xa=(0,dr.createActions)((e(Ga={},Cn.LOGIN_REQUESTED,(function(){return{}})),e(Ga,Cn.LOGIN_SUCCEEDED,(function(e){return{currentUserId:e.currentUserId,status:e.status}})),e(Ga,Cn.LOGOUT_REQUESTED,(function(){return{}})),e(Ga,Cn.LOGOUT_SUCCEEDED,(function(){return{}})),e(Ga,Cn.FORCE_LOGOUT_REQUESTED,(function(){return{}})),Ga)),Ja=Xa.loginRequested,$a=Xa.loginSucceeded,Za=Xa.logoutRequested,ec=Xa.logoutSucceeded,tc=Xa.forceLogoutRequested;function rc(e){return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Er.call)(A.getItem,e);case 2:if(t.sent){t.next=6;break}return t.next=6,(0,Er.call)(A.setItem,e,(0,Ha.v4)());case 6:case"end":return t.stop()}}),Wa)}function nc(){var e,t;return Ct().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=(0,A.getTranslationLocale)((0,A.getRuntimeLocale)()),r.next=3,(0,Er.call)($v,{locale:e});case 3:return t=r.sent,r.next=6,(0,Er.call)(A.changeLanguage,e,t);case 6:case"end":return r.stop()}}),Qa)}var oc=Ct().mark((function e(t){var r,n;return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,A.getTranslationLocale)(t),e.prev=1,e.next=4,(0,Er.call)($v,{locale:n});case 4:r=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,(0,Er.call)($v,{locale:(0,A.getTranslationLocale)((0,A.getRuntimeLocale)())});case 11:r=e.sent;case 12:return e.next=14,(0,Er.call)(A.changeLanguage,n,r);case 14:return e.next=16,(0,Er.call)(A.updateTimeLocale,(0,A.getServiceLocale)(t));case 16:case"end":return e.stop()}}),e,null,[[1,7]])})),ac=Ct().mark((function e(t){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.call)(nc);case 2:return e.next=4,(0,Er.put)(Ia({showEntry:!0}));case 4:return e.next=6,(0,Er.put)(Aa({loginSuccess:!1}));case 6:Hv(jv.LOGIN_FAILED,0,{type:(r=t,r instanceof lt?"InternalServerError":r instanceof dt?"Forbidden":r instanceof st?"Unauthoried":"Other")});case 7:case"end":return e.stop()}var r}),e)}));function cc(e,t){var r,n,o,a,c,s,i,u,l;return Ct().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,r=t.godToken,n=e.user,o=n.id,a=n.type,c=n.locale,s=n.distribution_status,i=a===A.AccountType.SUBACCOUNT,window.__WEBCHAT_LOGIN__||i&&"working"===s&&(window.__WEBCHAT_LOGIN__=!0),d.next=8,(0,Er.call)(oc,c||"en");case 8:return performance.mark("APP_RENDERING"),Gv(),Uv(a),gT(n),d.next=14,(0,Er.put)(Oa({networkStatus:"online"}));case 14:return window.addEventListener("online",(function(){It.store.dispatch(Oa({networkStatus:"online"}))})),window.addEventListener("offline",(function(){It.store.dispatch(Oa({networkStatus:"offline"}))})),d.next=18,(0,Er.put)(Aa({loginSuccess:!0}));case 18:return d.next=20,(0,Er.put)(Ia({showEntry:!0}));case 20:return u=T("users",n),l=u.entities,d.next=23,(0,Er.put)(Fr({entities:l}));case 23:return!r&&Bt.connect(),Ya&&Bt.dispatch(A.CustomShareEvent.CALC_CONNECTIONS),d.next=27,(0,Er.put)($a({currentUserId:o}));case 27:return d.next=29,(0,Er.put)(vc());case 29:return d.next=31,(0,Er.spawn)(rc,"device_id");case 31:if(i){d.next=34;break}return d.next=34,(0,Er.call)(mO,SO({shopId:n.shop_id}));case 34:d.next=40;break;case 36:return d.prev=36,d.t0=d.catch(0),d.next=40,(0,Er.call)(ac,d.t0);case 40:return d.prev=40,d.finish(40);case 42:case"end":return d.stop()}}),qa,null,[[0,36,40,42]])}function sc(){var e,t,r;return Ct().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,performance.mark("APP_PREPARED"),e={},t="",!window.__WEBCHAT_SESSION__){n.next=9;break}Hv(jv.LOGIN_IN_HTML,0),e=window.__WEBCHAT_SESSION__,n.next=16;break;case 9:return Hv(jv.LOGIN_IN_SERVICE,0),(r={method:"POST",subServer:"coreapi",resource:"login"}).params={source:Ya?"sc":"pcmall"},((0,A.isVisitingCNSC)()||(0,A.isVisitingKRSC)())&&(r.parent="cbsc"),n.next=15,(0,Er.call)(uv,r);case 15:e=n.sent;case 16:return performance.mark("LOGIN_API_RESPONSED"),n.next=19,(0,A.setItem)("mini-session",e);case 19:return A.LS.setItem("mini-session",JSON.stringify(e)),n.abrupt("return",{session:e,params:{godToken:t}});case 23:return n.prev=23,n.t0=n.catch(0),n.next=27,(0,Er.call)(ac,n.t0);case 27:return n.prev=27,n.finish(27);case 29:case"end":return n.stop()}}),Ka,null,[[0,23,27,29]])}function ic(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeLatest)(Ja,sc);case 2:return e.next=4,(0,Er.takeLatest)(Za,Os);case 4:return e.next=6,(0,Er.takeLatest)(tc,Ss);case 6:case"end":return e.stop()}}),za)}const uc=(e(Fa={},Cn.LOGIN_SUCCEEDED,(function(e,t){var r=t.payload.currentUserId;return Ba(Ba({},e),{},{currentUserId:r})})),e(Fa,Cn.LOGOUT_SUCCEEDED,(function(e){return Ba(Ba({},e),{},{currentUserId:null,performance:{},closeHangupTips:!1,hasVideoPermission:!1,captchaVisible:!1,curTabFocused:!0})})),Fa);var lc,dc,pc,fc,_c=Ct().mark(bc),Ec=Ct().mark(yc);function Sc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Sc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}fc="mini-filter",pc=(0,A.checkIsScChat)();var hc=(0,dr.createActions)((e(lc={},Cn.CHECK_USER_PERMISSION_REQUESTED,(function(){return{}})),e(lc,Cn.CHECK_USER_PERMISSION_SUCCEEDED,(function(e){return{shouldInitFSSDK:e.shouldInitFSSDK,hasVideoPermission:e.hasVideoPermission,hasReplyPermission:e.hasReplyPermission,hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion,waitingTimeFilter:e.waitingTimeFilter,subaccountHasUnrepliedPermission:e.subaccountHasUnrepliedPermission}})),e(lc,Cn.UPDATE_DEL_PERMISSION,(function(e){return{hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion}})),lc)),vc=hc.checkUserPermissionRequested,Tc=hc.checkUserPermissionSucceeded,mc=hc.updateDelPermission,gc=function(){try{return A.LS.getItem("minichat-service-down")||!1}catch(e){return!1}};function bc(){var e,t,r,n,o,a,c,s,i,u,l,d,p;return Ct().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return e={hasVideoPermission:!1,hasReplyPermission:!1,shouldInitFSSDK:!1,hasDeletePermission:!1,deleteConfigDuration:0,deleteConfigVersion:0,waitingTimeFilter:!1},f.next=3,(0,Er.select)(Kn);case 3:return t=f.sent,r=t.type,n=t.country,o=t.id,a=JSON.parse(A.LS.getItem(fc))||{},f.prev=6,f.next=9,(0,Er.call)(uv,{subServer:"coreapi",parent:"user",resource:"global_config"});case 9:if(c=f.sent,e.hasVideoPermission=c.video,e.hasReplyPermission=c.reply,e.shouldInitFSSDK=c.privacy&&pc||"live"!==(0,A.getRuntimeServer)(),e.waitingTimeFilter=c.waiting_time_filter,!pc&&(e.waitingTimeFilter=!1),"seller"===r?(s=c.delete_msg||{},e.deleteConfigVersion=s.config_version,i=(s.region_config||[]).find((function(e){return e.region===n})),i&&i.duration&&(e.hasDeletePermission=!0,e.deleteConfigDuration=i.duration)):e.subaccountHasUnrepliedPermission=c.support_subaccount_unreplied,a.filter&&a.userid===o||(u=e.waitingTimeFilter?"Unreplied":"All",A.LS.setItem(fc,JSON.stringify({filter:u,userid:o}))),void 0===c.br_site_close){f.next=22;break}return f.next=20,(0,Er.put)(uu({alert:(null==c||null===(l=c.br_site_close)||void 0===l?void 0:l.site_close)||!1,close:gc()}));case 20:window.__SERVICEDOWN_STATT_TIME__=(null==c||null===(d=c.br_site_close)||void 0===d?void 0:d.start_time)||0,window.__SERVICEDOWN_END_TIME__=(null==c||null===(p=c.br_site_close)||void 0===p?void 0:p.end_time)||0;case 22:f.next=27;break;case 24:f.prev=24,f.t0=f.catch(6),a.filter&&a.userid===o||A.LS.setItem(fc,JSON.stringify({filter:"All",userid:o}));case 27:return f.next=29,(0,Er.put)(Tc(Oc({},e)));case 29:case"end":return f.stop()}}),_c,null,[[6,24]])}function yc(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(vc,bc);case 2:case"end":return e.stop()}}),Ec)}const Rc=(e(dc={},Cn.CHECK_USER_PERMISSION_SUCCEEDED,(function(e,t){var r=t.payload,n=r.shouldInitFSSDK,o=r.hasVideoPermission,a=r.hasReplyPermission,c=r.hasDeletePermission,s=r.deleteConfigDuration,i=r.deleteConfigVersion,u=r.waitingTimeFilter,l=r.subaccountHasUnrepliedPermission;return Oc(Oc({},e),{},{shouldInitFSSDK:n,hasVideoPermission:o,hasReplyPermission:a,hasDeletePermission:c,deleteConfigDuration:s,deleteConfigVersion:i,waitingTimeFilter:u,subaccountHasUnrepliedPermission:l})})),e(dc,Cn.UPDATE_DEL_PERMISSION,(function(e,t){var r=t.payload,n=r.hasDeletePermission,o=r.deleteConfigDuration,a=r.deleteConfigVersion;return Oc(Oc({},e),{},{hasDeletePermission:n,deleteConfigDuration:o,deleteConfigVersion:a})})),dc);var Dc,Ac,Cc=Ct().mark(wc),Ic=Ct().mark(Nc),Pc=(0,dr.createActions)(e({},Cn.SHOW_USER_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId,buyerShopId:e.buyerShopId}}))).showUserRequested;function wc(e){var t,r,n,o,a,c,s;return Ct().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,o=t.buyerShopId,i.prev=1,i.next=4,(0,Er.call)(uv,{resource:"users",id:r,params:{shop_id:n,need_cache:1,cache_expires:1800}});case 4:a=i.sent,i.next=10;break;case 7:i.prev=7,i.t0=i.catch(1),a={id:r,shop_id:o};case 10:return c=T("users",a),s=c.entities,i.next=13,(0,Er.put)(Fr({entities:s}));case 13:return i.next=15,(0,Er.put)(ha({userId:r,shopId:n}));case 15:case"end":return i.stop()}}),Cc,null,[[1,7]])}function Nc(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(Pc,wc);case 2:case"end":return e.stop()}}),Ic)}function Uc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Uc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var kc=Ct().mark(Hc),Mc=Ct().mark(Vc),Lc=(0,dr.createActions)((e(Dc={},Cn.UPDATE_IS_MAIN_PAGE,(function(e){return{isMainPage:e.isMainPage}})),e(Dc,Cn.UPDATE_CUR_TAB_FOCUSED,(function(e){return{focused:e.focused}})),e(Dc,Cn.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e){return{focused:e.focused}})),Dc)),jc=Lc.updateIsMainPage,Gc=Lc.updateCurTabFocused,Fc=Lc.updateCurTabFocusedSucceeded;function Hc(e){var t;return Ct().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t=e.payload.focused)){r.next=5;break}return Bt.dispatch(A.CustomShareEvent.TAB_FOCUSED),r.next=5,(0,Er.put)(jc({isMainPage:!0}));case 5:return r.next=7,(0,Er.put)(Fc({focused:t}));case 7:case"end":return r.stop()}}),kc)}function Vc(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(Gc,Hc);case 2:case"end":return e.stop()}}),Mc)}const Bc=(e(Ac={},Cn.UPDATE_IS_MAIN_PAGE,(function(e,t){var r=t.payload.isMainPage;return xc(xc({},e),{},{isMainPage:r})})),e(Ac,Cn.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e,t){var r=t.payload.focused;return xc(xc({},e),{},{curTabFocused:r})})),Ac);var Yc,Wc;function Qc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Qc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Kc=Ct().mark(es),zc=Ct().mark(ts),Xc=(0,dr.createActions)((e(Yc={},Cn.UPDATE_CAPTCHA_VISIBLE,(function(e){return{visible:e.visible,resendMessagePayload:e.resendMessagePayload}})),e(Yc,Cn.UPDATE_CAPTCHA_SIGNATURE,(function(e){var t=e.signature;return{signature:void 0===t?"":t}})),e(Yc,Cn.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED,(function(e){var t=e.signature;return{signature:void 0===t?"":t}})),Yc)),Jc=Xc.updateCaptchaVisible,$c=Xc.updateCaptchaSignature,Zc=Xc.updateCaptchaSignatureSucceeded;function es(e){var t,r,n,o;return Ct().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t=e.payload.signature)){a.next=12;break}return a.next=4,(0,Er.select)(Wn);case 4:if(!(r=a.sent)){a.next=12;break}return a.next=8,(0,Er.select)(Wf(r.messageId));case 8:return n=a.sent,o={message:n,conversationId:r.conversationId},a.next=12,oa().put(ca().resendMessageRequested({payload:o}));case 12:return a.next=14,(0,Er.put)(Zc({signature:t}));case 14:case"end":return a.stop()}}),Kc)}function ts(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)($c,es);case 2:case"end":return e.stop()}}),zc)}const rs=(e(Wc={},Cn.UPDATE_CAPTCHA_VISIBLE,(function(e,t){var r=t.payload,n=r.visible,o=r.resendMessagePayload;return qc(qc({},e),{},{captchaVisible:n,resendMessagePayload:o})})),e(Wc,Cn.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED,(function(e,t){var r=t.payload.signature;return qc(qc({},e),{},{captchaSignature:r})})),Wc);var ns,os,as=Ct().mark(is),cs=Ct().mark(us),ss=(0,dr.createActions)(e({},Cn.REPORT_USER_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId}}))).reportUserRequested;function is(e){var t,r,n,o,a,c,s,i,u,l;return Ct().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,d.prev=1,d.next=4,(0,Er.call)(uv,{resource:"shop",id:n});case 4:o=d.sent,a=o.is_official_shop,c=void 0===a||a,s=o.country,i=void 0===s?"SG":s,u=(0,A.getMallUrl)(i),l="https://".concat(u,"/report/").concat(r),c&&(l="".concat(l,"?is_official_shop=true")),window.open(l),d.next=17;break;case 15:d.prev=15,d.t0=d.catch(1);case 17:case"end":return d.stop()}}),as,null,[[1,15]])}function us(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(ss,is);case 2:case"end":return e.stop()}}),cs)}function ls(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ds(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ls(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ls(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ps=(0,dr.createActions)((e(ns={},Cn.SET_TEXT_BOX_HEIGHT,(function(e){return e})),e(ns,Cn.SET_CHAT_LIST_WIDTH,(function(e){return e})),ns)),fs=ps.setTextBoxHeight,_s=ps.setChatListWidth;const Es=(e(os={},Cn.SET_TEXT_BOX_HEIGHT,(function(e,t){var r=t.payload;return ds(ds({},e),{},{textBoxHeight:r})})),e(os,Cn.SET_CHAT_LIST_WIDTH,(function(e,t){var r=t.payload;return ds(ds({},e),{},{chatlistWidth:r})})),os);var Ss=Ct().mark((function e(){var t=arguments;return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(!(t.length>0&&void 0!==t[0])||t[0])&&Bt.close(),e.next=4,(0,Er.put)(ec());case 4:return e.next=6,(0,Er.put)(OE());case 6:(0,A.removeItem)("mini-session"),(0,A.removeItem)("mini-sc_redirect");case 8:case"end":return e.stop()}}),e)})),Os=Ct().mark((function e(){var t;return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={server:(0,A.getSCApiServer)(),namespace:"",resource:"logout",suffixSlash:!0,params:{SPC_CDS:wt().get("SPC_CDS"),SPC_CDS_VER:2}},(0,A.isVisitingCNSC)()||(0,A.isVisitingKRSC)()?(t.version="cnsc",t.parent="selleraccount"):t.version="v1",e.next=5,(0,Er.call)(uv,t);case 5:return document.location.replace("https://".concat((0,A.getSellerCenterUrl)(),"/account/signin")),window.removeEventListener("online",(function(){It.store.dispatch(Oa({networkStatus:"online"}))})),window.removeEventListener("offline",(function(){It.store.dispatch(Oa({networkStatus:"offline"}))})),Xt(),e.next=11,(0,Er.call)(Ss);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.handler?(0,Er.call)(e.t0.handler):console.error("[Logout Failed] ",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])}));function hs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vs(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?hs(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ts,ms=[Io,Fo,Zo,La,ic,Nc,yc,ts,Vc,us],gs="983743070955270817";Ts=A.MINI_MIN_TEXT_BOX_HEIGHT,gs="983743070955270818";var bs,ys,Rs={newbie:[],networkStatus:"online",hasVideoPermission:!1,currentUserId:null,currentUser:{},shouldInitFSSDK:!1,hasReplyPermission:!1,hasDeletePermission:!1,deleteConfigVersion:0,deleteConfigDuration:0,captchaVisible:!1,captchaSignature:"",resendMessagePayload:void 0,curTabFocused:!0,isMainPage:!0,shopStatisticsMap:{},subaccountHasUnrepliedPermission:!1,textBoxHeight:Ts,showAutoHangupModal:!1,waitingTimeFilter:!1,isScChat:!0,openedMenus:"",loginSuccess:!0,socketSuccess:!0,showChatWindow:!1,showConversationDetail:!0,showEntry:!1,hasFetchedUnread:!1},Ds=(0,dr.handleActions)(vs(vs(vs(vs(vs(vs(vs(vs(vs({},{}),Rc),rs),Bc),Es),Ho),ea),ja),uc),Rs),As=function(e){return e.conversationReducer.conversationIds},Cs=function(e){return e.conversationReducer.readRequestIds},Is=function(e){return e.conversationReducer.missedReadNoticeCount},Ps=function(e){return e.conversationReducer.inlocation},ws=function(e){return e.conversationReducer.updateTimeNow},Ns=function(e){return e.conversationReducer.currentConversationId},Us=function(e){return e.conversationReducer.currentConversationCanRead},xs=function(e){return e.conversationReducer.status},ks=function(e){return e.conversationReducer.direction},Ms=(0,Sr.createSelector)(Tr,As,(function(e,r){return((0,t.denormalize)(r,[s],{conversations:e})||[]).filter(Boolean)})),Ls=(0,Sr.createSelector)(Ms,Ns,(function(e,t){return e.filter((function(e){var r=e.id,n=e.unread_count;return e&&(n>0||r===t)}))})),js=(0,Sr.createSelector)(Ms,(function(e){return e.filter((function(e){return e.pinned}))})),Gs=(0,Sr.createSelector)(Ms,(function(e){return e.filter((function(e){return e.status&&"closed"===e.status}))})),Fs=(0,Sr.createSelector)(Ms,Ns,(function(e,t){return e.filter((function(e){var r=e.unreplied,n=e.id;return void 0===r||r||!r&&n===t}))})),Hs=(0,Sr.createSelector)(Ms,(function(e){return e.filter((function(e){return e.lack})).map((function(e){return e.id}))||[]})),Vs=function(e){return e.conversationReducer.keyword},Bs=function(e){var t=window.localStorage.getItem("mini-filter");return(JSON.parse(t)||{}).filter||"All"},Ys=(0,Sr.createSelector)(Bs,Ms,Ls,js,Gs,Fs,(function(e,t,r,n,o,a){return{All:t,Unread:r,Pinned:n,Closed:o,Unreplied:a}[e]})),Ws=(0,Sr.createSelector)(Ys,Fn,Bs,(function(e,t,r){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)})),e.filter((function(e){return void 0===e.faking}))})),Qs=(0,Sr.createSelector)(Ms,Ns,Xn,Ps,vr,Tr,(function(e,r,n,o,c,i){var u=e.find((function(e){return e.id===r}))||{};if(o&&!u.id&&(u=(0,t.denormalize)(r,s,{conversations:i})||{}),!n&&u.lack){var l=u.to_id,d=(0,t.denormalize)(l,a,{users:c})||{},p={to_shop_id:d.shop_id,to_status:d.status,to_name:d.name||"-",to_avatar:d.avatar};return Object.assign(u,p)}return u})),qs=(0,Sr.createSelector)(Qs,(function(e){return(e||{}).to_id||null})),Ks=(0,Sr.createSelector)(Qs,Pr,(function(e,r){return(0,t.denormalize)(e.shop_id,p,{shops:r})||{}})),zs=(0,Sr.createSelector)(Ks,(function(e){return(null==e?void 0:e.country)||"SG"})),Xs=(0,Sr.createSelector)(Qs,(function(e){return e.shop_id})),Js=(0,Sr.createSelector)(Qs,(function(e){return e.to_id})),$s=(0,Sr.createSelector)(Qs,(function(e){return e.status})),Zs=(0,Sr.createSelector)(Qs,(function(e){return e.auto_translation})),ei=(0,Sr.createSelector)(Qs,(function(e){return e.max_general_option_hide_time})),ti=function(e){return(0,Sr.createSelector)(Tr,(function(r){return(0,t.denormalize)(e,s,{conversations:r})||{}}))},ri=function(e){return(0,Sr.createSelector)(ti(e),(function(e){return e.shop_id}))},ni=function(e){return(0,Sr.createSelector)(Ms,(function(t){return e.map((function(e){return t.find((function(t){return t.id===e}))})).filter(Boolean)}))},oi=(0,Sr.createSelector)(Qs,(function(e){return(e||{}).shop_id||null})),ai=(0,Sr.createSelector)(vr,Qs,(function(e,r){return r?(0,t.denormalize)(r.to_id,a,{users:e}):{}})),ci=(0,Sr.createSelector)(Qs,(function(e){return(e||{}).to_shop_id||null})),si=function(e){return e.conversationReducer.results},ii=function(e){return e.conversationReducer.searchStatus},ui=(0,Sr.createSelector)(Qs,(function(e){return e.translationAccess})),li=function(e){return e.conversationReducer.listsHash},di=function(e){return e.conversationReducer.conversationBeenDeleted},pi=(0,Sr.createSelector)(Qs,(function(e){return(e||{}).to_name})),fi=function(e){return e.conversationReducer.access},_i=function(e){return e.conversationReducer.isNavigateToUnreadMessage},Ei=function(e){return e.conversationReducer.navigateToUnreadMessageId},Si=function(e){return e.conversationReducer.pendingOffersCount},Oi=(0,Sr.createSelector)(Qs,Si,(function(e,t){var r=e.shop_id,n=e.to_id;return t["".concat(r,"_").concat(n)]||0})),hi=function(e){return(0,Sr.createSelector)(ti(e),Si,(function(e,t){var r=e.shop_id,n=e.to_id;return t["".concat(r,"_").concat(n)]||0}))},vi=function(e){return(0,Sr.createSelector)(ri(e),Pr,(function(e,r){var n=(0,t.denormalize)(e,p,{shops:r})||{};return(null==n?void 0:n.country)||"SG"}))},Ti=function(e){return e.conversationReducer.serviceDown},mi=function(e){return e.conversationReducer.serviceDownAlert},gi=function(e){return e.conversationReducer.serviceDownList},bi=function(e){return e.conversationReducer.manualClose};!function(e){e.DELETE_CONVERSATION_REQUESTED="DELETE_CONVERSATION_REQUESTED",e.DELETE_CONVERSATION_SUCCEEDED="DELETE_CONVERSATION_SUCCEEDED",e.GET_CONVERSATION_DETAIL_REQUESTED="GET_CONVERSATION_DETAIL_REQUESTED",e.FAKE_CONVERSATION_SUCCEEDED="FAKE_CONVERSATION_SUCCEEDED",e.FETCH_CONVERSATIONS_REQUESTED="FETCH_CONVERSATIONS_REQUESTED",e.FETCH_CONVERSATIONS_SUCCEEDED="FETCH_CONVERSATIONS_SUCCEEDED",e.UPDATE_FETCH_CONVERSATIONS_STATUS="UPDATE_FETCH_CONVERSATIONS_STATUS",e.UPDATE_FETCH_CONVERSATIONS_DIRECTION="UPDATE_FETCH_CONVERSATIONS_DIRECTION",e.UPDATE_CONVERSATION_TIMESTAMP="UPDATE_CONVERSATION_TIMESTAMP",e.UPDATE_CONVERSATION_FILTER="UPDATE_CONVERSATION_FILTER",e.FORWARD_CONVERSATION_REQUESTED="FORWARD_CONVERSATION_REQUESTED",e.MASS_FORWARD_CONVERSATION_REQUESTED="MASS_FORWARD_CONVERSATION_REQUESTED",e.MARK_MESSAGES_REQUESTED="MARK_MESSAGES_REQUESTED",e.MARK_MESSAGES_SUCCEEDED="MARK_MESSAGES_SUCCEEDED",e.UPDATE_READ_REQUEST_DATA="UPDATE_READ_REQUEST_DATA",e.PIN_CONVERSATION_REQUESTED="PIN_CONVERSATION_REQUESTED",e.SEARCH_CONVERSATIONS_REQUESTED="SEARCH_CONVERSATIONS_REQUESTED",e.SEARCH_CONVERSATIONS_SUCCEEDED="SEARCH_CONVERSATIONS_SUCCEEDED",e.RESET_SEARCH_PARAMS="RESET_SEARCH_PARAMS",e.UPDATE_EXISTED_RESULT_ID_MAP="UPDATE_EXISTED_RESULT_ID_MAP",e.UPDATE_CURRENT_CONVERSATION_MODE="UPDATE_CURRENT_CONVERSATION_MODE",e.SET_CURRENT_CONVERSATION_MODE="SET_CURRENT_CONVERSATION_MODE",e.SEARCH_BY_COMBINED_API="SEARCH_BY_COMBINED_API",e.TOGGLE_MULTIPLE_SELECTION_MODE="TOGGLE_MULTIPLE_SELECTION_MODE",e.SET_SELECTED_CONVERSATION_LIST="SET_SELECTED_CONVERSATION_LIST",e.UPDATE_SELECTED_CONVERSATION_ID="UPDATE_SELECTED_CONVERSATION_ID",e.SELECTED_CONVERSATIONS_REQUESTED="SELECTED_CONVERSATIONS_REQUESTED",e.CONVERSATION_BATCH_OPERATE_REQUESTED="CONVERSATION_BATCH_OPERATE_REQUESTED",e.SET_CURRENT_CONVERSATION_CAN_READ="SET_CURRENT_CONVERSATION_CAN_READ",e.UPDATE_PREVIOUS_CONVERSATION_ID="UPDATE_PREVIOUS_CONVERSATION_ID",e.CLOSE_CONVERSATION_REQUESTED="CLOSE_CONVERSATION_REQUESTED",e.FETCH_GROUPS_REQUESTED="FETCH_GROUPS_REQUESTED",e.FETCH_MASS_GROUPS_REQUESTED="FETCH_MASS_GROUPS_REQUESTED",e.SHOW_CONVERSATION_REQUESTED="SHOW_CONVERSATION_REQUESTED",e.RESET_CONVERSATION_REQUESTED="RESET_CONVERSATION_REQUESTED",e.SHOW_CONVERSATION_SUCCEEDED="SHOW_CONVERSATION_SUCCEEDED",e.SHOW_NORMAL_CONVERSATION_SUCCEEDED="SHOW_NORMAL_CONVERSATION_SUCCEEDED",e.CHANGE_CONVERSATION_STATUS_REQUESTED="CHANGE_CONVERSATION_STATUS_REQUESTED",e.FETCH_DEGRADE_CONVERSATIONS_DETAIL="FETCH_DEGRADE_CONVERSATIONS_DETAIL",e.CONVERSATION_OPERATE_REQUESTED="CONVERSATION_OPERATE_REQUESTED",e.SEARCH_MORE_RESULTS="SEARCH_MORE_RESULTS",e.SEARCH_MORE_SUCCEED="SEARCH_MORE_SUCCEED",e.SET_SEARCH_STATUS="SET_SEARCH_STATUS",e.UPDATE_ACCESS="UPDATE_ACCESS",e.SHOW_SEARCHED_CONVERSATION_REQUESTED="SHOW_SEARCHED_CONVERSATION_REQUESTED",e.UPDATE_SEARCH_PARAMS="UPDATE_SEARCH_PARAMS",e.LOCATION_MESSAGE="LOCATION_MESSAGE",e.UPDATE_LOCATION_MODE="UPDATE_LOCATION_MODE",e.UPDATE_SYNC_TIME_NOW="UPDATE_SYNC_TIME_NOW",e.SET_CURRENT_CONVERSATION_TYPE="SET_CURRENT_CONVERSATION_TYPE",e.SET_CONVERSATION_BEEN_DELETED="SET_CONVERSATION_BEEN_DELETED",e.MUTE_CONVERSATION_REQUESTED="MUTE_CONVERSATION_REQUESTED",e.SET_NAVIGATE_TO_UNREAD_MESSAGE="SET_NAVIGATE_TO_UNREAD_MESSAGE",e.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID="SET_NAVIGATE_TO_UNREAD_MESSAGE_ID",e.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID="RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID",e.GET_PENDING_OFFERS_COUNT_REQUESTED="GET_PENDING_OFFERS_COUNT_REQUESTED",e.GET_PENDING_OFFERS_COUNT_SUCCEED="GET_PENDING_OFFERS_COUNT_SUCCEED",e.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED="GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED",e.SET_ACTIVE_TAB="SET_ACTIVE_TAB",e.SET_ACTIVE_TAB_SUCCEED="SET_ACTIVE_TAB_SUCCEED",e.UPDATE_IS_CONTACTS_VISIBLE="UPDATE_IS_CONTACTS_VISIBLE",e.SET_CURRENT_CONVERSATION_ID="SET_CURRENT_CONVERSATION_ID",e.UPDATE_CONVERSATION_SORT_BY_FILTER="UPDATE_CONVERSATION_SORT_BY_FILTER",e.UPDATE_SERVICE_DOWN_STATUS="UPDATE_SERVICE_DOWN_STATUS"}(bs||(bs={}));var yi=(0,dr.createActions)((e(ys={},bs.DELETE_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(ys,bs.DELETE_CONVERSATION_SUCCEEDED,(function(e){return{conversationId:e.conversationId}})),e(ys,bs.GET_CONVERSATION_DETAIL_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(ys,bs.FAKE_CONVERSATION_SUCCEEDED,(function(e){return{conversationId:e.conversationId}})),e(ys,bs.FETCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.direction,r=void 0===t?"reset":t,n=e.noPending;return{direction:r,noPending:void 0!==n&&n,source:e.source}})),e(ys,bs.FETCH_CONVERSATIONS_SUCCEEDED,(function(e){var t=e.conversationIds,r=e.conversationIdsMap,n=e.oldestMessageRegion,o=e.latestMessageRegion,a=e.oldestReceivedMessageId,c=e.latestReceivedMessageId,s=e.oldestTimestampNano,i=e.latestTimestampNano,u=e.direction;return{conversationIds:t,conversationIdsMap:r,oldestMessageRegion:n,latestMessageRegion:o,oldestReceivedMessageId:a,latestReceivedMessageId:c,direction:void 0===u?"reset":u,status:e.status,hasMore:e.hasMore,latestTimestampNano:i,oldestTimestampNano:s,persist:e.persist,shouldFetchByTimestamp:e.shouldFetchByTimestamp,maxLatestTimestampNano:e.maxLatestTimestampNano,maxLatestReceivedMessageId:e.maxLatestReceivedMessageId,syncFetchException:e.syncFetchException,nextMessageTimeNano:e.nextMessageTimeNano,sortByWaitTime:e.sortByWaitTime}})),e(ys,bs.UPDATE_FETCH_CONVERSATIONS_STATUS,(function(e){return{status:e.status}})),e(ys,bs.UPDATE_FETCH_CONVERSATIONS_DIRECTION,(function(e){return{direction:e.direction}})),e(ys,bs.UPDATE_CONVERSATION_TIMESTAMP,(function(e){return{latestTimestampNano:e.latestTimestampNano,oldestTimestampNano:e.oldestTimestampNano}})),e(ys,bs.UPDATE_CONVERSATION_FILTER,(function(e){return{filter:e.filter}})),e(ys,bs.FORWARD_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId,type:e.type,forwardId:e.forwardId}})),e(ys,bs.MASS_FORWARD_CONVERSATION_REQUESTED,(function(e){return{type:e.type,forwardId:e.forwardId,conversationIds:e.conversationIds}})),e(ys,bs.MARK_MESSAGES_REQUESTED,(function(e){return{conversationId:e.conversationId,isRead:e.isRead,latestMessageId:e.latestMessageId}})),e(ys,bs.MARK_MESSAGES_SUCCEEDED,(function(e){return{conversationId:e.conversationId,markType:e.markType}})),e(ys,bs.UPDATE_READ_REQUEST_DATA,(function(e){return{requestId:e.requestId,requestIds:e.requestIds,count:e.count}})),e(ys,bs.PIN_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(ys,bs.SEARCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.keyword,r=void 0===t?"":t,n=e.filter;return{keyword:r,filter:void 0===n?"all":n}})),e(ys,bs.RESET_SEARCH_PARAMS,(function(e){var t=e.keyword;return{keyword:void 0===t?"":t,searchFilter:e.searchFilter}})),e(ys,bs.UPDATE_EXISTED_RESULT_ID_MAP,(function(e){return{addedMap:e.addedMap}})),e(ys,bs.UPDATE_CURRENT_CONVERSATION_MODE,(function(e){return{mode:e.mode,conversationId:e.conversationId}})),e(ys,bs.SET_CURRENT_CONVERSATION_MODE,(function(e){return{mode:e.mode}})),e(ys,bs.SEARCH_BY_COMBINED_API,(function(){return{}})),e(ys,bs.TOGGLE_MULTIPLE_SELECTION_MODE,(function(e){return{mode:e.mode}})),e(ys,bs.SET_SELECTED_CONVERSATION_LIST,(function(e){return{list:e.list}})),e(ys,bs.UPDATE_SELECTED_CONVERSATION_ID,(function(e){return{id:e.id,selected:e.selected}})),e(ys,bs.SELECTED_CONVERSATIONS_REQUESTED,(function(e){return{type:e.type,id:e.id}})),e(ys,bs.CONVERSATION_BATCH_OPERATE_REQUESTED,(function(e){return{type:e.type}})),e(ys,bs.SET_CURRENT_CONVERSATION_CAN_READ,(function(e){return{canRead:e.canRead}})),e(ys,bs.SHOW_CONVERSATION_REQUESTED,(function(e){return{conversation:e.conversation,previousId:e.previousId,messageId:e.messageId,sourceInfo:e.sourceInfo}})),e(ys,bs.RESET_CONVERSATION_REQUESTED,(function(){return{}})),e(ys,bs.SHOW_NORMAL_CONVERSATION_SUCCEEDED,(function(e){var t=e.conversationId,r=e.previousId;return{conversationId:t,previousId:void 0===r?null:r}})),e(ys,bs.CHANGE_CONVERSATION_STATUS_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(ys,bs.FETCH_DEGRADE_CONVERSATIONS_DETAIL,(function(e){return{conversationIds:e.conversationIds}})),e(ys,bs.CONVERSATION_OPERATE_REQUESTED,(function(e){return{type:e.type,extra:e.extra}})),e(ys,bs.SEARCH_MORE_RESULTS,(function(e){return{type:e.type,reset:e.reset}})),e(ys,bs.SEARCH_MORE_SUCCEED,(function(e){return{type:e.type,total:e.total,results:e.results,isFromCache:e.isFromCache,hasMore:e.hasMore,nextOffset:e.nextOffset}})),e(ys,bs.SET_SEARCH_STATUS,(function(e){return{type:e.type,status:e.status}})),e(ys,bs.UPDATE_ACCESS,(function(e){return{access:e.access}})),e(ys,bs.SHOW_SEARCHED_CONVERSATION_REQUESTED,(function(e){return{conversation:e.conversation}})),e(ys,bs.LOCATION_MESSAGE,(function(e){return{msgId:e.msgId,shopId:e.shopId}})),e(ys,bs.UPDATE_LOCATION_MODE,(function(e){return{inlocation:e.inlocation}})),e(ys,bs.UPDATE_SYNC_TIME_NOW,(function(e){return{timeNow:e.timeNow}})),e(ys,bs.SHOW_CONVERSATION_SUCCEEDED,(function(e){var t=e.conversationId,r=e.previousId,n=void 0===r?null:r,o=e.type;return{conversationId:t,previousId:n,type:void 0===o?A.ConversationTypeEnum.Normal:o}})),e(ys,bs.SET_CURRENT_CONVERSATION_TYPE,(function(e){var t=e.type;return{type:void 0===t?A.ConversationTypeEnum.Normal:t}})),e(ys,bs.SET_NAVIGATE_TO_UNREAD_MESSAGE,(function(e){return{isNavigateToUnreadMessage:e.isNavigateToUnreadMessage}})),e(ys,bs.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e){return{navigateToUnreadMessageId:e.navigateToUnreadMessageId}})),e(ys,bs.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(){})),e(ys,bs.SET_CONVERSATION_BEEN_DELETED,(function(e){return{conversationBeenDeleted:e.conversationBeenDeleted}})),e(ys,bs.MUTE_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(ys,bs.GET_PENDING_OFFERS_COUNT_REQUESTED,(function(e){return{shopId:e.shopId,buyerId:e.buyerId}})),e(ys,bs.GET_PENDING_OFFERS_COUNT_SUCCEED,(function(e){return{shopId:e.shopId,buyerId:e.buyerId,count:e.count}})),e(ys,bs.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED,(function(e){return{records:e.records}})),e(ys,bs.SET_CURRENT_CONVERSATION_ID,(function(e){return{conversationId:e.conversationId,previousId:e.previousId}})),e(ys,bs.UPDATE_SERVICE_DOWN_STATUS,(function(e){return{flag:e.flag,alert:e.alert,list:e.list,close:e.close}})),ys)),Ri=yi.deleteConversationRequested,Di=yi.deleteConversationSucceeded,Ai=yi.getConversationDetailRequested,Ci=yi.fakeConversationSucceeded,Ii=yi.fetchConversationsRequested,Pi=yi.fetchConversationsSucceeded,wi=yi.updateFetchConversationsStatus,Ni=yi.updateFetchConversationsDirection,Ui=yi.updateConversationTimestamp,xi=yi.updateConversationFilter,ki=(yi.forwardConversationRequested,yi.massForwardConversationRequested,yi.markMessagesRequested),Mi=yi.markMessagesSucceeded,Li=yi.updateReadRequestData,ji=yi.pinConversationRequested,Gi=(yi.searchConversationsRequested,yi.resetSearchParams),Fi=(yi.updateExistedResultIdMap,yi.updateCurrentConversationMode,yi.setCurrentConversationMode,yi.searchByCombinedApi,yi.toggleMultipleSelectionMode,yi.setSelectedConversationList,yi.updateSelectedConversationId,yi.selectedConversationsRequested,yi.conversationBatchOperateRequested,yi.setCurrentConversationCanRead),Hi=yi.showConversationRequested,Vi=yi.resetConversationRequested,Bi=yi.showConversationSucceeded,Yi=yi.changeConversationStatusRequested,Wi=yi.fetchDegradeConversationsDetail,Qi=yi.conversationOperateRequested,qi=yi.searchMoreResults,Ki=(yi.searchMoreSucceed,yi.setSearchStatus,yi.updateAccess),zi=yi.showSearchedConversationRequested,Xi=yi.locationMessage,Ji=yi.updateLocationMode,$i=yi.updateSyncTimeNow,Zi=yi.showNormalConversationSucceeded,eu=yi.setNavigateToUnreadMessage,tu=yi.setNavigateToUnreadMessageId,ru=yi.resetNavigateToUnreadMessageId,nu=yi.setConversationBeenDeleted,ou=yi.muteConversationRequested,au=yi.getPendingOffersCountRequested,cu=yi.getPendingOffersCountSucceed,su=yi.getBatchPendingOffersCountSucceed,iu=yi.setCurrentConversationId,uu=yi.updateServiceDownStatus,lu=Ct().mark(pu),du=Ct().mark(fu);function pu(e){var t,r,n,o,a;return Ct().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload.conversationId,c.prev=1,c.next=4,(0,Er.select)(ti(t));case 4:return r=c.sent,n=r.shop_id,o=r.pinned,a={method:"PUT",parent:"conversations",parentId:t,resource:o?"unpin":"pin"},n&&(a.payload=JSON.stringify({shop_id:n})),c.next=11,(0,Er.call)(uv,a);case 11:c.next=17;break;case 13:return c.prev=13,c.t0=c.catch(1),c.next=17,(0,Er.put)(rf({error:c.t0}));case 17:case"end":return c.stop()}}),lu,null,[[1,13]])}function fu(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(ji,pu);case 2:case"end":return e.stop()}}),du)}function _u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Eu(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?_u(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Su,Ou=function(t,r){var n=r.payload.conversationId,o=Eu(Eu({},t.conversationIdsMap),{},e({},n,!1)),a=new Set(t.conversationIds);a.delete(n);var c=Array.from(a),s=t.currentConversationId;return Eu(Eu({},t),{},{currentConversationId:s===n?null:s,conversationIds:c,conversationIdsMap:o})};Su="mini-filter";var hu=function(e){return function(e,t){var r=t.payload.filter,n=JSON.parse(A.LS.getItem(Su))||{};return A.LS.setItem(Su,JSON.stringify({filter:r,userid:n.userid})),Eu(Eu({},e),{},{filter:r})}},vu=function(e,t){var r=t.payload.status;return Eu(Eu({},e),{},{status:r})},Tu=function(e,t){var r=t.payload.direction;return Eu(Eu({},e),{},{direction:r})},mu=function(e,t){var r=t.payload.conversationId;return Eu(Eu({},e),{},{previousConversationId:r})},gu=function(e,t){var r=t.payload.canRead;return Eu(Eu({},e),{},{currentConversationCanRead:r})};function bu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yu(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?bu(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ru,Du=function(e,t){var r=t.payload.conversationId,n=yu({},e.draftHash);return delete n[r],yu(yu({},e),{},{draftHash:n})},Au=function(e){return yu(yu({},e),{},{draftHash:{}})},Cu=function(e,t){var r=t.payload.conversationIds,n=void 0===r?[]:r,o=yu({},e.draftHash);return n.forEach((function(e){delete o[e]})),yu(yu({},e),{},{draftHash:o})},Iu=function(e,t){var r=t.payload,n=r.conversationId,o=r.draft,a=yu({},e.draftHash);return a[n]=o,yu(yu({},e),{},{draftHash:a})},Pu=Ct().mark(Nu),wu=(e(Ru={},A.ConversationTypeEnum.Agent,"receiveAgentMessageRequested"),e(Ru,A.ConversationTypeEnum.Normal,"receiveMessageRequested"),Ru);function Nu(e){var t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=e.type,n=wu[r],o.next=4,(0,Er.spawn)(Hu,t.request_id);case 4:return o.next=6,oa().put(ca()[n]({payload:{message:t}}));case 6:case"end":return o.stop()}}),Pu)}function Uu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xu(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Uu(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ku=function(t,r){var n=r.payload,o=n.medias,a=n.conversationId,c=t.mediaMap,s=(c[a]||[]).concat(Array.isArray(o)?o:[o]);return xu(xu({},t),{},{mediaMap:xu(xu({},c),{},e({},a,s))})},Mu=function(t,r){var n=r.payload,o=n.id,a=n.conversationId,c=t.mediaMap,s=Qt(c[a])||[];return s.splice(o,1),xu(xu({},t),{},{mediaMap:xu(xu({},c),{},e({},a,s))})},Lu=function(t,r){var n=r.payload.conversationId,o=t.mediaMap;return xu(xu({},t),{},{mediaMap:xu(xu({},o),{},e({},n,[]))})},ju=function(e){e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)}))},Gu=function(e,t){var r=e.last_message_time_nano,n=e.next_timestamp_nano;return t&&!n&&(n=t.next_message_time_nano),{nextTimestampNano:n,oldestTimestampNano:n,latestTimestampNano:r}},Fu=Ct().mark(Hu);function Hu(e){var t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,A.getItem)(e);case 2:(t=o.sent)&&(r=new Date,n=+r-+t,Hv(jv.MESSAGE_SOCKET,n),(0,A.removeItem)(e));case 4:case"end":return o.stop()}}),Fu)}var Vu=y(439).t,Bu=A.MessageTypes.MSG_TYPE_TEXT,Yu=function(e,r,n){var o=e.all||[],a=e.sending||[],s=e.failed||[],i=o.length,u=null;if(i){for(var l=0,d=null;l<i&&!d;){var p=e.all[l];(d=(0,t.denormalize)(p,c,{messages:n}))&&(d.type===A.MessageTypes.MSG_TYPE_SECURITY_TIPS||d.isFaking)&&(d=null),l++}d&&d.created_timestamp>Math.floor(r.last_message_time_nano/Math.pow(10,9))&&(u=(0,A.fillMessagePreview)(d))}if(!u){var f=r.latest_message_id,_=r.latest_message_content,E=r.latest_message_type,S=r.last_message_option,O=r.latest_message_source,h=r.last_message_time_nano;(u={id:f,content:_,type:E,message_option:S,source:O,to_shop_id:r.latest_message_to_shop_id}).created_at=new Date(h/1e6)+""}var v=u,T=v.id,m=v.message_option,g=a.includes(T)?A.MessageSendStatus.SENDING:s.includes(T)?A.MessageSendStatus.FAILED:u.send_status?A.MessageSendStatus.SUCCEED:null;return(0,A.hasTargetMessageOption)(m,A.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(g=A.MessageSendStatus.FAILED,u.type=Bu,u.content={text:Vu("common.blacklist.replaced_text")}),(0,A.hasTargetMessageOption)(m,A.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)&&(g=A.MessageSendStatus.FAILED),u.send_status=g,u},Wu={MARK_AS_READ:"mark_as_read",MARK_AS_UNREAD:"mark_as_unread",DELETE_CONVERSATION:"delete_conversation",UPDATE_OFFER_STATUS:"update_offer_status",UPDATE_CONVERSATION:"update_conversation",UPDATE_USER_STATUS:"update_user_status",UPDATE_CONVERSATION_FLAG:"update_conversation_flag",FORCE_LOGOUT:"force_logout",UPDATE_RATING_CARD_STATUS:"update_rating_card_status",PULL_NOTIFICATION:"pull_notification",PIN_CONVERSATION:"pin_conversation",UNPIN_CONVERSATION:"unpin_conversation",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_PIN:"mass_pin",MASS_UNPIN:"mass_unpin",MASS_CLOSE:"mass_close",MASS_ACTIVATE:"mass_activate",VIDEO_UPLOAD:"video_upload",MARK_AS_REPLIED:"mark_as_replied",MARK_AS_UNREPLIED:"mark_as_unreplied",CHAT_DELETE_MSG:"chat_delete_msg",FAQ_SESSION_UPDATE:"faq_session_update",MUTE_CONVERSATION:"mute_conversation",UNMUTE_CONVERSATION:"unmute_conversation"},Qu=Ct().mark(Ku),qu=Ct().mark(zu);function Ku(e){var t,r;return Ct().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.conversationId,n.prev=1,n.next=4,(0,Er.select)(ri(t));case 4:return r=n.sent,n.next=7,(0,Er.call)(uv,{method:"DELETE",resource:"conversations",id:t,params:{shop_id:r}});case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(1),n.next=13,(0,Er.put)(rf({error:n.t0}));case 13:case"end":return n.stop()}}),Qu,null,[[1,9]])}function zu(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(Ri,Ku);case 2:case"end":return e.stop()}}),qu)}const Xu=e({},bs.DELETE_CONVERSATION_SUCCEEDED,Ou);var Ju,$u=Ct().mark(cl),Zu=Ct().mark(sl),el=Ct().mark(il),tl=Ct().mark(ul),rl=Ct().mark(ll),nl=Ct().mark(dl);function ol(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function al(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ol(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ol(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cl(e){var t,r,n,o,a,c,s,i,u,l,d,p,f;return Ct().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:if(t=e.conversation,r=e.isSubAccount,n=t.id,o=t.to_id,a={},r){_.next=8;break}return _.next=6,(0,Er.call)(A.getItem,"mini-sc_redirect");case 6:(c=_.sent)&&(s=c.orderId,i=c.productId,u=c.conversationId,l=c.shopId,parseInt(n)===parseInt(u)&&(s?a={order_id:parseInt(s)}:i?a={product_id:parseInt(i)}:l&&(a={shop_id:parseInt(l)})));case 8:return _.next=10,(0,Er.call)(uv,{method:"POST",parent:"conversation",resource:"enter",payload:JSON.stringify(al({conversation_id:n,to_id:o},a))});case 10:if(d=_.sent,p=d.faq_session_id,f=d.session_expiry_timestamp,r){_.next=16;break}return _.next=16,oa().put(ca().fetchFaqSessionSucceed({payload:{conversationId:n,faqSessionId:p,sessionExpiryTime:f}}));case 16:case"end":return _.stop()}}),$u)}function sl(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g,b,y;return Ct().wrap((function(R){for(;;)switch(R.prev=R.next){case 0:return t=e.conversation,e.previousId,r=e.messageId,n=e.messageList,e.sourceInfo,a=(o=t).id,c=o.lack,R.next=4,(0,Er.select)(Xn);case 4:if((s=R.sent)||!c){R.next=11;break}return R.next=8,(0,Er.call)(Ll,{payload:{conversationIds:[a]}});case 8:return R.next=10,(0,Er.select)(ti(a));case 10:t=R.sent;case 11:return u=(i=t).faking,l=i.status,d=i.to_id,p=i.shop_id,f=i.latest_message_id,_=i.to_shop_id,E=i.unread_count,S=i.last_read_message_id,CT({shopId:p,operation:A.TrackerOperation.IMPRESSION,trackerName:"impressionChatRoom",data:{convo_userid:d,conversation_id:a}}),R.next=15,(0,Er.spawn)(cl,{conversation:t,isSubAccount:s});case 15:return R.next=17,(0,Er.select)(oO);case 17:if((O=R.sent)&&O[p]||!s){R.next=22;break}return R.next=22,(0,Er.call)(mO,SO({shopId:p}));case 22:return R.next=24,(0,Er.put)(Pc({userId:d,shopId:p,buyerShopId:_}));case 24:return R.next=26,(0,Er.put)(ru());case 26:return h="number"==typeof E&&E>0&&!r,R.next=29,(0,Er.put)(eu({isNavigateToUnreadMessage:h}));case 29:return R.next=31,oa().put(ca().fetchMessagesRequested({payload:{conversationId:a,messageId:r||(h?S:void 0),direction:r||h?"around":"older",messageList:n,reset:!0}}));case 31:return R.next=33,(0,Er.put)(au({shopId:p,buyerId:d}));case 33:return R.next=35,oa().call(ca().handleCurrentConversationChange({payload:a}));case 35:if(v=R.sent,!(!u&&"closed"!==l&&E>0||v)){R.next=41;break}return T=v||f,R.next=41,(0,Er.put)(ki({conversationId:a,isRead:!0,latestMessageId:T}));case 41:if(m={},!s){R.next=50;break}return R.next=45,(0,Er.call)(Fp,{payload:{shopId:p}});case 45:return g=R.sent,b=g.auth_names,y=void 0===b?[]:b,R.next=50,(0,Er.put)(Ki({access:y}));case 50:return R.next=52,(0,Er.select)(lp(p));case 52:if(m=R.sent){R.next=59;break}return R.next=56,(0,Er.call)(yp,{payload:{shopId:p}});case 56:return m=R.sent,R.next=59,(0,Er.put)(Hr({name:"shops",id:p,record:al({},m)}));case 59:return R.next=63,oa().put(ca().messageSyncUpdate({payload:{conversation:t}}));case 63:return R.next=65,(0,Er.put)(nu({conversationBeenDeleted:!1}));case 65:case"end":return R.stop()}}),Zu)}function il(e){var t,r,n,o,a,c,s;return Ct().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.conversation,n=t.previousId,o=t.messageId,a=t.messageList,c=t.sourceInfo,s=void 0===c?{}:c,i.prev=1,i.next=4,(0,Er.put)(uu({flag:!1}));case 4:return i.next=6,(0,Er.spawn)(sl,{conversation:r,previousId:n,messageId:o,messageList:a,sourceInfo:s});case 6:i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.log("*** Show Conversation Failed: ",i.t0);case 11:case"end":return i.stop()}}),el,null,[[1,8]])}function ul(e){var t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.conversationId,n=t.previousId,o.next=3,(0,Er.put)(Bi({conversationId:r,previousId:n}));case 3:case"end":return o.stop()}}),tl)}function ll(e){var t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return(t=e.payload).type,r=t.conversationId,n=t.previousId,o.next=4,(0,Er.put)(Zi({conversationId:r,previousId:n}));case 4:case"end":return o.stop()}}),rl)}function dl(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeLatest)(Hi,il);case 2:return e.next=4,(0,Er.takeEvery)(iu,ul);case 4:return e.next=6,(0,Er.takeEvery)(Bi,ll);case 6:case"end":return e.stop()}}),nl)}const pl=(e(Ju={},bs.SHOW_NORMAL_CONVERSATION_SUCCEEDED,(function(e,t){var r=t.payload,n=r.conversationId;return r.previousId,al(al({},e),{},{currentConversationId:n})})),e(Ju,bs.RESET_CONVERSATION_REQUESTED,(function(e){return al(al({},e),{},{currentConversationId:null})})),e(Ju,bs.SET_NAVIGATE_TO_UNREAD_MESSAGE,(function(e,t){var r=t.payload.isNavigateToUnreadMessage;return al(al({},e),{},{isNavigateToUnreadMessage:r})})),e(Ju,bs.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e,t){var r=t.payload.navigateToUnreadMessageId;return al(al({},e),{},{navigateToUnreadMessageId:r})})),e(Ju,bs.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e){return al(al({},e),{},{navigateToUnreadMessageId:""})})),Ju),fl=e({},bs.UPDATE_CONVERSATION_FILTER,hu(A.ConversationTypeEnum.Normal));function _l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function El(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?_l(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Sl,Ol=Ct().mark(vl),hl=Ct().mark(Tl);function vl(e,t,r,n,o){var a,c,s,i,u,l,d,p,f,_,E,S,O,h,v;return Ct().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return a=T("conversations",e),m.next=3,(0,Er.select)(Qs);case 3:return c=m.sent,m.next=6,(0,Er.select)((function(e){return e.entityReducer}));case 6:return s=m.sent,i=s.conversations,u=void 0===i?{}:i,l=s.shops,d=void 0===l?{}:l,m.next=13,(0,Er.select)(Fn);case 13:return m.sent,m.next=16,(0,Er.select)(Bs);case 16:return m.sent,p=[],c&&c.faking?(f=c.id,p=Zv({previousConversationIds:t,fetchedConversationIds:a.result,direction:n,fakeConversationId:f,sortByWaitTime:!1})):p=Zv({previousConversationIds:t,fetchedConversationIds:a.result,direction:n,sortByWaitTime:!1}),_=p.length<A.persistLimit?null:Qt(p).splice(0,A.persistLimit),m.next=23,(0,Er.put)(Fr({entities:{persist:_}}));case 23:return m.next=25,(0,Er.call)(qO,u,e,"conversations");case 25:return m.next=27,(0,Er.spawn)(Tl,e);case 27:if(!(E=o&&o.length)){m.next=33;break}return m.next=31,(0,Er.call)(qO,d,o,"shops");case 31:return m.next=33,(0,Er.put)(Op({shopIds:o.map((function(e){return e.id}))}));case 33:return m.next=35,(0,Er.put)(_r());case 35:if(!(S=rT(_,r,t))||!S.changed){m.next=47;break}if(h=S.lastConversationId,"older"!==n&&"reset"!==n){m.next=42;break}O=a.entities.conversations&&a.entities.conversations[h],m.next=46;break;case 42:return m.next=44,(0,Er.select)(Ms);case 44:v=m.sent,O=v.find((function(e){return e.id===h}));case 46:O&&(E?S.oldestReceivedMessageId=O.latest_message_id:S.oldestTimestampNano=O.last_msg_time_nano);case 47:return m.abrupt("return",{persistObj:S,resultConversationIds:p});case 48:case"end":return m.stop()}}),Ol)}function Tl(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_;return Ct().wrap((function(E){for(;;)switch(E.prev=E.next){case 0:if(t=[],e.forEach((function(e){(0,A.hasTargetMessageOption)(e.last_message_option,A.MessageOption.MSG_OPT_RECALL)&&t.push({conversation_id:e.id,shop_id:e.shop_id})})),!t.length){E.next=27;break}return E.next=5,(0,Er.call)(uv,{method:"POST",parent:"conversation",resource:"last_msg_in_conversation_batch",payload:JSON.stringify({pairs:t})});case 5:if(r=E.sent,!(n=Object.keys(r)).length){E.next=27;break}o={};case 9:if(!n.length){E.next=24;break}if(!(a=n.shift())){E.next=22;break}return E.next=14,(0,Er.select)(ti(a));case 14:if(c=E.sent,(0,A.hasTargetMessageOption)(c.last_message_option,A.MessageOption.MSG_OPT_RECALL)){E.next=17;break}return E.abrupt("continue",9);case 17:s=r[a],i=s.id,u=s.type,l=s.content,d=s.to_shop_id,p=s.created_at,f=(0,A.getChatBotParams)(s,{updateMaxGeneralOptionHideTime:c.shop_id!==d}),_=(0,A.getCrmPreviewParams)(s),o[a]=El(El({latest_message_id:i,latest_message_type:u,latest_message_content:l,last_message_time:p},f),_);case 22:E.next=9;break;case 24:if((0,A.checkEmptyObject)(o)){E.next=27;break}return E.next=27,(0,Er.put)(Br({name:"conversations",records:o}));case 27:case"end":return E.stop()}}),hl)}var ml=Ct().mark(xl),gl=Ct().mark(kl),bl=Ct().mark(Ml),yl=Ct().mark(Ll),Rl=Ct().mark(jl),Dl=Ct().mark(Gl);function Al(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Al(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Al(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Il=["pinned","unreplied"],Pl=function(e,t,r,n,o,a,c){var s={},i="older"===e?r:"latest"===e?n:"",u=Il.includes(o);return s.resource=u?"conversation/list":"conversations",s.params={next_timestamp_nano:i,direction:"latest"===e&&i?"latest":"older"},"unread"===o&&(s.params.unread_only=!0),u&&(s.params.type=o),new Promise((function(e,t){uv(s).then((function(t){var r=t.conversations,n=void 0===r?[]:r,o=t.page_result;e([n,void 0===o?{}:o])})).catch((function(e){t(e)}))}))},wl=function(e){e.source;var t=e.filter,r=e.shopId,n=e.direction,o=e.oldestMessageRegion,a=e.latestMessageRegion,c=e.oldestReceivedMessageId,s=e.latestReceivedMessageId,i="",u="";"older"===n?(i=o,u=c):"latest"===n&&(i=a,u=s);var l={direction:"latest"===n?"latest":"older"};return r&&(l.shop_id=r),i&&(l.last_message_region=i),u&&(l.last_received_message_id=u),t&&["unread","pinned","unreplied"].includes(t)&&(l.type=t),new Promise((function(e,t){uv({parent:"subaccount",resource:"conversations",params:l}).then((function(t){var r=t.conversations;e(void 0===r?[]:r)})).catch((function(e){t(e)}))}))},Nl=function(e){return new Promise((function(t,r){uv({subServer:"coreapi",parent:"conversation_list_by_ids",params:{conversation_ids:JSON.stringify(e)}}).then((function(e){var r=e.conversations;t(void 0===r?[]:r)})).catch((function(e){r(e)}))}))},Ul=function(e){return e=e.filter((function(e){return e})),new Promise((function(t){uv({parent:"setting",resource:"auto_translations",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e.auto_translations;t(void 0===r?[]:r)})).catch((function(){t([])}))}))};function xl(t){var r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g,b,y,R,D,A,C,I,P,w,N,U,x,k,M,L,j,G,F,H,V,B,Y,W,Q,q,K;return Ct().wrap((function(z){for(;;)switch(z.prev=z.next){case 0:return r=t.list,n=t.needFetchOfferCount,o=void 0!==n&&n,a=t.conversationId,c=t.handleSave,z.next=3,(0,Er.select)(Xn);case 3:s=z.sent,i=[],u=[],l=[],d=[],p={},f=0;case 10:if(!(f<r.length)){z.next=26;break}if(_=r[f],E=_.id,S=_.conversation_id,O=_.type,h=_.content,v=_.latest_message_type,T=_.latest_message_content,m=_.to_id,g=_.shop_id,b=v||O,y=T||h,R=S||E,o&&d.push({buyer_id:m,shop_id:g}),!["order","offer","voucher"].includes(b)){z.next=23;break}return z.next=19,(0,Er.select)(ri(R));case 19:D=z.sent,A=!1,"order"===b&&s&&D!==y.shop_id&&(A=!0),A||(C="".concat(b,"_id"),I=y[C],P="order"===b?u:"offer"===b?i:l,0!==(w=y.shop_id)&&0!==parseInt(I)&&(P.push(e({shop_id:w},C,parseInt(I))),p[E]={type:b,itemId:I,conversationId:R}));case 23:f++,z.next=10;break;case 26:if(Object.keys(p).length||d.length){z.next=28;break}return z.abrupt("return");case 28:return N={},z.next=31,(0,Er.select)(eo);case 31:if(U=z.sent){z.next=37;break}if(!a){z.next=37;break}return z.next=36,(0,Er.select)(ri(a));case 36:U=z.sent;case 37:return U&&(N={params:{shop_id:U}}),z.prev=38,z.next=41,(0,Er.call)(uv,Cl(Cl({method:"POST",parent:"chat_preview",resource:"detail"},N),{},{payload:JSON.stringify({offer_preview_req:i,order_preview_req:u,voucher_preview_req:l,offer_count_req:d})}));case 41:x=z.sent,z.next=47;break;case 44:z.prev=44,z.t0=z.catch(38),x={};case 47:if(M=(k=x).vouchers,L=void 0===M?[]:M,j=k.offers,G=void 0===j?[]:j,F=k.orders,H=void 0===F?[]:F,V=k.buyer_offer_counts,B=void 0===V?[]:V,L.length||G.length||H.length||B.length){z.next=50;break}return z.abrupt("return");case 50:Y={},W=Object.keys(p),Q=Ct().mark((function e(){var t,r,n,o,a,c,s,i,u;return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=K[q],r=void 0,n=p[t],o=n.type,a=n.itemId,c=n.conversationId,e.next=5,(0,Er.select)(vi(c));case 5:s=e.sent,e.t0=o,e.next="voucher"===e.t0?9:"offer"===e.t0?12:"order"===e.t0?15:17;break;case 9:return i=L.find((function(e){return e.id===a})),r=i?Cl(Cl({},i),Re(i)):i,e.abrupt("break",17);case 12:return u=G.find((function(e){return e.id===a})),r=u?Cl(Cl({},u),{},{offer_price:oe(u.offer_price,s)}):u,e.abrupt("break",17);case 15:return r=H.find((function(e){return e.id===a})),e.abrupt("break",17);case 17:r&&(Y[t]=r);case 18:case"end":return e.stop()}}),e)})),q=0,K=W;case 54:if(!(q<K.length)){z.next=59;break}return z.delegateYield(Q(),"t1",56);case 56:q++,z.next=54;break;case 59:c&&c({records:Y,buyerOfferCounts:B});case 60:case"end":return z.stop()}}),ml,null,[[38,44]])}function kl(e){var t,r;return Ct().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={},r={},n.next=4,(0,Er.call)(xl,{list:e,needFetchOfferCount:!0,handleSave:function(e){var n=e.records,o=e.buyerOfferCounts;Object.keys(n).forEach((function(e){t[e]={latest_message_content:n[e]}})),o.forEach((function(e){var t=e.shop_id,n=e.buyer_id,o=e.pending_count,a="".concat(t,"_").concat(n);r[a]=o}))}});case 4:return n.next=6,(0,Er.put)(Br({name:"conversations",records:t}));case 6:return n.next=8,(0,Er.put)(su({records:r}));case 8:case"end":return n.stop()}}),gl)}function Ml(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g,b,y,R,C,I,P,w,N,U,x,k,M,L,j,G,F,H,V,B,Y,W,Q,q,K,z,X,J,$,Z,ee,te,re,ne,oe,ae,ce,se,ie,ue,le,de,pe,fe,_e,Ee,Se,Oe;return Ct().wrap((function(he){for(;;)switch(he.prev=he.next){case 0:return t=e.payload,r=t.direction,n=t.noPending,o=t.source,a="latest"===r,c=null,s=!1,i=!1,he.next=7,(0,Er.select)(Bs);case 7:return u=he.sent.toLowerCase(),he.next=10,(0,Er.select)(Fn);case 10:return he.sent,he.next=13,(0,Er.select)(lo);case 13:return l=he.sent,he.next=16,(0,Er.select)(Xn);case 16:if(d=he.sent,p=!d,f=o===A.ConversationSource.SYNC,"reset"!==r){he.next=24;break}return he.next=22,oa().put(ca().resetConversationQueue({isLazy:!0}));case 22:return he.next=24,(0,Er.put)(Pi({conversationIds:[],oldestMessageRegion:"",latestMessageRegion:"",oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",oldestTimestampNano:"",latestTimestampNano:"",maxLatestTimestampNano:"",direction:"reset",hasMore:!0,status:A.DataFetchStatus.SUCCEED,persist:null,shouldFetchByTimestamp:p}));case 24:return he.next=26,(0,Er.select)((function(e){return e.conversationReducer}));case 26:if(_=he.sent,E=_.oldestTimestampNano,S=_.latestTimestampNano,O=_.maxLatestTimestampNano,h=_.oldestReceivedMessageId,v=_.latestReceivedMessageId,T=_.maxLatestReceivedMessageId,m=_.hasMore,g=_.persist,b=_.conversationIds,y=_.status,R=_.syncFetchException,C=_.currentConversationId,I=_.oldestMessageRegion,P=_.latestMessageRegion,w=_.nextMessageTimeNano,N="reset"===r||(p?!E:!h)&&"older"===r,he.prev=43,"older"===r&&(p?"0"===E:!m)){he.next=163;break}if(n){he.next=48;break}return he.next=48,(0,Er.put)(wi({status:N?A.DataFetchStatus.INIT_PENDING:A.DataFetchStatus.PENDING}));case 48:if(U=[],x={},!p){he.next=59;break}return he.next=53,(0,Er.call)(Pl,r,w,E,S,u,s,o);case 53:k=he.sent,M=D(k,2),U=M[0],x=M[1],he.next=62;break;case 59:return he.next=61,(0,Er.call)(wl,{source:o,shopId:c,direction:r,oldestMessageRegion:I,latestMessageRegion:P,oldestReceivedMessageId:h,latestReceivedMessageId:v,filter:u});case 61:U=he.sent;case 62:if(!(L=U.length)){he.next=159;break}if("reset"===r&&(!p||Il.includes(u))){he.next=74;break}if(j=U[L-1],G="older"===r,p?(F=G?E:S,H=G?j.next_timestamp_nano:j.last_message_time_nano):(F=G?h:v,H=j.latest_message_id),!F||!H){he.next=74;break}if(G?H<F:H>F){he.next=74;break}return he.next=73,(0,Er.put)(Pi({direction:r,status:A.DataFetchStatus.SUCCEED,hasMore:a,persist:g,oldestReceivedMessageId:h,latestReceivedMessageId:v,maxLatestReceivedMessageId:v,conversationIds:b,oldestTimestampNano:E,latestTimestampNano:S,maxLatestTimestampNano:S,shouldFetchByTimestamp:p}));case 73:return he.abrupt("return");case 74:if(l||d){he.next=84;break}return he.next=77,(0,Er.select)(F_);case 77:if("enabled"===he.sent){he.next=84;break}return V=Array.from(new Set(U.map((function(e){return e.to_shop_id})))),he.next=82,(0,Er.call)(Ul,V);case 82:B=he.sent,U=U.map((function(e){var t=B.find((function(t){return t.shop_id===e.to_shop_id}));return Cl(Cl({},e),{},{translationAccess:!!t&&t.is_auto_translation})}));case 84:if(Y={},U.forEach((function(e){Y[e.id]=!0})),i?(Q=Qt(U),ju(Q),W=Q[0]):(ju(U),W=U[0]),q=Gu(W,x.next_cursor),K=W.latest_message_id,z={status:A.DataFetchStatus.SUCCEED,direction:r,conversationIdsMap:Y,shouldFetchByTimestamp:p,latestMessageRegion:W.last_message_region,maxLatestReceivedMessageId:!T||T<K?K:T},!p){he.next=105;break}return $=q.oldestTimestampNano,Z=q.latestTimestampNano,he.next=94,(0,Er.select)((function(e){return e.conversationReducer}));case 94:return ee=he.sent,te=ee.conversationIds,re=ee.persist,he.next=99,(0,Er.call)(vl,U,te,re,r);case 99:ne=he.sent,oe=ne.persistObj,ae=ne.resultConversationIds,z=Object.assign({},z,{sortByWaitTime:i,nextMessageTimeNano:null===(X=x)||void 0===X||null===(J=X.next_cursor)||void 0===J?void 0:J.next_message_time_nano,oldestTimestampNano:$,latestTimestampNano:Z,persist:oe,conversationIds:ae,maxLatestTimestampNano:!O||O<Z?Z:O}),he.next=125;break;case 105:return ce=[],se=[],he.next=109,(0,Er.select)(dp);case 109:if(ie=he.sent,U.forEach((function(e){!ie.includes(e.shop_id)&&se.push(e.shop_id)})),!se.length){he.next=115;break}return he.next=114,(0,Er.call)(Gp,{shopIds:Qt(new Set(se))});case 114:ce=he.sent;case 115:return he.next=117,(0,Er.select)((function(e){return e.conversationReducer}));case 117:return ue=he.sent,le=ue.conversationIds,de=ue.persist,he.next=122,(0,Er.call)(vl,U,le,de,r,ce);case 122:pe=he.sent,fe=U[L-1],z=Object.assign({},z,{hasMore:!0,conversationIdsMap:Y,persist:pe.persistObj,oldestMessageRegion:fe.last_message_region,oldestReceivedMessageId:fe.latest_message_id,latestReceivedMessageId:K,conversationIds:pe.resultConversationIds});case 125:if(!f){he.next=137;break}if(!C||!Y[C]){he.next=137;break}return _e=U.find((function(e){return e.id===C})),Ee=(_e||{}).latest_message_id,he.next=131,(0,Er.select)(O_);case 131:if(Se=he.sent,Oe=Se.length?Se[Se.length-1].id:"",Ee===Oe){he.next=137;break}return he.next=137,oa().put(ca().fetchMessagesRequested({payload:{conversationId:null==_e?void 0:_e.id,reset:!0},isLazy:!0}));case 137:return he.next=139,(0,Er.put)(Pi(z));case 139:return he.next=141,(0,Er.spawn)(kl,U);case 141:if(!a){he.next=154;break}if(!p){he.next=150;break}if("0"===q.nextTimestampNano){he.next=148;break}return he.next=146,(0,Er.put)(Ii({direction:r,noPending:!0}));case 146:he.next=148;break;case 148:he.next=152;break;case 150:return he.next=152,(0,Er.put)(Ii({direction:r,noPending:!0}));case 152:he.next=157;break;case 154:if(!(z.conversationIds.length<=20)){he.next=157;break}return he.next=157,(0,Er.put)(Ii({direction:"older",noPending:!0}));case 157:he.next=161;break;case 159:return he.next=161,(0,Er.put)(Pi({direction:r,status:A.DataFetchStatus.SUCCEED,hasMore:a,persist:g,oldestReceivedMessageId:h,latestReceivedMessageId:v,maxLatestReceivedMessageId:T,oldestTimestampNano:E,latestTimestampNano:S,maxLatestTimestampNano:O,shouldFetchByTimestamp:p,syncFetchException:f?R+1:0,nextMessageTimeNano:w}));case 161:he.next=166;break;case 163:if(y===A.DataFetchStatus.INIT_FAILED){he.next=166;break}return he.next=166,(0,Er.put)(wi({status:A.DataFetchStatus.SUCCEED}));case 166:he.next=177;break;case 168:if(he.prev=168,he.t0=he.catch(43),!(he.t0 instanceof gt||he.t0 instanceof it)){he.next=175;break}return he.next=173,(0,Er.put)(wi({status:A.DataFetchStatus.TEMPORY_ERROR}));case 173:he.next=177;break;case 175:return he.next=177,(0,Er.put)(wi({status:N?A.DataFetchStatus.INIT_FAILED:A.DataFetchStatus.FAILED}));case 177:case"end":return he.stop()}}),bl,null,[[43,168]])}function Ll(e){var t,r,n,o,a;return Ct().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.payload.conversationIds,r=void 0===t?[]:t,c.prev=1,r.length){c.next=6;break}return c.next=5,(0,Er.select)(Hs);case 5:r=c.sent;case 6:if(!r.length){c.next=16;break}return c.next=9,(0,Er.call)(Nl,r.slice(0,20));case 9:if(n=c.sent,!(o=n.filter((function(e){return!e.lack}))).length){c.next=16;break}return a={},o.forEach((function(e){a[e.id]=e})),c.next=16,(0,Er.put)(Br({name:"conversations",records:a}));case 16:c.next=20;break;case 18:c.prev=18,c.t0=c.catch(1);case 20:case"end":return c.stop()}}),yl,null,[[1,18]])}function jl(e){var t,r,n,o,a;return Ct().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.shopId,n=t.buyerId,c.prev=1,c.next=4,(0,Er.call)(uv,{parent:"offer",resource:"count",params:{shop_id:r,buyer_id:n}});case 4:return o=c.sent,a=o.pending_count,c.next=8,(0,Er.put)(cu({shopId:r,buyerId:n,count:a}));case 8:c.next=14;break;case 10:return c.prev=10,c.t0=c.catch(1),c.next=14,(0,Er.put)(cu({shopId:r,buyerId:n,count:0}));case 14:case"end":return c.stop()}}),Rl,null,[[1,10]])}function Gl(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(Ii,Ml);case 2:return e.next=4,(0,Er.takeEvery)(Wi,Ll);case 4:return e.next=6,(0,Er.takeEvery)(au,jl);case 6:case"end":return e.stop()}}),Dl)}const Fl=(e(Sl={},bs.FETCH_CONVERSATIONS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.conversationIds,o=r.conversationIdsMap,a=void 0===o?{}:o,c=r.oldestMessageRegion,s=r.latestMessageRegion,i=r.oldestReceivedMessageId,u=r.latestReceivedMessageId,l=r.direction,d=void 0===l?"reset":l,p=r.status,f=r.hasMore,_=r.oldestTimestampNano,E=r.latestTimestampNano,S=r.persist,O=r.shouldFetchByTimestamp,h=r.maxLatestReceivedMessageId,v=r.maxLatestTimestampNano,T=r.syncFetchException,m=void 0===T?0:T,g=r.nextMessageTimeNano,b=r.sortByWaitTime,y=Cl(Cl({},e),{},{status:p,hasMore:f,persist:S,conversationIds:n||e.conversationIds,conversationIdsMap:"reset"===d?a:Cl(Cl({},e.conversationIdsMap),a),direction:"latest"===d?d:"older",maxLatestReceivedMessageId:h,maxLatestTimestampNano:v,syncFetchException:m,nextMessageTimeNano:g});switch(d){case"reset":O?(y.latestTimestampNano=E,y.oldestTimestampNano=_):(y.oldestReceivedMessageId=i,y.latestReceivedMessageId=u);break;case"latest":O?y.latestTimestampNano=E>e.latestTimestampNano?E:e.latestTimestampNano:y.latestReceivedMessageId=u;break;case"older":O?(y.oldestTimestampNano=_,b&&(y.latestTimestampNano=E)):y.oldestReceivedMessageId=i}return c&&(y.oldestMessageRegion=c),s&&(y.latestMessageRegion=s),y})),e(Sl,bs.UPDATE_FETCH_CONVERSATIONS_STATUS,vu),e(Sl,bs.UPDATE_FETCH_CONVERSATIONS_DIRECTION,Tu),e(Sl,bs.UPDATE_CONVERSATION_TIMESTAMP,(function(e,t){var r=t.payload,n=r.latestTimestampNano,o=r.oldestTimestampNano;return Cl(Cl({},e),{},{latestTimestampNano:n,oldestTimestampNano:o})})),e(Sl,bs.GET_PENDING_OFFERS_COUNT_SUCCEED,(function(t,r){var n=r.payload,o=n.shopId,a=n.buyerId,c=n.count,s="".concat(o,"_").concat(a);return Cl(Cl({},t),{},{pendingOffersCount:Cl(Cl({},t.pendingOffersCount),{},e({},s,c))})})),e(Sl,bs.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED,(function(e,t){var r=t.payload.records;return Cl(Cl({},e),{},{pendingOffersCount:Cl(Cl({},e.pendingOffersCount),r)})})),Sl);var Hl;function Vl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const Bl=(e(Hl={},bs.SET_CURRENT_CONVERSATION_CAN_READ,gu),e(Hl,bs.UPDATE_SERVICE_DOWN_STATUS,(function(t,r){var n=r.payload,o=n.flag,a=n.alert,c=n.list,s=n.close,i=function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Vl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t);return void 0!==o&&(i.serviceDown=o),void 0!==a&&(i.serviceDownAlert=a),void 0!==c&&(i.serviceDownList=c),void 0!==s&&(i.manualClose=s),i})),Hl);var Yl,Wl=Ct().mark(zl),Ql=Ct().mark(Xl);function ql(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ql(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ql(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zl(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h;return Ct().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,r=t.conversationId,n=t.isRead,o=t.latestMessageId,v.prev=1,a=Date.now()+"",c=n?"read":"unread",v.next=6,(0,Er.select)(ti(r));case 6:if(s=v.sent,i=s.shop_id,u=s.last_read_message_id,!n){v.next=16;break}return v.next=12,(0,Er.select)(ti(r));case 12:if(l=v.sent,d=l.unread_count,u!==o||d){v.next=16;break}return v.abrupt("return");case 16:if(p=n?{last_read_message_id:o}:{},i&&(p.shop_id=i),!n){v.next=21;break}return v.next=21,(0,Er.put)(Li({requestId:a}));case 21:return v.next=23,(0,Er.call)(uv,{method:"PUT",parent:"conversations",parentId:r,resource:c,params:{request_id:a},payload:JSON.stringify(Kl({},p))});case 23:if(!n){v.next=41;break}return v.next=26,(0,Er.select)((function(e){return e.conversationReducer}));case 26:return f=v.sent,_=f.conversationMark,E="socket"===_[r],v.next=31,(0,Er.put)(Mi({conversationId:r,markType:E?"":"api"}));case 31:if(E){v.next=41;break}return v.next=34,(0,Er.select)(ti(r));case 34:return S=v.sent,O=S.unread_count,h=S.shop_id,v.next=39,(0,Er.put)(Hr({name:"conversations",id:r,record:{last_read_message_id:o,unread_count:0}}));case 39:return v.next=41,(0,Er.put)(Tn({type:pn.MARK_AS_READ,conversation:{id:r,shop_id:h,unread_count:O}}));case 41:v.next=47;break;case 43:return v.prev=43,v.t0=v.catch(1),v.next=47,(0,Er.put)(rf({error:v.t0}));case 47:case"end":return v.stop()}}),Wl,null,[[1,43]])}function Xl(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(ki,zl);case 2:case"end":return e.stop()}}),Ql)}const Jl=(e(Yl={},bs.MARK_MESSAGES_SUCCEEDED,(function(t,r){var n=r.payload,o=n.conversationId,a=n.markType;return Kl(Kl({},t),{},{conversationMark:Kl(Kl({},t.conversationMark),{},e({},o,a))})})),e(Yl,bs.UPDATE_READ_REQUEST_DATA,(function(e,t){var r=t.payload,n=r.requestId,o=r.requestIds,a=r.count,c=Kl({},e);return n&&(c.readRequestIds=[n].concat(e.readRequestIds)),o&&(c.readRequestIds=o),a&&(c.missedReadNoticeCount=a),c})),Yl);var $l,Zl=Ct().mark(td),ed=Ct().mark(rd);function td(e){var t,r,n,o;return Ct().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.conversationId,a.prev=1,a.next=5,(0,Er.select)(lo);case 5:if(!a.sent){a.next=10;break}return a.next=10,(0,Er.put)(bh({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 10:return a.next=12,(0,Er.select)(ti(t));case 12:return r=a.sent,n=r.shop_id,o=r.status,a.next=17,(0,Er.call)(uv,{method:"PUT",resource:"conversations",id:t,suffix:"status",payload:JSON.stringify({shop_id:n,status:$l[o]})});case 17:a.next=23;break;case 19:return a.prev=19,a.t0=a.catch(1),a.next=23,(0,Er.put)(rf({error:a.t0}));case 23:case"end":return a.stop()}}),Zl,null,[[1,19]])}function rd(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(Yi,td);case 2:case"end":return e.stop()}}),ed)}!function(e){e.activated="closed",e.closed="activated"}($l||($l={}));var nd=Ct().mark(ad),od=Ct().mark(cd);function ad(e){var t,r,n,o,a,c,s,i,u,l,d,p,f;return Ct().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return t=e.payload.conversationId,_.prev=1,_.next=4,(0,Er.select)(ti(t));case 4:return r=_.sent,n=r.id,o=r.unread_count,a=r.shop_id,_.next=8,(0,Er.select)(Ns);case 8:return c=_.sent,_.next=11,(0,Er.call)(uv,{resource:"conversations",id:t,params:{shop_id:a}});case 11:if(s=_.sent,i=s.flag,u=s.entry_point,l=s.unread_count,d=s.latest_message_id,n){_.next=19;break}return p=T("conversations",s),f=p.entities,_.next=17,(0,Er.put)(Fr({entities:f}));case 17:_.next=21;break;case 19:return _.next=21,(0,Er.put)(Hr({name:"conversations",id:t,record:{flag:i,entry_point:u,unread_count:l}}));case 21:if(o||o===s.unread_count){_.next=24;break}return _.next=24,(0,Er.put)(Tn({conversation:s,type:pn.ACTIVE_CONVERSATION}));case 24:if(t!==c){_.next=28;break}if(!(l>0)){_.next=28;break}return _.next=28,(0,Er.put)(ki({conversationId:t,isRead:!0,latestMessageId:d}));case 28:return _.abrupt("return",s);case 31:return _.prev=31,_.t0=_.catch(1),_.abrupt("return",{});case 34:case"end":return _.stop()}}),nd,null,[[1,31]])}function cd(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(Ai,ad);case 2:case"end":return e.stop()}}),od)}function sd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function id(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?sd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const ud=e({},bs.FAKE_CONVERSATION_SUCCEEDED,(function(e,t){var r=t.payload.conversationId;return id(id({},e),{},{conversationIds:[r].concat(e.conversationIds.filter((function(e){return r!==e})))})}));var ld=Ct().mark(Ed),dd=Ct().mark(Sd);function pd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?pd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _d={restart:Yi,delete:Ri,read:ki,unread:ki,pin:ji,unpin:ji,mute:ou,unmute:ou};function Ed(e){var t,r,n,o;return Ct().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.type,n=t.extra,o=_d[r],a.next=4,(0,Er.put)(o(fd({},n)));case 4:case"end":return a.stop()}}),ld)}function Sd(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(Qi,Ed);case 2:case"end":return e.stop()}}),dd)}function Od(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Od(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Od(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}_d.close=Yi;var vd={hasSCAccess:"login_sellercenter",hasEditOrderAccess:"webchat_order_edit",hasViewOrderAccess:"access_my_sale",hasViewProductAccess:"access_my_product",hasEditVoucherAccess:"my_marketing_voucher_edit",hasViewVoucherAccess:"my_marketing_voucher_access"},Td=function(e){var t={},r=e.length;return Object.keys(vd).forEach((function(n){t[n]=!r||e.includes(vd[n])})),t};const md=e({},bs.UPDATE_ACCESS,(function(e,t){var r=Td(t.payload.access);return hd(hd({},e),{},{access:r})}));var gd=["combine","user","orderId","message","agent","agentMessage"];function bd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?bd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Rd=Ct().mark(Dd);function Dd(){var e,t,r,n,o,a,c,s;return Ct().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,Er.select)(ws);case 2:return e=i.sent,i.prev=3,i.next=6,(0,Er.call)(uv,{subServer:"coreapi",parent:"conversation",resource:"updated_conversation_list",params:{last_update_time:e}});case 6:if(t=i.sent,r=t.conversations,n=t.page_result,!(r.length>0)){i.next=13;break}return o={},r.forEach((function(e){o[e.id]=e})),i.next=13,(0,Er.put)(Br({name:"conversations",records:o}));case 13:if(c=(a=n||{}).has_more,!(s=a.next_last_update_time)){i.next=17;break}return i.next=17,(0,Er.put)($i({timeNow:s}));case 17:if(!(c&&r.length>0)){i.next=20;break}return i.next=20,(0,Er.call)(Dd);case 20:i.next=29;break;case 22:if(i.prev=22,i.t0=i.catch(3),!(i.t0 instanceof ft)){i.next=29;break}return i.next=27,(0,Er.put)($i({timeNow:"0"}));case 27:return i.next=29,(0,Er.call)(Ml,{payload:{direction:"reset"}});case 29:case"end":return i.stop()}}),Rd,null,[[3,22]])}const Ad=e({},bs.UPDATE_SYNC_TIME_NOW,(function(e,t){var r=t.payload.timeNow;return yd(yd({},e),{},{updateTimeNow:r})}));var Cd,Id,Pd=Ct().mark(Nd),wd=Ct().mark(Ud);function Nd(e){var t,r,n,o,a,c,s;return Ct().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.conversationId,i.prev=1,i.next=4,(0,Er.select)(ti(t));case 4:return r=i.sent,n=r.shop_id,o=r.mute,i.next=9,(0,Er.select)(Xn);case 9:return a=i.sent,c={biz_type:a?2:0},n&&(c.shop_id=n),s={method:"PUT",parent:"conversations",parentId:t,resource:o?"unmute":"mute",payload:JSON.stringify(c)},i.next=15,(0,Er.call)(uv,s);case 15:i.next=21;break;case 17:return i.prev=17,i.t0=i.catch(1),i.next=21,(0,Er.put)(rf({error:i.t0}));case 21:case"end":return i.stop()}}),Pd,null,[[1,17]])}function Ud(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(ou,Nd);case 2:case"end":return e.stop()}}),wd)}var xd=Ct().mark(Vd),kd=Ct().mark(Bd);function Md(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ld(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Md(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Md(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var jd=(0,dr.createActions)((e(Cd={},bs.SEARCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.keyword,r=void 0===t?"":t,n=e.shopId;return{keyword:r,shopId:void 0===n?"":n}})),e(Cd,bs.SEARCH_CONVERSATIONS_SUCCEEDED,(function(e){return{results:e.results,searchStatus:e.searchStatus}})),e(Cd,bs.UPDATE_SEARCH_PARAMS,(function(e){var t=e.keyword;return{keyword:void 0===t?"":t,searchStatus:e.searchStatus}})),Cd)),Gd=jd.searchConversationsRequested,Fd=jd.searchConversationsSucceeded,Hd=jd.updateSearchParams;function Vd(e){var t,r,n,o,a,c;return Ct().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.keyword,r=[],n=t.trim(),s.next=5,(0,Er.put)(Hd({keyword:n,searchStatus:A.DataFetchStatus.INIT_PENDING}));case 5:if(!n){s.next=15;break}return o=n.toLocaleLowerCase(),s.next=9,(0,Er.select)((function(e){return e.entityReducer}));case 9:return a=s.sent,c=a.shops,s.next=13,(0,Er.select)(Ms);case 13:s.sent.forEach((function(e){(e.to_name||"").toLocaleLowerCase().includes(o)&&!e.faking&&r.push(Ld(Ld({},e),{},{shop_name:(c[e.shop_id]||{}).name}))}));case 15:return s.next=17,(0,Er.put)(Fd({results:r,searchStatus:A.DataFetchStatus.SUCCEED}));case 17:case"end":return s.stop()}}),xd)}function Bd(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeLatest)(Gd,Vd);case 2:case"end":return e.stop()}}),kd)}const Yd=(e(Id={},bs.SEARCH_CONVERSATIONS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.results,o=r.searchStatus;return Ld(Ld({},e),{},{results:n,searchStatus:o})})),e(Id,bs.UPDATE_SEARCH_PARAMS,(function(e,t){var r=t.payload,n=r.keyword,o=r.searchStatus;return Ld(Ld({},e),{},{keyword:n,searchStatus:o})})),Id);var Wd,Qd=y(439).t;function qd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?qd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var zd=Ct().mark($d),Xd=Ct().mark(Zd);function Jd(e,t){return uv({parent:"conversation",resource:"conversation_info",params:{shop_id:t,message_id:e}})}function $d(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h;return Ct().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,r=t.msgId,n=t.shopId,v.next=3,(0,Er.select)(O_);case 3:return o=v.sent,a={},c=o.find((function(e){return e.id===r})),v.next=8,(0,Er.put)(Ji({inlocation:!0}));case 8:if(!c){v.next=16;break}return s=c.conversation_id,v.next=12,(0,Er.select)(ti(s));case 12:return a=v.sent,v.next=15,(0,Er.call)(il,{payload:{conversation:a,messageId:r,messageList:[]}});case 15:oT.emit("scrollToMessage",r);case 16:if(a.id){v.next=58;break}return v.prev=17,v.next=20,(0,Er.all)([(0,Er.call)(Jd,r,n),oa().call(ca().fetchConversationMessagesSaga({payload:{msgId:r,shopId:n}}))]);case 20:if(i=v.sent,u=D(i,2),l=u[0],d=u[1],p=(l||{}).conversation_info,f=void 0===p?[]:p,_=(d||{}).get_messages,0!==(E=void 0===_?[]:_).length&&E.find((function(e){return e.id===r}))){v.next=28;break}throw new Error("message_not_found");case 28:if(!(a=f[0])){v.next=39;break}return S=T("conversations",a),O=S.entities,v.next=33,oa().put(ca().deleteConversationMessageHash({payload:{conversationId:a.id}}));case 33:return v.next=35,(0,Er.put)(Fr({entities:O}));case 35:return v.next=37,(0,Er.delay)(300);case 37:return v.next=39,(0,Er.call)(il,{payload:{conversation:a,messageId:r,messageList:E}});case 39:v.next=58;break;case 41:v.prev=41,v.t0=v.catch(17),h=Qd("common.server_error.warning_tips"),v.t1=v.t0.message,v.next="message_not_found"===v.t1?47:"conversation_not_found"===v.t1?49:55;break;case 47:return h=Qd("message.server_error.not_found"),v.abrupt("break",56);case 49:return h=Qd("conversation.server_error.deleted"),v.next=52,(0,Er.put)(nu({conversationBeenDeleted:!0}));case 52:return v.next=54,(0,Er.put)(Vi());case 54:case 55:return v.abrupt("break",56);case 56:return v.next=58,(0,Er.call)(uf,rf({toast:{show:!0,type:"fail",message:h}}));case 58:case"end":return v.stop()}}),zd,null,[[17,41]])}function Zd(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeLatest)(Xi,$d);case 2:case"end":return e.stop()}}),Xd)}const ep=(e(Wd={},bs.UPDATE_LOCATION_MODE,(function(e,t){var r=t.payload.inlocation;return Kd(Kd({},e),{},{inlocation:r})})),e(Wd,bs.SET_CONVERSATION_BEEN_DELETED,(function(e,t){var r=t.payload.conversationBeenDeleted;return Kd(Kd({},e),{},{conversationBeenDeleted:r})})),Wd);function tp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?tp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var np,op,ap,cp,sp=[zu,dl,fu,Xl,rd,Gl,cd,Sd,Ud,Bd,Zd],ip=(np={},gd.forEach((function(e){np[e]={pageIndex:1,pageSize:20,hasMore:!0,nextOffset:"0"}})),op={},gd.forEach((function(e){op[e]={status:"",results:[],total:0}})),{conversationIds:[],conversationIdsMap:{},maxLatestTimestampNano:"",latestTimestampNano:"",oldestTimestampNano:"",oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",currentConversationId:null,currentConversationCanRead:!0,filter:"All",keyword:"",draftHash:{},status:"",hasMore:!0,persist:null,results:[],direction:"",searchStatus:"",inlocation:!1,conversationBeenDeleted:!1,syncFetchException:0,conversationMark:{},readRequestIds:[],missedReadNoticeCount:0,access:Td([]),updateTimeNow:"0",isNavigateToUnreadMessage:!1,navigateToUnreadMessageId:"",pendingOffersCount:{},nextMessageTimeNano:"",serviceDown:!1,serviceDownAlert:!1,serviceDownList:!1,manualClose:!1}),up=(0,dr.handleActions)(rp(rp(rp(rp(rp(rp(rp(rp(rp(rp(rp({},Xu),pl),fl),Bl),Fl),ud),Jl),md),Yd),ep),Ad),ip),lp=function(e){return(0,Sr.createSelector)(Pr,(function(r){return(0,t.denormalize)(e,p,{shops:r})}))},dp=function(e){return e.shopReducer.fetchedShopIds},pp=(0,Sr.createSelector)(Qs,Pr,(function(e,r){return(0,t.denormalize)(e.shop_id,p,{shops:r})||{}})),fp=(0,Sr.createSelector)(ci,hr,(function(e,r){return(0,t.denormalize)(e,p,r)||{}}));!function(e){e.FETCH_SHOPS_REQUESTED="FETCH_SHOPS_REQUESTED",e.FETCH_SHOPS_SUCCEED="FETCH_SHOPS_SUCCEED",e.UPDATE_FETCH_SHOPS_STATUS="UPDATE_FETCH_SHOPS_STATUS",e.FETCH_SHOP_AUTH_REQUESTED="FETCH_SHOP_AUTH_REQUESTED",e.UPDATE_FETCHED_SHOP_IDS="UPDATE_FETCHED_SHOP_IDS",e.UPDATE_SHOP_FILTER="UPDATE_SHOP_FILTER",e.VISIT_SHOP_SELLER_CENTER_REQUESTED="VISIT_SHOP_SELLER_CENTER_REQUESTED",e.VISIT_MALL_REQUESTED="VISIT_MALL_REQUESTED",e.SEARCH_SHOPS_REQUESTED="SEARCH_SHOPS_REQUESTED",e.SEARCH_SHOPS_SUCCEED="SEARCH_SHOPS_SUCCEED",e.UPDATE_SEARCH_SHOPS_STATUS="UPDATE_SEARCH_SHOPS_STATUS",e.FETCH_SHOP_DETAIL_INFO="FETCH_SHOP_DETAIL_INFO",e.UPDATE_CURRENT_FETCH_SHOP_IDS="UPDATE_CURRENT_FETCH_SHOP_IDS",e.RESET_CURRENT_FETCH_SHOPS="RESET_CURRENT_FETCH_SHOPS"}(ap||(ap={}));var _p=(0,dr.createActions)((e(cp={},ap.FETCH_SHOPS_REQUESTED,(function(){return{}})),e(cp,ap.FETCH_SHOPS_SUCCEED,(function(e){return{pagination:e.pagination,result:e.result}})),e(cp,ap.UPDATE_FETCH_SHOPS_STATUS,(function(e){return{status:e.status}})),e(cp,ap.FETCH_SHOP_AUTH_REQUESTED,(function(e){return{shopId:e.shopId}})),e(cp,ap.UPDATE_FETCHED_SHOP_IDS,(function(e){return{shopIds:e.shopIds}})),e(cp,ap.UPDATE_SHOP_FILTER,(function(e){return{filter:e.filter}})),e(cp,ap.VISIT_SHOP_SELLER_CENTER_REQUESTED,(function(e){return{url:e.url,shopId:e.shopId,orderId:e.orderId,itemId:e.itemId}})),e(cp,ap.SEARCH_SHOPS_REQUESTED,(function(e){return{keyword:e.keyword}})),e(cp,ap.SEARCH_SHOPS_SUCCEED,(function(e){return{pagination:e.pagination,result:e.result,keyword:e.keyword}})),e(cp,ap.UPDATE_SEARCH_SHOPS_STATUS,(function(e){return{status:e.status}})),e(cp,ap.FETCH_SHOP_DETAIL_INFO,(function(e){return{shopId:e.shopId}})),cp)),Ep=_p.fetchShopsRequested,Sp=(_p.fetchShopsSucceed,_p.updateFetchShopsStatus,_p.fetchShopAuthRequested),Op=_p.updateFetchedShopIds,hp=_p.updateShopFilter,vp=_p.visitShopSellerCenterRequested,Tp=_p.searchShopsRequested,mp=(_p.searchShopsSucceed,_p.updateSearchShopsStatus,_p.fetchShopDetailInfo),gp=Ct().mark(yp),bp=Ct().mark(Rp);function yp(e){var t,r,n,o;return Ct().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.shopId,a.prev=1,a.next=4,(0,Er.select)(lp(t));case 4:return r=a.sent,a.next=7,(0,Er.call)(uv,{resource:"shop",id:t,params:{need_cache:1,cache_expires:600}});case 7:return r=a.sent,n=T("shops",r),o=n.entities,a.next=11,(0,Er.put)(Fr({entities:o}));case 11:return a.next=13,(0,Er.put)(Op({shopIds:[r.id]}));case 13:return a.abrupt("return",r);case 16:return a.prev=16,a.t0=a.catch(1),a.abrupt("return",{});case 19:case"end":return a.stop()}}),gp,null,[[1,16]])}function Rp(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(mp,yp);case 2:case"end":return e.stop()}}),bp)}function Dp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ap(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Dp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Cp=e({},ap.UPDATE_SHOP_FILTER,(function(e,t){var r=t.payload.filter;return Ap(Ap({},e),{},{shopFilter:r})}));var Ip,Pp=Ct().mark(Np),wp=Ct().mark(Up);function Np(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g,b,y,R;return Ct().wrap((function(D){for(;;)switch(D.prev=D.next){case 0:return t=e.payload,r=t.url,n=t.shopId,o=t.orderId,a=t.itemId,D.prev=1,D.next=4,(0,Er.call)(uv,{resource:"shop",id:n,suffix:"sc"});case 4:if(c=D.sent,s=c.sc_url,i=c.upgraded,u=c.region,!i){D.next=12;break}return l=window.open(),r?((d=r.split("/"))[2]=(0,A.getSellerCenterUrl)(u),p=d.join("/"),l.location=p.includes("?")?"".concat(p,"&cnsc_shop_id=").concat(n):"".concat(p,"?cnsc_shop_id=").concat(n)):l.location=o?"https://".concat((0,A.getSellerCenterUrl)(u),"/portal/sale/").concat(o,"?cnsc_shop_id=").concat(n):a?"https://".concat((0,A.getSellerCenterUrl)(u),"/portal/product/").concat(a,"?cnsc_shop_id=").concat(n):"https://".concat((0,A.getSellerCenterUrl)(u),"?cnsc_shop_id=").concat(n),D.abrupt("return");case 12:if(!s){D.next=25;break}if(f=s.split("?"),_=f[1].split("&").find((function(e){return e.startsWith("sig=")})),E=_.substring(4),S=f[0].split("."),O=S[S.length-1],h=window.open(),!r){D.next=22;break}return h.location=r.includes("?")?"".concat(r,"&sig=").concat(E):"".concat(r,"?sig=").concat(E),D.abrupt("return");case 22:o||a?o?(v="https://".concat((0,A.getSellerCenterUrl)(O),"/portal/sale/").concat(o,"?sig=").concat(E),h.location=v):a&&(T="https://".concat((0,A.getSellerCenterUrl)(O),"/portal/product/").concat(a,"?sig=").concat(E),h.location=T):(m="https://".concat((0,A.getSellerCenterUrl)(O),"?sig=").concat(E),h.location=m),D.next=28;break;case 25:return g=Zp(!1,{type:"permission-denied"}),D.next=28,(0,Er.put)(rf({toast:g}));case 28:D.next=38;break;case 30:return D.prev=30,D.t0=D.catch(1),D.next=34,(0,Er.select)(lp(n));case 34:b=D.sent,y="https://".concat((0,A.getSellerCenterUrl)(b.country),"/portal/"),R=o?"sale/".concat(o):a?"product/".concat(a):"",window.open(y+R);case 38:case"end":return D.stop()}}),Pp,null,[[1,30]])}function Up(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(vp,Np);case 2:case"end":return e.stop()}}),wp)}function xp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?xp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Mp=Ct().mark(Fp),Lp=Ct().mark(Hp),jp=function(e){return new Promise((function(t){uv({parent:"conversation",resource:"unread-counts",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e["unread-counts"];t(void 0===r?[]:r)})).catch((function(){t([])}))}))},Gp=function(e){var t=e.shopIds,r={ids:JSON.stringify(t)};return new Promise((function(e){uv({resource:"shops",params:r}).then((function(t){var r=t.shops;e(void 0===r?[]:r)})).catch((function(){e([])}))}))};function Fp(e){var t,r;return Ct().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.shopId,n.prev=1,n.next=4,(0,Er.call)(uv,{parent:"shop",parentId:t,resource:"auth"});case 4:return r=n.sent,n.abrupt("return",r);case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",{});case 11:case"end":return n.stop()}}),Mp,null,[[1,8]])}function Hp(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(Sp,Fp);case 2:case"end":return e.stop()}}),Lp)}const Vp=(e(Ip={},ap.FETCH_SHOPS_SUCCEED,(function(e,t){var r=t.payload,n=r.pagination,o=r.result;return kp(kp({},e),{},{fetchResult:kp(kp({},e.fetchResult),{},{pagination:n,result:o})})})),e(Ip,ap.SEARCH_SHOPS_SUCCEED,(function(e,t){var r=t.payload,n=r.pagination,o=r.result,a=r.keyword;return kp(kp({},e),{},{searchResult:kp(kp({},e.searchResult),{},{pagination:n,result:o,keyword:a})})})),e(Ip,ap.UPDATE_FETCH_SHOPS_STATUS,(function(e,t){var r=t.payload.status;return kp(kp({},e),{},{status:r})})),e(Ip,ap.UPDATE_SEARCH_SHOPS_STATUS,(function(e,t){var r=t.payload.status;return kp(kp({},e),{},{searchStatus:r})})),e(Ip,ap.UPDATE_FETCHED_SHOP_IDS,(function(e,t){var r=t.payload.shopIds,n=e.fetchedShopIds;return kp(kp({},e),{},{fetchedShopIds:Qt(new Set(n.concat(r)))})})),Ip);function Bp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Bp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Wp,Qp,qp={currentPage:0,perPage:20,hasMore:!0},Kp=[Rp,Hp,Up],zp={shopFilter:null,fetchedShopIds:[],fetchResult:{pagination:Yp({},qp),result:[]},status:"",searchResult:{pagination:Yp({},qp),result:[],keyword:""},searchStatus:""},Xp=(0,dr.handleActions)(Yp(Yp({},Cp),Vp),zp),Jp=function(e){return e.toastReducer.toast},$p=y(439).t,Zp=function(e,t){var r={};if(t){switch(t.type){case"auto-reply":e?t.first&&"enabled"===t.action?(r.message=$p("settings.enable_auto_reply_successfully"),r.show=!0):(r.message="",r.show=!1):(t.first&&"enabled"===t.action?r.message=$p("settings.failed_to_enable_auto_reply"):r.message="enabled"===t.action?$p("settings.failed_to_enable"):$p("settings.failed_to_disable"),r.show=!0);break;case"message":r.message=e?"save"===t.action?$p("settings.message.save_successfully"):"delete"===t.action?$p("settings.message.delete_successfully"):$p("settings.message.import_successfully"):"save"===t.action?$p("settings.message.failed_to_save"):"delete"===t.action?$p("settings.message.failed_to_delete"):$p("settings.message.failed_to_import"),r.show=!0;break;case"message-tips":e?(r.message="",r.show=!1):(r.message="enabled"===t.action?$p("settings.failed_to_enable"):$p("settings.failed_to_disable"),r.show=!0);break;case"forward":e||(r.message=403===t.status?$p("forward.exception",{forwardName:""}):$p("forward.server_error"),r.show=!0);break;case"send-feedback":r.message=$p("feedback_modal.error.failed_to_send"),r.show=!0;break;case"server-error-tips":r.message=$p("common.server_error.warning_tips"),r.show=!0;break;case"conversation-closed-tip":r.message=$p("conversation_detail.closed.warning_tips"),r.show=!0;break;case"permission-denied":r.message=$p("common.permission_denied"),r.show=!0;break;case"claim-voucher":r.message=$p(e?"voucher.claim.success":"voucher.claim.fail"),r.show=!0;break;case"private-image":r.message=$p("common.image.expired"),r.show=!0;break;case"operation":"save"===t.action&&(r.message=$p(e?"text.save_successfully":"text.save_failed")),r.show=!0;break;default:r.message=t.message,r.show=!0}r.type=e?"success":"fail"}return r};!function(e){e.COPY_SUCCEED_FEEDBACK="COPY_SUCCEED_FEEDBACK",e.SET_TOAST_INFORMATION="SET_TOAST_INFORMATION",e.SET_TOAST_INFORMATION_SUCCEEDED="SET_TOAST_INFORMATION_SUCCEEDED"}(Wp||(Wp={}));var ef=(0,dr.createActions)((e(Qp={},Wp.COPY_SUCCEED_FEEDBACK,(function(){return{}})),e(Qp,Wp.SET_TOAST_INFORMATION,(function(e){return{type:e.type,error:e.error,toast:e.toast}})),e(Qp,Wp.SET_TOAST_INFORMATION_SUCCEEDED,(function(e){return{toast:e.toast}})),Qp)),tf=ef.copySucceedFeedback,rf=ef.setToastInformation,nf=ef.setToastInformationSucceeded;function of(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function af(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?of(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):of(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var cf=Ct().mark(uf),sf=Ct().mark(lf);function uf(e){var t,r,n,o,a;return Ct().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.type,n=t.error,o=t.toast,c.next=3,(0,Er.select)(so);case 3:if(!c.sent){c.next=11;break}return a=null,r&&(a=Zp(!1,{type:r})),void 0!==n&&(a=n instanceof ft||n instanceof St?n.handler():Zp(!1,{type:"server-error-tips"})),o&&(a=o),c.next=11,(0,Er.put)(nf({toast:a}));case 11:case"end":return c.stop()}}),cf)}function lf(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(rf,uf);case 2:case"end":return e.stop()}}),sf)}const df=e({},Wp.SET_TOAST_INFORMATION_SUCCEEDED,(function(e,t){var r=t.payload.toast;return af(af({},e),{},{toast:r})}));var pf=y(439).t,ff=Ct().mark(Ef),_f=Ct().mark(Sf);function Ef(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.put)(rf({toast:Zp(!0,{message:pf("common.successful_copied")})}));case 2:case"end":return e.stop()}}),ff)}function Sf(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(tf,Ef);case 2:case"end":return e.stop()}}),_f)}function Of(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var hf=[lf,Sf],vf=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Of(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Of(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},df),{toast:{type:"",message:"",show:!1}});function Tf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mf(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Tf(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var gf,bf,yf=A.MessageTypes.MSG_TYPE_OFFER,Rf=A.MessageTypes.MSG_TYPE_ORDER,Df=A.MessageTypes.MSG_TYPE_PRODUCT,Af=A.MessageTypes.MSG_TYPE_IMAGE,Cf=A.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED,If=A.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,Pf=A.MessageTypes.MSG_TYPE_VIDEO,wf=A.MessageTypes.MSG_TYPE_NOTIFICATION,Nf=A.MessageTypes.MSG_TYPE_RATE_CARD,Uf=A.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT,xf=[Rf,Df],kf=function(e){return(e.messageReducer||{}).faqHistoryStatus},Mf=function(e){return(e.messageReducer||{}).faqHistoryHash},Lf=function(e){return(e.messageReducer||{}).faqId},jf=(0,Sr.createSelector)(Mf,Lf,(function(e,t){return e&&t&&e[t]||{all:[]}})),Gf=function(e){return(e.messageReducer||{}).status},Ff=(0,Sr.createSelector)((function(e){return e}),(function(e){return(e.messageReducer||{}).messagesRelatedMap||{}})),Hf=function(e){return e.messageReducer.offlineMessages},Vf=function(e){var t;return(null===(t=e.messageReducer)||void 0===t?void 0:t.videoMap)||{}},Bf=function(e){return(0,Sr.createSelector)(Vf,(function(t){return JSON.parse(JSON.stringify(t[e]||{}))}))},Yf=function(e){return(0,Sr.createSelector)(Vf,(function(t){return Object.keys(t).find((function(r){return t[r].vid===e}))}))},Wf=function(e){return(0,Sr.createSelector)(gr,(function(r){return(0,t.denormalize)(e,c,{messages:r})}))},Qf=function(e){return(0,Sr.createSelector)(gr,(function(r){return(0,t.denormalize)(e,[c],{messages:r})}))},qf=(0,Sr.createSelector)(Ns,Ff,(function(e,t){return t[e]||{all:[]}})),Kf=function(e){return(0,Sr.createSelector)(Ff,(function(t){return t[e]||{all:[],sending:[],failed:[]}}))},zf=function(e){return(e.messageReducer||{}).messageFillStatusMap||{}},Xf=UT((function(e){return(0,Sr.createSelector)(Kf(e),ti(e),gr,(function(e,t,r){return Yu(e,t,r)}))})),Jf=(0,Sr.createSelector)(qf,(function(e){var t=Qt(e.all||[]);return e.securityTipsMessageId&&t.push(e.securityTipsMessageId),t})),$f=(0,Sr.createSelector)(qf,(function(e){return e.sending||[]})),Zf=(0,Sr.createSelector)(qf,(function(e){return e.failed||[]})),e_=(0,Sr.createSelector)(qf,(function(e){return e.hasMoreOlderMessage})),t_=(0,Sr.createSelector)(qf,(function(e){return e.hasMoreLatestMessage})),r_=(0,Sr.createSelector)(qf,(function(e){return e.hasNext})),n_=function(e){return e.messageReducer.entryPoint},o_=function(e){return e.messageReducer.toBottomHasConflict},a_=(0,Sr.createSelector)(gr,Jf,(function(e,r){return((0,t.denormalize)(r,[c],{messages:e})||[]).filter(Boolean)})),c_=function(e){return(0,Sr.createSelector)(Kf(e),gr,(function(e,r){return((0,t.denormalize)(e.all,[c],{messages:r})||[]).filter((function(e){return null==e?void 0:e.isFaking}))}))},s_=(0,Sr.createSelector)(a_,(function(e){return e.reverse()})),i_=(0,Sr.createSelector)(s_,Qs,(function(e,t){var r=0,n=[];return e.forEach((function(e,o){var a=(0,A.getMessageIsSend)(e,t);e.warning&&!a&&(o-r<10&&n.pop(),n.push(e.id),r=o)})),n})),u_=(0,Sr.createSelector)(Qs,s_,(function(e,t){if(!e)return[];var r=e.last_read_message_id;return t.filter((function(t){var n=(0,A.getMessageIsSend)(t,e);return t&&!n&&(0,A.greaterThan)(t.id,r)&&t.type!==wf}))})),l_=(0,Sr.createSelector)(hr,jf,(function(e,r){var n=r.all;return(0,t.denormalize)(n,[c],e)})),d_=(0,Sr.createSelector)(l_,s_,(function(e,t){return(e&&e.length?e:t).filter((function(e){var t=(e||{}).type;return!(0,A.isDeletedMessage)(e)&&[Af,Pf,Uf].includes(t)}))})),p_=(0,Sr.createSelector)(d_,Qs,Ks,Kn,oi,(function(e,t,r,n,o){var a=r&&r.country||"sg",c=(0,A.getVideoServer)(a);return e.map((function(e){var r="",a=!1,s=(0,A.getMessageIsSend)(e,t);switch(e.type){case Af:var i=e.content;r=1!==i.file_server_id&&i.url_hash?"".concat((0,A.getFileServer)()).concat(i.url_hash):i.url||i.localUrl,a=i.unknown_qr_code&&!s;break;case Pf:var u=e.content;r=u.video_url?"".concat(c).concat(u.video_url):u.localVideoUrl;break;case Uf:var l=e.content;r=l.thumb_url?"".concat((0,A.getFileServer)()).concat(l.thumb_url):l.image_url}var d=e.id,p=e.type,f=e.request_id,_=e.content;return{type:p,id:d,url:r,unknownQrCode:a,trackerData:{shopid:o,account_type:n.role||"shopee_user",message_id:d===f?0:d,conversation_id:t.id,account_id:n.id,is_sender:s,video_original_duration:_.duration_seconds}}}))})),f_=(0,Sr.createSelector)(u_,(function(e){return e.length?e.map((function(e){return e.id})):[]})),__=(0,Sr.createSelector)(Qs,s_,(function(e,t){return e?t.filter(Boolean).reduce((function(e,t){var r=t.type,n=t.source_type,o=t.source_content,a=t.content;if(!n||r===yf||[-1,0].includes(o["".concat(n,"_id")]))return e;if(xf.includes(r)&&o){var c="".concat(r,"_id");if(a[c]===o[c])return e}var s=e.lastSourceMessage,i=e.sourceList;if(!i.length)return{sourceList:i.concat(t),lastSourceMessage:t};if(n===Df){var u=null==o?void 0:o.product_id,l=s.source_content&&s.source_content.product_id;if(!u||l===u)return e}else if(n===Rf){var d=null==o?void 0:o.order_id,p=s.source_content&&s.source_content.order_id;if(!d||[-1,0,p].includes(d))return e}return{sourceList:i.concat(t),lastSourceMessage:t}}),{sourceList:[],lastSourceMessage:null}).sourceList:[]})),E_=(0,Sr.createSelector)(__,(function(e){return e.map((function(e){return e.id}))})),S_=(0,Sr.createSelector)(hr,a_,(function(e,r){var n=r.filter((function(e){return e&&e.type===yf})).map((function(e){return e.content.offer_id}));return(0,t.denormalize)(n,[l],e)})),O_=(0,Sr.createSelector)(s_,E_,$f,Zf,Qs,Ir,S_,(function(e,t,r,n,o,a,c){return o?e.filter((function(e){if(!e)return!1;var t=e.content,r=e.type;return!(![Cf,If].includes(r)&&(!t||t&&0===Object.keys(t).length))})).map((function(e){var o=r.includes(e.id)?A.MessageSendStatus.SENDING:n.includes(e.id)?A.MessageSendStatus.FAILED:e.send_status?A.MessageSendStatus.SUCCEED:null,s=t.includes(e.id),i=Object.assign({},e,{send_status:o,hasMessageSource:s}),u=i,l=u.type,d=u.content,p=void 0===d?{}:d,f=u.message_option;switch(l){case yf:var _=c.find((function(e){return e&&e.id===p.offer_id}));i=Object.assign({},i,{textContent:_});break;case Nf:var E=a[p.card_id];E&&(i=Object.assign({},i,{textContent:E}))}return(0,A.hasTargetMessageOption)(f,A.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(i=mf(mf({},i),{},{send_status:A.MessageSendStatus.FAILED,errorCode:A.MessageErrorCode.BLACKLIST})),i})):[]})),h_=function(e){return(0,Sr.createSelector)(Ir,(function(r){return(0,t.denormalize)(e,E,{rateCards:r})}))},v_=(0,Sr.createSelector)((function(e){var t;return null==e||null===(t=e.messageReducer)||void 0===t?void 0:t.reply}),(function(e){return e?e.toMessageId:{}})),T_=(0,Sr.createSelector)(Ns,v_,(function(e,t){return t[e]||""})),m_=function(e){var t,r;return null===(t=e.messageReducer)||void 0===t||null===(r=t.reply)||void 0===r?void 0:r.scrollToMessageId},g_=(0,Sr.createSelector)(T_,gr,(function(e,r){return(0,t.denormalize)(e,c,{messages:r})})),b_=function(e){var t,r;return null===(t=e.messageReducer)||void 0===t||null===(r=t.reply)||void 0===r?void 0:r.inScrollToMessage},y_=function(e){return e.messageReducer.imageUrl},R_=function(e){return e.messageReducer.faqSessions||{}},D_=(0,Sr.createSelector)(Ns,R_,(function(e,t){return t[e]||{}})),A_=function(e){return e.messageShortcutGroupReducer},C_=function(e){return e.messageShortcutGroupReducer&&e.messageShortcutGroupReducer.currentGroupType},I_=(0,Sr.createSelector)(A_,C_,(function(e,t){return e&&e[t]||{groups:[],status:""}})),P_=(0,Sr.createSelector)(I_,(function(e){return e.status})),w_=(0,Sr.createSelector)(I_,(function(e){return e.currentGroupId})),N_=(0,Sr.createSelector)(I_,(function(e){var t=e.groups,r=void 0===t?[]:t,n=e.currentGroupId,o=(r.find((function(e){return e.id===n}))||{}).message_shortcuts;return void 0===o?[]:o})),U_=(0,Sr.createSelector)(A_,(function(e){var t=(e&&e[A.MessageShortcutGroupType.PERSONAL]||{groups:[]}).groups;return(void 0===t?[]:t).reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),x_=(0,Sr.createSelector)(A_,(function(e){var t=(e&&e[A.MessageShortcutGroupType.TEAM]||{groups:[]}).groups;return(void 0===t?[]:t).reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),k_=(0,Sr.createSelector)(U_,x_,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat(Qt(e),Qt(t))})),M_=function(e){return e.settingsReducer.settings},L_=function(e){return e.settingsReducer.needForceUpdate},j_=function(e){return e.settingsReducer.status},G_=function(e){return e.settingsReducer.fetchStatus},F_=(0,Sr.createSelector)(M_,(function(e){return e.auto_translation_status||""})),H_=(0,Sr.createSelector)(M_,(function(e){return e.show_msg_time||"enabled"})),V_=(0,Sr.createSelector)(M_,(function(e){return e.message_shortcuts_status||""})),B_=(0,Sr.createSelector)(M_,(function(e){return e.legacy_message_shortcuts_count||0})),Y_=(0,Sr.createSelector)(M_,(function(e){return e.distribution_account_status||"enabled"}));!function(e){e.FETCH_SETTINGS_REQUESTED="FETCH_SETTINGS_REQUESTED",e.FETCH_SETTINGS_SUCCEEDED="FETCH_SETTINGS_SUCCEEDED",e.FETCH_SETTINGS_STATUS="FETCH_SETTINGS_STATUS",e.UPDATE_SETTING_STATUS="UPDATE_SETTING_STATUS",e.UPDATE_SETTINGS_REQUESTED_BY_TYPE="UPDATE_SETTINGS_REQUESTED_BY_TYPE",e.UPDATE_SETTINGS_REQUESTED="UPDATE_SETTINGS_REQUESTED",e.UPDATE_SETTINGS_SUCCEEDED="UPDATE_SETTINGS_SUCCEEDED"}(gf||(gf={}));var W_,Q_=(0,dr.createActions)((e(bf={},gf.FETCH_SETTINGS_REQUESTED,(function(){return{}})),e(bf,gf.FETCH_SETTINGS_SUCCEEDED,(function(e){return{settings:e.settings,fetchStatus:e.fetchStatus,timestamp:e.timestamp,needForceUpdate:e.needForceUpdate}})),e(bf,gf.FETCH_SETTINGS_STATUS,(function(e){return{fetchStatus:e.fetchStatus}})),e(bf,gf.UPDATE_SETTING_STATUS,(function(e){return{status:e.status}})),e(bf,gf.UPDATE_SETTINGS_REQUESTED_BY_TYPE,(function(e){return e})),e(bf,gf.UPDATE_SETTINGS_REQUESTED,(function(e){return{params:e.params}})),e(bf,gf.UPDATE_SETTINGS_SUCCEEDED,(function(e){return{settings:e.settings,needForceUpdate:e.needForceUpdate}})),bf)),q_=Q_.fetchSettingsRequested,K_=Q_.fetchSettingsSucceeded,z_=Q_.fetchSettingsStatus;function X_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J_(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?X_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Q_.updateSettingStatus,Q_.updateSettingsRequestedByType,Q_.updateSettingsRequested,Q_.updateSettingsSucceeded;var $_=Ct().mark(eE),Z_=Ct().mark(tE);function eE(){var e;return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,Er.put)(z_({fetchStatus:A.DataFetchStatus.PENDING}));case 3:return t.next=5,(0,Er.call)(uv,{parent:"user",resource:"setting"});case 5:return e=t.sent,t.next=8,(0,Er.put)(K_({settings:e,fetchStatus:A.DataFetchStatus.SUCCEED,timestamp:Date.now(),needForceUpdate:!1}));case 8:return t.abrupt("return",e);case 11:return t.prev=11,t.t0=t.catch(0),t.next=15,(0,Er.put)(z_({fetchStatus:A.DataFetchStatus.FAILED}));case 15:return t.abrupt("return",{});case 16:case"end":return t.stop()}}),$_,null,[[0,11]])}function tE(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeLatest)([q_],eE);case 2:case"end":return e.stop()}}),Z_)}const rE=(e(W_={},gf.FETCH_SETTINGS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.settings,o=r.fetchStatus,a=r.timestamp,c=r.needForceUpdate;return J_(J_({},e),{},{settings:n,fetchStatus:o,timestamp:a,needForceUpdate:c})})),e(W_,gf.FETCH_SETTINGS_STATUS,(function(e,t){var r=t.payload.fetchStatus;return J_(J_({},e),{},{fetchStatus:r})})),W_);function nE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var oE,aE,cE=[tE],sE=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?nE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},rE),{settings:{},fetchStatus:""}),iE={currentPage:0,perPage:20,total:0,hasMore:!0},uE=function(e){return e.offerReducer.status},lE=(0,Sr.createSelector)(hr,(function(e){return e.offers||{}})),dE=function(e,t,r,n){return(0,Sr.createSelector)(lE,(function(o){return Object.values(o).filter((function(o){return o.product_id===n&&o.model_id===t&&o.conversation_id===e&&o.id!==r&&o.status===A.OfferStatus.PENDING}))}))},pE=function(e){return(0,Sr.createSelector)(hr,(function(r){return(0,t.denormalize)(e,l,r)}))},fE=function(e){return e.offerReducer.fetchResult},_E=function(e,t){return(0,Sr.createSelector)(fE,(function(r){return r["".concat(e,"_").concat(t)]||{pagination:iE,result:[]}}))},EE=(0,Sr.createSelector)(fE,Qs,(function(e,t){var r=t.shop_id,n=t.to_id,o=e["".concat(r,"_").concat(n)];return o?o.pagination:iE})),SE=(0,Sr.createSelector)(fE,Qs,hr,(function(e,r,n){var o=r.shop_id,a=r.to_id,c=e["".concat(o,"_").concat(a)];if(!c)return[];var s=c.result||[];return(0,t.denormalize)(s,[l],n).filter((function(e){return e}))})),OE=(0,dr.createActions)({REDUX_RESET:function(){return{}}}).reduxReset;!function(e){e.REMOVE_SINGLE_DRAFT="REMOVE_SINGLE_DRAFT",e.REMOVE_ALL_DRAFT="REMOVE_ALL_DRAFT",e.BATCH_REMOVE_DRAFT="BATCH_REMOVE_DRAFT",e.SAVE_DRAFT="SAVE_DRAFT"}(oE||(oE={}));const hE=(e(aE={},oE.REMOVE_SINGLE_DRAFT,Du),e(aE,oE.REMOVE_ALL_DRAFT,Au),e(aE,oE.BATCH_REMOVE_DRAFT,Cu),aE),vE=e({},oE.SAVE_DRAFT,Iu);var TE,mE=(0,dr.createActions)((e(TE={},oE.REMOVE_SINGLE_DRAFT,(function(e){return{conversationId:e.conversationId}})),e(TE,oE.REMOVE_ALL_DRAFT,(function(){return{}})),e(TE,oE.BATCH_REMOVE_DRAFT,(function(e){return{conversationIds:e.conversationIds}})),e(TE,oE.SAVE_DRAFT,(function(e){return{conversationId:e.conversationId,draft:e.draft}})),TE)),gE=mE.removeSingleDraft,bE=mE.removeAllDraft,yE=mE.batchRemoveDraft,RE=mE.saveDraft;function DE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function AE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?DE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var CE=(0,dr.handleActions)(AE(AE({},vE),hE),{draftHash:{}}),IE=function(e){return e.draftReducer.draftHash},PE=function(e){return(0,Sr.createSelector)(IE,(function(t){return t[e]}))},wE=(0,Sr.createSelector)(Ns,IE,(function(e,t){return e&&t[e]}));function NE(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function UE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?UE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var kE,ME=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=e.exceptionType,a=e.reconnectCount,c=void 0===a?0:a,s=e.exceptionReason,i=void 0===s?"":s,u={status:-1,userId:t,userType:r};if(o===A.SocketConnectionStatus.DISCONNECT){var l=c<=5?"s":c<=10?"m":"l";u=xE(xE({},u),{},{reconnectType:l,exceptionReason:i,exceptionType:o})}else u=xE(xE({},u),{},{exceptionType:o});Hv(jv[n?"SOCKET_FAILED":"CHATWS_SOCKET_FAILED"],0,u)};!function(e){e.FEEDBACK_REQUESTED="FEEDBACK_REQUESTED",e.FEEDBACK_SUCCEEDED="FEEDBACK_SUCCEEDED",e.UPDATE_RECONNECT_FLAG="UPDATE_RECONNECT_FLAG",e.UPDATE_NOTICES_COUNT="UPDATE_NOTICES_COUNT"}(kE||(kE={}));var LE=y(439).t,jE=["type"];function GE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function FE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?GE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var HE,VE,BE=Ct().mark(QE),YE=Ct().mark(qE),WE=function(e){return rS({feedback:{status:e,network:!0,content:LE("common.toast.".concat(e))}})};function QE(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.__WEBCHAT_LOGIN__){e.next=19;break}return e.next=3,(0,Er.select)(Xn);case 3:if(!e.sent){e.next=19;break}return e.next=7,(0,Er.select)(Kn);case 7:if("working"!==(e.sent||{}).distribution_status){e.next=19;break}return e.prev=10,e.next=13,(0,Er.call)(uv,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_event",payload:JSON.stringify({event_type:"login"})});case 13:window.__WEBCHAT_LOGIN__=!1,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),window.__WEBCHAT_LOGIN__=!1;case 19:case"end":return e.stop()}}),BE,null,[[10,16]])}function qE(e,t){return Ct().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=e,r.next=r.t0===A.ShareDataType.UNREAD?3:6;break;case 3:return r.next=5,(0,Er.put)(mn({count:t.total_unread_count}));case 5:return r.abrupt("break",6);case 6:case"end":return r.stop()}}),YE)}var KE=(0,dr.createActions)(e({},kE.UPDATE_RECONNECT_FLAG,(function(e){return{flag:e.flag}}))).updateReconnectFlag;HE=Ct().mark((function e(t){var r;return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==(r=t.status)){e.next=8;break}return e.next=4,(0,Er.put)(Ca({socketSuccess:!0}));case 4:return e.next=6,(0,Er.spawn)(QE);case 6:e.next=11;break;case 8:return Hv(jv.SOCKET_FAILED,0,{status:r}),e.next=11,(0,Er.put)(Ca({socketSuccess:!1}));case 11:case"end":return e.stop()}}),e)})),VE=Ct().mark((function e(t){var r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m;return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.event,n=t.payload,"reportUPLPoint"!==r){e.next=9;break}return e.next=4,(0,A.getItem)("session");case 4:c=e.sent,s=c&&c.user,u=(i=s||{}).id,l=i.type,o=u,a=l;case 9:e.t0=r,e.next=e.t0===A.SocketConnectionStatus.CONNECT?12:e.t0===A.SocketConnectionStatus.DISCONNECT?38:e.t0===A.SocketConnectionStatus.RECONNECT_ERROR?43:e.t0===A.SocketConnectionStatus.RECONNECTING?49:e.t0===A.SocketConnectionStatus.RECONNECT?52:"emit"===e.t0?55:"close"===e.t0?60:"ack"===e.t0?63:"reportUPLPoint"===e.t0?65:"reportConnections"===e.t0?67:"setMainPage"===e.t0?69:"shareApiData"===e.t0?72:76;break;case 12:return e.next=14,(0,Er.select)(LS);case 14:if(!e.sent){e.next=19;break}return d=1e3*Math.floor(30*Math.random()+1),e.next=19,(0,Er.delay)(d);case 19:return e.next=21,(0,Er.put)(nS({feedback:void 0}));case 21:return e.next=23,(0,A.getItem)("mini-session");case 23:if(p=e.sent,f=p&&p.p_token,_=p&&p.user,!f||!_){e.next=33;break}return e.next=29,(0,Er.call)(Yt,{token:f,account_id:_.uid});case 29:if(E=e.sent,Vt){e.next=33;break}return e.next=33,(0,Er.call)(HE,E);case 33:return e.next=35,(0,Er.put)(KE({flag:!1}));case 35:return e.next=37,(0,Er.put)(Ca({socketSuccess:!0}));case 37:return e.abrupt("break",76);case 38:return e.next=40,(0,Er.put)(KE({flag:!0}));case 40:return e.next=42,(0,Er.put)(WE("error"));case 42:return e.abrupt("break",76);case 43:return e.next=45,(0,Er.put)(WE("error"));case 45:return Hv(jv.SOCKET_FAILED,0,{status:-1}),e.next=48,(0,Er.put)(Ca({socketSuccess:!1}));case 48:return e.abrupt("break",76);case 49:return e.next=51,(0,Er.put)(WE("pending"));case 51:return e.abrupt("break",76);case 52:return e.next=54,(0,Er.put)(WE("resolved"));case 54:return e.abrupt("break",76);case 55:if(O=(S=n).type,h=S.response,"login"!==O){e.next=59;break}return e.next=59,(0,Er.call)(HE,h);case 59:return e.abrupt("break",76);case 60:return e.next=62,(0,Er.call)(Ss,!1);case 62:return e.abrupt("break",76);case 63:return Bt.dispatch(A.CustomShareEvent.ACK),e.abrupt("break",76);case 65:return ME(n,o,a),e.abrupt("break",76);case 67:return Hv(jv.SHARED_TABS,n),e.abrupt("break",76);case 69:return e.next=71,(0,Er.put)(jc({isMainPage:n.isMainPage}));case 71:return e.abrupt("break",76);case 72:return T=(v=n).type,m=NE(v,jE),e.next=75,(0,Er.call)(qE,T,m);case 75:return e.abrupt("break",76);case 76:case"end":return e.stop()}}),e)}));const zE=e({},kE.UPDATE_RECONNECT_FLAG,(function(e,t){var r=t.payload.flag;return FE(FE({},e),{},{reconnectFlag:r})}));var XE;function JE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $E(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?JE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ZE=Ct().mark(oS),eS=Ct().mark(aS),tS=(0,dr.createActions)((e(XE={},kE.FEEDBACK_REQUESTED,(function(e){return{feedback:e.feedback}})),e(XE,kE.FEEDBACK_SUCCEEDED,(function(e){return{feedback:e.feedback}})),XE)),rS=tS.feedbackRequested,nS=tS.feedbackSucceeded;function oS(e){var t;return Ct().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.feedback,r.next=3,(0,Er.put)(nS({feedback:t}));case 3:return r.next=5,(0,Er.delay)(2500);case 5:return r.next=7,(0,Er.put)(nS({feedback:void 0}));case 7:case"end":return r.stop()}}),ZE)}function aS(){var e,t,r;return Ct().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Er.actionChannel)(rS);case 2:e=n.sent;case 3:return n.next=6,(0,Er.take)(e);case 6:return t=n.sent,r=t.payload,n.next=10,(0,Er.call)(oS,{payload:r});case 10:n.next=3;break;case 12:case"end":return n.stop()}}),eS)}const cS=e({},kE.FEEDBACK_SUCCEEDED,(function(e,t){var r=t.payload.feedback;return $E($E({},e),{},{feedback:r})}));var sS=y(655);function iS(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var uS=y(439).t,lS=Ct().mark(OS),dS=Ct().mark(hS);function pS(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return fS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fS(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function fS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ES(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?_S(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var SS=function(e,t){var r,n,o=t.conversation,a=t.read,c=t.pinned,s=t.offer,i=t.status,u=t.userId,l=t.flag,d=t.cardId,p=t.mute;switch(e){case"conversations":r=l?{flag:l}:i?{status:i}:a?{last_read_message_id:o.latest_message_id,unread_count:0}:{unread_count:1},void 0!==c&&(r={pinned:c}),void 0!==p&&(r={mute:p}),n=o.id;break;case"offers":r={status:i},n=s.id;break;case"users":r={distribution_status:i},n=u;break;case"rateCards":r={status:i},n=d}return Hr({name:e,id:n,record:r})};function OS(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,m,g,b,y,R,D,C,I,P,w,N,U,x,k,M,L,j,G,F,H,V,B,Y,W,Q,q,K,z,X,J,$,Z,ee,te,re,ne,oe,ae,ce,se,ie,ue,le,de,pe,fe,_e,Ee,Se,Oe,he;return Ct().wrap((function(ve){for(;;)switch(ve.prev=ve.next){case 0:return t=e.type,r=e.payload,ve.next=3,(0,Er.select)(Nn);case 3:return n=ve.sent,ve.next=6,(0,Er.select)(Ns);case 6:if(o=ve.sent,"notification"!==t){ve.next=301;break}if(c=(a=r).type,s=a.user_id,i=a.from_id,u=a.content,l=u.flag,d=u.status,p=u.card_id,f=u.offer_id,_=u.shop_id,E=u.request_id,S=u.conversation_id,O=u.conversation_ids,h=void 0===O?[]:O,v=u.is_main_agent_change,m=u.msg_id,g=u.faq_session_id,b=u.expiry_time,y=u.is_auto_update,R={},D={},!S){ve.next=17;break}return ve.next=14,(0,Er.select)(ti(S));case 14:R=ve.sent,ve.next=22;break;case 17:if(!f){ve.next=22;break}return ve.next=20,(0,Er.select)(lE);case 20:C=ve.sent,D=C[f];case 22:return I=R&&n===s,ve.next=25,(0,Er.select)(Bs);case 25:P=ve.sent,w="Unread"===P,ve.t0=c,ve.next=ve.t0===Wu.MARK_AS_READ?30:ve.t0===Wu.MARK_AS_UNREAD?59:ve.t0===Wu.DELETE_CONVERSATION?65:ve.t0===Wu.UPDATE_OFFER_STATUS?84:ve.t0===Wu.UPDATE_CONVERSATION?98:ve.t0===Wu.UPDATE_USER_STATUS?126:ve.t0===Wu.UPDATE_CONVERSATION_FLAG?150:ve.t0===Wu.FORCE_LOGOUT?154:ve.t0===Wu.UPDATE_RATING_CARD_STATUS?157:ve.t0===Wu.PIN_CONVERSATION?160:ve.t0===Wu.UNPIN_CONVERSATION?163:ve.t0===Wu.MASS_READ?169:ve.t0===Wu.MASS_UNREAD?179:ve.t0===Wu.MASS_PIN?189:ve.t0===Wu.MASS_UNPIN?195:ve.t0===Wu.MASS_ACTIVATE?201:ve.t0===Wu.MASS_CLOSE?230:ve.t0===Wu.VIDEO_UPLOAD?249:ve.t0===Wu.MARK_AS_UNREPLIED||ve.t0===Wu.MARK_AS_REPLIED?258:ve.t0===Wu.CHAT_DELETE_MSG?266:ve.t0===Wu.FAQ_SESSION_UPDATE?287:ve.t0===Wu.MUTE_CONVERSATION?291:ve.t0===Wu.UNMUTE_CONVERSATION?295:299;break;case 30:if(!I){ve.next=58;break}return ve.next=33,(0,Er.select)((function(e){return e.conversationReducer}));case 33:return N=ve.sent,U=N.conversationMark,x="api"===U[S],ve.next=38,(0,Er.put)(Mi({conversationId:S,markType:x?"":"socket"}));case 38:return ve.next=40,(0,Er.select)(Cs);case 40:if(k=ve.sent,M=k.findIndex((function(e){return e===E})),-1===M){ve.next=51;break}return Hv(jv.READ_SOCKET,Date.now()-E),ve.next=46,(0,Er.select)(Is);case 46:return L=ve.sent,M>0&&(L+=M),k=k.slice(M+1),ve.next=51,(0,Er.put)(Li({requestIds:k,count:L}));case 51:if(x){ve.next=58;break}if(!R.unread_count){ve.next=58;break}return ve.next=56,(0,Er.put)(SS("conversations",{conversation:R,read:!0}));case 56:return ve.next=58,(0,Er.put)(Tn({type:pn.MARK_AS_READ,conversation:R}));case 58:return ve.abrupt("break",299);case 59:if(w&&(I=R&&n===s),!I){ve.next=64;break}if(0!==R.unread_count){ve.next=64;break}return ve.next=64,(0,Er.put)(Tn({type:pn.MARK_AS_UNREAD,conversation:R}));case 64:return ve.abrupt("break",299);case 65:return ve.next=67,oa().put(ca().deleteConversationMessageHash({payload:{conversationId:S},isLazy:!0}));case 67:return ve.next=69,(0,Er.put)(gE({conversationId:S}));case 69:return ve.next=71,(0,Er.put)(Di({conversationId:S}));case 71:return ve.next=73,(0,Er.put)(Vr({name:"conversations",id:S}));case 73:return ve.next=75,(0,Er.select)(As);case 75:if(!(ve.sent.length<20)){ve.next=79;break}return ve.next=79,(0,Er.put)(Ii({direction:"older"}));case 79:if(!R){ve.next=83;break}return ve.next=83,(0,Er.put)(Tn({type:pn.DELETE_CONVERSATION,conversation:R}));case 83:return ve.abrupt("break",299);case 84:if(!D||!d||d===A.OfferStatus.PENDING){ve.next=97;break}return j=r.conversation_id,ve.next=88,(0,Er.select)(ti(j));case 88:return G=ve.sent,ve.next=91,(0,Er.put)(SS("offers",{offer:D,status:d}));case 91:return ve.next=93,(0,Er.put)(au({buyerId:D.buyer_id,shopId:D.shop_id}));case 93:if(F=G.latest_message_type,H=G.latest_message_content,F!==A.MessageTypes.MSG_TYPE_OFFER||(null==H?void 0:H.offer_id)!==f||(null==H?void 0:H.status)!==A.OfferStatus.PENDING){ve.next=97;break}return ve.next=97,(0,Er.put)(Hr({name:"conversations",id:j,record:{latest_message_content:ES(ES({},H),{},{status:d})}}));case 97:return ve.abrupt("break",299);case 98:if(!I){ve.next=125;break}return iS(R),ve.next=103,(0,Er.put)(SS("conversations",{conversation:R,status:d}));case 103:if("closed"!==d){ve.next=116;break}return ve.next=106,(0,Er.put)(QS({conversationId:S}));case 106:return ve.next=108,(0,Er.put)(gE({conversationId:S}));case 108:return ve.next=110,oa().call(ca().deleteFakingMessages({payload:{conversationId:S}}));case 110:return ve.next=112,(0,Er.put)(Tn({type:pn.CLOSE_CONVERSATION,conversation:R}));case 112:return ve.next=114,(0,Er.put)(SS("conversations",{conversation:R,read:!0}));case 114:ve.next=125;break;case 116:if("activated"!==d){ve.next=125;break}return o===S&&oa().put(ca().fetchMessagesRequested({payload:{conversationId:S,reset:!0},isLazy:!0})),ve.next=121,(0,Er.select)(As);case 121:if(!ve.sent.includes(S)){ve.next=125;break}return ve.next=125,(0,Er.put)(Ai({conversationId:S}));case 125:return ve.abrupt("break",299);case 126:return ve.next=128,(0,Er.select)(Oo);case 128:if(V=ve.sent,n!==s){ve.next=147;break}if(!y){ve.next=138;break}if(V){ve.next=136;break}return ve.next=134,(0,Er.put)(cn({type:"CONFIRM_MODAL",title:uS("modal.title.auto_switch_to_hangup"),actions:{confirm:{label:uS("common.close"),handler:function(){It.store.dispatch(sn()),It.store.dispatch(Ta({showAutoHangupModal:!1}))}}},additions:{content:uS("modal.content.auto_switch_to_hangup")}}));case 134:return ve.next=136,(0,Er.put)(Ta({showAutoHangupModal:!0}));case 136:ve.next=144;break;case 138:if("working"!==d){ve.next=144;break}if(!V){ve.next=144;break}return ve.next=142,(0,Er.put)(sn());case 142:return ve.next=144,(0,Er.put)(Ta({showAutoHangupModal:!1}));case 144:if(!v){ve.next=147;break}return ve.next=147,(0,Er.put)(cn({type:"CONFIRM_MODAL",title:uS("common.confirm"),additions:{content:{key:"modal.content.switch_status",vars:{status:uS("common.".concat("working"===d?"online":"offline"))}}},actions:{confirm:{label:uS("common.ok")}}}));case 147:return ve.next=149,(0,Er.put)(SS("users",{userId:s,status:d}));case 149:return ve.abrupt("break",299);case 150:if(!I){ve.next=153;break}return ve.next=153,(0,Er.put)(SS("conversations",{conversation:R,flag:l}));case 153:return ve.abrupt("break",299);case 154:return ve.next=156,(0,Er.call)(Os);case 156:return ve.abrupt("break",299);case 157:return ve.next=159,(0,Er.put)(SS("rateCards",{cardId:p,status:d}));case 159:return ve.abrupt("break",299);case 160:return ve.next=162,(0,Er.put)(SS("conversations",{conversation:R,pinned:!0}));case 162:return ve.abrupt("break",299);case 163:return ve.next=165,(0,Er.put)(SS("conversations",{conversation:R,pinned:!1}));case 165:if(o!==S||"Pinned"!==P){ve.next=168;break}return ve.next=168,(0,Er.put)(Vi());case 168:return ve.abrupt("break",299);case 169:if(!(B=h.length)){ve.next=178;break}return Y={},h.forEach((function(e){Y[e]={unread_count:0}})),ve.next=175,(0,Er.put)(Br({name:"conversations",records:Y}));case 175:return W=Object.assign({},{count:B,type:pn.MASS_READ},_?{shopId:_}:{}),ve.next=178,(0,Er.put)(Tn(W));case 178:return ve.abrupt("break",299);case 179:if(Q=h.length,!h.length){ve.next=188;break}return q={},h.forEach((function(e){q[e]={unread_count:1}})),ve.next=185,(0,Er.put)(Br({name:"conversations",records:q}));case 185:return K=Object.assign({},{count:Q,type:pn.MASS_UNREAD},_?{shopId:_}:{}),ve.next=188,(0,Er.put)(Tn(K));case 188:return ve.abrupt("break",299);case 189:if(!h.length){ve.next=194;break}return z={},h.forEach((function(e){z[e]={pinned:!0}})),ve.next=194,(0,Er.put)(Br({name:"conversations",records:z}));case 194:return ve.abrupt("break",299);case 195:if(!h.length){ve.next=200;break}return X={},h.forEach((function(e){X[e]={pinned:!1}})),ve.next=200,(0,Er.put)(Br({name:"conversations",records:X}));case 200:return ve.abrupt("break",299);case 201:return ve.next=203,(0,Er.put)(Ii({direction:"latest"}));case 203:if(!h.length){ve.next=229;break}J={},$=pS(h),ve.prev=207,$.s();case 209:if((Z=$.n()).done){ve.next=217;break}if(ee=Z.value,J[ee]={status:"activated"},o!==ee){ve.next=215;break}return ve.next=215,oa().put(ca().fetchMessagesRequested({payload:{conversationId:o,reset:!0},isLazy:!0}));case 215:ve.next=209;break;case 217:ve.next=222;break;case 219:ve.prev=219,ve.t1=ve.catch(207),$.e(ve.t1);case 222:return ve.prev=222,$.f(),ve.finish(222);case 225:return ve.next=227,(0,Er.put)(Br({name:"conversations",records:J}));case 227:return ve.next=229,(0,Er.call)(handleNotifyBatchConversation);case 229:return ve.abrupt("break",299);case 230:if(!h.length){ve.next=248;break}return te={},re=[],ve.next=236,(0,Er.select)(ni(h));case 236:return ne=ve.sent,oe=ne.filter((function(e){return(null==e?void 0:e.unread_count)>0})),h.forEach((function(e){te[e]={status:"closed",unread_count:0},re.push((0,Er.put)(QS({conversationId:e}))),oa().call(ca().deleteFakingMessages({payload:{conversationId:e}}))})),ve.next=241,(0,Er.all)(re);case 241:return ve.next=243,(0,Er.put)(Br({name:"conversations",records:te}));case 243:return ae=Object.assign({},{count:oe.length,type:pn.MASS_CLOSE},_?{shopId:_}:{}),ve.next=246,(0,Er.put)(Tn(ae));case 246:return ve.next=248,(0,Er.put)(yE({conversationIds:h}));case 248:return ve.abrupt("break",299);case 249:return ce=r.content,ve.next=252,(0,Er.select)(Yf(ce.vid));case 252:return se=ve.sent,ve.next=255,(0,Er.select)(Bf(se));case 255:return ve.sent.status||(ie=ce.status,ue=ce.vid,"successful"===ie&&(le=performance.getEntriesByName("REPORT_UPLOAD_".concat(ue),"mark")[0])&&(performance.mark("SERVICE_DONE_".concat(ue)),de=performance.getEntriesByName("SERVICE_DONE_".concat(ue))[0].startTime-le.startTime,performance.clearMarks("REPORT_UPLOAD_".concat(ue)),performance.clearMarks("SERVICE_DONE_".concat(ue)),Hv(jv.SERVICE_DONE,de)),oa().put(ca().updateVideoInfo({payload:{id:se,info:{status:ie,uploadResult:ce}}}))),ve.abrupt("break",299);case 258:if("Unreplied"!==P){ve.next=265;break}return ve.next=261,(0,Er.select)(As);case 261:if(!ve.sent.includes(S)){ve.next=265;break}return ve.next=265,(0,Er.put)(Hr({name:"conversations",id:S,record:{unreplied:c===Wu.MARK_AS_UNREPLIED}}));case 265:return ve.abrupt("break",299);case 266:return ve.next=268,(0,Er.select)(Wf(m));case 268:if(!(pe=ve.sent)){ve.next=281;break}return fe=pe.message_option|A.MessageOption.MSG_OPT_DELETE,_e=T("messages",ES(ES({},pe),{},{message_option:fe})),Ee=_e.entities,ve.next=274,(0,Er.put)(Fr({entities:Ee}));case 274:if(![A.MessageTypes.MSG_TYPE_VIDEO,A.MessageTypes.MSG_TYPE_IMAGE,A.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT].includes(pe.type)){ve.next=281;break}return ve.next=277,(0,Er.select)((function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.currentPreviewMediaId}));case 277:if(ve.sent!==m){ve.next=281;break}return ve.next=281,(0,Er.put)(tO());case 281:if(!R||R.latest_message_id!==m){ve.next=286;break}return Se=R.last_message_option|A.MessageOption.MSG_OPT_DELETE,Oe=T("conversations",ES(ES({},R),{},{last_message_option:Se,latest_message_content:{text:""},latest_message_from_id:i})),he=Oe.entities,ve.next=286,(0,Er.put)(Fr({entities:he}));case 286:return ve.abrupt("break",299);case 287:if(!I){ve.next=290;break}return ve.next=290,oa().put(ca().fetchFaqSessionSucceed({payload:{faqSessionId:g,sessionExpiryTime:b,conversationId:S}}));case 290:return ve.abrupt("break",299);case 291:if(!I){ve.next=294;break}return ve.next=294,(0,Er.put)(SS("conversations",{conversation:R,mute:!0}));case 294:return ve.abrupt("break",299);case 295:if(!I){ve.next=298;break}return ve.next=298,(0,Er.put)(SS("conversations",{conversation:R,mute:!1}));case 298:return ve.abrupt("break",299);case 299:ve.next=304;break;case 301:if("message"!==t){ve.next=304;break}return ve.next=304,(0,Er.call)(Nu,{payload:r,type:A.ConversationTypeEnum.Normal});case 304:case"end":return ve.stop()}}),lS,null,[[207,219,222,225]])}function hS(e){return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Er.call)(OS,e);case 2:case"end":return t.stop()}}),dS)}function vS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function TS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?vS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var mS=Ct().mark(DS),gS=Ct().mark(AS),bS=(0,dr.createActions)(e({},kE.UPDATE_NOTICES_COUNT,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"add":t;return{type:r}}))),yS=bS.updateNoticesCount,RS=function(){return(0,sS.eventChannel)((function(e){return Vt?Bt.on("message",(function(t){var r=t.data,n=r.message_type,o=r.message_content,a=r.worker_event,c=r.payload;e(a?{event:a,payload:void 0===c?{}:c}:{pushedType:n,payload:JSON.parse(o)})})):(Object.values(A.SocketConnectionStatus).forEach((function(t){Bt.on(t,(function(){return e({event:t})}))})),Bt.on("message",(function(t){if(t){var r=t.message_type,n=t.message_content;e({pushedType:r,payload:JSON.parse(n)})}}))),function(){}}))};function DS(e){var t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.event,r=e.pushedType,n=e.payload,!t){o.next=6;break}return o.next=4,(0,Er.call)(VE,{event:t,payload:n});case 4:o.next=11;break;case 6:if(!r){o.next=11;break}return o.next=9,(0,Er.put)(yS());case 9:return o.next=11,(0,Er.call)(hS,{type:r,payload:n});case 11:case"end":return o.stop()}}),mS)}function AS(){var e;return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Er.call)(RS);case 2:return e=t.sent,t.next=5,(0,Er.takeEvery)(e,DS);case 5:case"end":return t.stop()}}),gS)}const CS=e({},kE.UPDATE_NOTICES_COUNT,(function(e,t){var r=t.payload.type;return TS(TS({},e),{},{noticesCount:"add"===r?e.noticesCount+1:0})}));var IS=Ct().mark(PS);function PS(){var e,t,r,n;return Ct().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e="mini-session";case 1:return o.next=4,(0,Er.delay)(6e4);case 4:return o.next=6,(0,A.getItem)(e);case 6:return t=o.sent,o.next=9,(0,Er.select)(jS);case 9:return r=o.sent,o.next=12,(0,Er.select)(Is);case 12:if(n=o.sent,!t||!t.token){o.next=19;break}return Wt({noticesCount:r,readMissedCount:n}),o.next=17,(0,Er.put)(Li({count:0}));case 17:return o.next=19,(0,Er.put)(yS({type:"reset"}));case 19:o.next=1;break;case 21:case"end":return o.stop()}}),IS)}function wS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function NS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?wS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var US,xS=[aS,PS,AS],kS=(0,dr.handleActions)(NS(NS(NS({},zE),cS),CS),{reconnectFlag:!1,feedback:null,noticesCount:0}),MS=function(e){return e.socketReducer.feedback},LS=function(e){return e.socketReducer.reconnectFlag},jS=function(e){return e.socketReducer.noticesCount};function GS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var FS,HS=function(e){return e.mediaPreviewerReducer.mediaMap},VS=(0,Sr.createSelector)(Ns,HS,(function(e,t){return t[e]||[]})),BS=(0,dr.createActions)({ADD_MEDIA_FILE:function(e){return{medias:e.medias,conversationId:e.conversationId}},DELETE_MEDIA_FILE:function(e){return{id:e.id,conversationId:e.conversationId}},CLEAR_MEDIA_FILE:function(e){return{conversationId:e.conversationId}}}),YS=BS.addMediaFile,WS=BS.deleteMediaFile,QS=BS.clearMediaFile,qS=(e(US={},YS,ku),e(US,WS,Mu),e(US,QS,Lu),US),KS=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?GS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},qS),{mediaMap:{}});function zS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var XS,JS=function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.showMediaPreviewModal},$S=function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.currentPreviewMediaId},ZS=(0,dr.createActions)({SHOW_MEDIA_PREVIEW_MODAL_REQUESTED:function(e){return{messageId:e.messageId}},CLOSE_MEDIA_PREVIEW_MODAL_REQUESTED:function(){return{}}}),eO=ZS.showMediaPreviewModalRequested,tO=ZS.closeMediaPreviewModalRequested,rO=(e(FS={},eO,(function(e,t){return{showMediaPreviewModal:!0,currentPreviewMediaId:t.payload.messageId}})),e(FS,tO,(function(e){return{showMediaPreviewModal:!1,currentPreviewMediaId:null}})),FS),nO=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?zS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},rO),{showMediaPreviewModal:!1,currentPreviewMediaId:null}),oO=function(e){return e.translatePreferenceReducer.translationSettings},aO=function(e){return e.translatePreferenceReducer.fetchSettingsStatus},cO=function(e){return e.translatePreferenceReducer.updateStatus};!function(e){e.FETCH_SHOP_TRANSLATION_SETTINGS="FETCH_SHOP_TRANSLATION_SETTINGS",e.UPDATE_SHOP_TRANSLATION_SETTINGS="UPDATE_SHOP_TRANSLATION_SETTINGS",e.UPDATE_FETCH_STATUS="UPDATE_FETCH_STATUS",e.UPDATE_SETTING_PREFERENCE_STATUS="UPDATE_SETTING_PREFERENCE_STATUS",e.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD="UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD"}(XS||(XS={}));var sO,iO,uO=y(439).t;function lO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?lO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var pO=Ct().mark(mO),fO=Ct().mark(gO),_O=Ct().mark(bO),EO=(0,dr.createActions)((e(sO={},XS.FETCH_SHOP_TRANSLATION_SETTINGS,(function(e){return{shopId:e.shopId}})),e(sO,XS.UPDATE_SHOP_TRANSLATION_SETTINGS,(function(e){return{settings:e.settings}})),e(sO,XS.UPDATE_FETCH_STATUS,(function(e){return{status:e.status}})),e(sO,XS.UPDATE_SETTING_PREFERENCE_STATUS,(function(e){return{status:e.status}})),e(sO,XS.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD,(function(e){return{shopId:e.shopId,source:e.source,translationPreference:e.translationPreference,autoTranslationStatus:e.autoTranslationStatus,inTranslationFeedbackWhitelist:e.inTranslationFeedbackWhitelist}})),sO)),SO=EO.fetchShopTranslationSettings,OO=EO.updateShopTranslationSettings,hO=EO.updateFetchStatus,vO=EO.updateSettingPreferenceStatus,TO=EO.updateShopTranslationSettingsRecord;function mO(e){var t,r,n,o,a,c;return Ct().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.shopId,s.prev=1,s.next=4,(0,Er.put)(hO({status:"loading"}));case 4:return s.next=6,(0,Er.call)(uv,{subServer:"workbenchapi",parent:"shop",resource:"setting",params:{shop_id:t}});case 6:return r=s.sent,n=r.source,o=r.translation_preference,a=r.auto_translation_status,c=r.in_translation_feedback_whitelist,s.next=13,(0,Er.put)(hO({status:"succeed"}));case 13:return s.next=15,(0,Er.put)(TO({shopId:t,source:n,translationPreference:o,autoTranslationStatus:a,inTranslationFeedbackWhitelist:c}));case 15:s.next=21;break;case 17:return s.prev=17,s.t0=s.catch(1),s.next=21,(0,Er.put)(hO({status:"failed"}));case 21:case"end":return s.stop()}}),pO,null,[[1,17]])}function gO(e){var t,r,n,o;return Ct().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.settings,a.prev=1,a.next=4,(0,Er.put)(bh({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 4:return a.next=6,(0,Er.put)(vO({status:""}));case 6:return r=t.shop_id,n=t.auto_translation_status,o=t.translation_preference,a.next=9,(0,Er.call)(uv,{method:"PUT",subServer:"workbenchapi",parent:"shop",resource:"setting",payload:JSON.stringify(t)});case 9:return a.next=11,(0,Er.put)(TO({shopId:r,translationPreference:o,autoTranslationStatus:n}));case 11:return a.next=13,(0,Er.call)(uf,rf({toast:{show:!0,type:"success",message:uO("tips.set_preference_succeed")}}));case 13:a.next=21;break;case 15:return a.prev=15,a.t0=a.catch(1),a.next=19,(0,Er.put)(vO({status:"failed"}));case 19:return a.next=21,(0,Er.call)(uf,rf({toast:{show:!0,type:"fail",message:uO("tips.set_preference_failed")}}));case 21:case"end":return a.stop()}}),fO,null,[[1,15]])}function bO(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(SO,mO);case 2:return e.next=4,(0,Er.takeEvery)(OO,gO);case 4:case"end":return e.stop()}}),_O)}var yO=(0,dr.handleActions)((e(iO={},XS.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD,(function(e,t){var r=t.payload,n=r.shopId,o=r.source,a=r.translationPreference,c=r.autoTranslationStatus,s=r.inTranslationFeedbackWhitelist,i=dO({},e.translationSettings),u=i[n]||{};return i[n]=dO(dO({},u),{},{translationPreference:a,autoTranslationStatus:c}),o&&(i[n].source=o),s&&(i[n].inTranslationFeedbackWhitelist=s),dO(dO({},e),{},{translationSettings:i})})),e(iO,XS.UPDATE_FETCH_STATUS,(function(e,t){var r=t.payload.status;return dO(dO({},e),{},{fetchSettingsStatus:r})})),e(iO,XS.UPDATE_SETTING_PREFERENCE_STATUS,(function(e,t){var r=t.payload.status;return dO(dO({},e),{},{updateStatus:r})})),iO),{translationSettings:{},fetchSettingsStatus:"",updateStatus:""}),RO=[bO];function DO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function AO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?DO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var CO=Ct().mark(MO),IO=Ct().mark(LO),PO=Ct().mark(jO),wO=Ct().mark(GO),NO=Ct().mark(FO),UO=Ct().mark(HO),xO=Ct().mark(VO),kO=Ct().mark(BO);function MO(e){var t,r,n,o,a,c;return Ct().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.id,n=t.shopId,s.next=3,(0,Er.call)(uv,{resource:"products",id:r,params:{shop_id:n,need_cache:1,cache_expires:600},cleaner:NT});case 3:return o=s.sent,o=ce(o),a=T("products",o),c=a.entities,s.next=8,(0,Er.put)(Fr({entities:c}));case 8:return s.abrupt("return",o);case 9:case"end":return s.stop()}}),CO)}function LO(e){var t,r,n,o,a,c,s,i,u,l;return Ct().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,r=t.id,n=t.shopId,o=t.isChatbotOrder,d.next=3,(0,Er.select)(zs);case 3:return a=d.sent,d.next=6,(0,Er.call)(uv,{resource:"order",id:r,params:{shop_id:n}});case 6:return c=d.sent,d.next=9,(0,Er.select)(lo);case 9:return s=d.sent,i=We(c,n,a,!s||o),u=T("orders",i),l=u.entities,d.next=15,(0,Er.put)(Fr({entities:l}));case 15:return d.abrupt("return",i);case 16:case"end":return d.stop()}}),IO)}function jO(e,t,r,n,o){var a,c,s,i,u,l;return Ct().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(a=Array.isArray(e),c=a?e:[e],s=Array.from(new Set(c.map((function(e){return e.product_id})))),i=[],!a){d.next=19;break}return d.prev=5,d.next=8,(0,Er.call)(showProducts,{payload:{productIds:s,shopId:t}});case 8:i=d.sent,d.next=17;break;case 11:return d.prev=11,d.t0=d.catch(5),u=s.map((function(e){return(0,Er.call)(MO,{payload:{id:e,shopId:t}})})),d.next=16,(0,Er.all)(u);case 16:i=d.sent;case 17:d.next=23;break;case 19:return d.next=21,(0,Er.call)(MO,{payload:{id:e.product_id,shopId:t}});case 21:l=d.sent,i=[l];case 23:return d.abrupt("return",c.map((function(e){var t=i.find((function(t){return t.id===e.product_id}))||{};return Se(e,"list",r,n,t,o)})));case 24:case"end":return d.stop()}}),PO,null,[[5,11]])}function GO(e){var t,r,n,o,a,c,s,i,u,l,d;return Ct().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,r=t.id,n=t.shopId,p.next=3,(0,Er.select)(pE(r));case 3:return o=p.sent,p.next=6,(0,Er.select)(zs);case 6:return a=p.sent,p.next=9,(0,Er.select)(Jn);case 9:return c=p.sent,p.next=12,(0,Er.select)(zn);case 12:if(s=p.sent,!o||o.status===A.OfferStatus.PENDING){p.next=15;break}return p.abrupt("return",o);case 15:return p.next=17,(0,Er.call)(uv,{resource:"offers",id:r,params:{shop_id:n}});case 17:return i=p.sent,p.next=20,(0,Er.call)(jO,i,n,a,c,s);case 20:return u=p.sent,l=T("offers",u),d=l.entities,p.next=24,(0,Er.put)(Fr({entities:d}));case 24:return p.abrupt("return",u[0]);case 25:case"end":return p.stop()}}),wO)}function FO(e){var t,r,n,o,a,c,s,i,u;return Ct().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.shopId,r=e.id,l.next=3,(0,Er.select)(Nn);case 3:return n=l.sent,l.next=6,(0,Er.select)(Xn);case 6:return o=l.sent,a="vouchers_by_ids",l.next=10,(0,Er.call)(uv,{parent:"vouchers",resource:a,params:{ids:JSON.stringify([parseInt(r)]),shop_id:t,buyer_id:o?0:n}});case 10:if(c=l.sent,!(s=c[a])||!s.length){l.next=18;break}return s=s.map((function(e){return Re(e,!1)})),i=T("vouchers",s),u=i.entities,l.next=17,(0,Er.put)(Fr({entities:u}));case 17:return l.abrupt("return",s[0]);case 18:case"end":return l.stop()}}),NO)}function HO(e){var t,r,n,o,a,c,s,i,u;return Ct().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,r=t.id,n=t.creatorId,l.next=3,(0,Er.select)(Qs);case 3:return o=l.sent,a=o.shop_id,l.next=7,(0,Er.call)(uv,{parent:"feed",resource:"stories",params:{ids:JSON.stringify([r]),creator:n,shop_id:a,need_cache:1,cache_expire:1800}});case 7:return c=l.sent,s=c.stories[0],i=T("feedStories",s),u=i.entities,l.next=12,(0,Er.put)(Fr({entities:u}));case 12:return l.abrupt("return",s);case 13:case"end":return l.stop()}}),UO)}function VO(e){var t,r,n,o,a;return Ct().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.cartItems,r=e.shopId,c.next=3,(0,Er.call)(uv,{parent:"product",resource:"get",method:"POST",payload:JSON.stringify({shop_id:r,items:t.slice(0,4)})});case 3:return n=c.sent,o=n.get,a=void 0===o?[]:o,c.abrupt("return",a.map(_e));case 7:case"end":return c.stop()}}),xO)}function BO(e){var t,r,n,o,a,c,s,i;return Ct().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,r=t.ids,n=t.id,u.next=3,(0,Er.select)(Qs);case 3:return o=u.sent,a=o.shop_id,c=o.id,u.next=7,(0,Er.call)(uv,{parent:"conversation",resource:"messages",params:{ids:"[".concat(r.join(","),"]"),shop_id:a}});case 7:return s=u.sent,i=s.messages,u.next=11,(0,Er.call)(xl,{list:Qt(i),conversationId:c,handleSave:function(e){var t=e.records;Object.keys(t).forEach((function(e){var r=i.findIndex((function(t){return t.id===e}));if(r>=0){var n=i[r];i.splice(r,1,AO(AO({},n),{},{content:AO(AO({},n.content),t[e])}))}}))}});case 11:return u.abrupt("return",{id:n,messages:i});case 12:case"end":return u.stop()}}),kO)}var YO=Ct().mark(qO);function WO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function QO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?WO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qO(e,t,r){var n,o,a,c,s=arguments;return Ct().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=s.length>3&&void 0!==s[3]?s[3]:[],o=e,a=[],c=[],Array.isArray(e)&&(o=(T(r,e).entities||{})[r]||{}),t.forEach((function(e){var t=e.id,s=o[t];s?["conversations","agentConversations"].includes(r)&&(void 0!==s.faking||s.latestMessageStatus||void 0!==s.unreplied)?(delete(e=QO(QO({},s),e)).faking,delete e.latestMessageStatus,delete e.unreplied,c.push(e)):(n.length&&n.forEach((function(t){e[t]=s[t]})),a.push((0,Er.put)(Hr({name:r,id:t,record:QO({},e)})))):c.push(e)})),c.length&&a.push((0,Er.put)(Fr({entities:T(r,c).entities}))),i.next=9,(0,Er.all)(a);case 9:case"end":return i.stop()}}),YO)}var KO,zO,XO=function(e){return e.voucherReducer.status},JO=(0,Sr.createSelector)(Dr,(function(e){return e.voucherReducer.voucherIds}),(function(e,r){return((0,t.denormalize)(r,[h],{vouchers:e})||[]).filter((function(e){return e}))})),$O=function(e){return(0,Sr.createSelector)(Dr,(function(r){return(0,t.denormalize)(e,h,{vouchers:r})}))},ZO={currentPage:0,perPage:20,total:0,hasMore:!0},eh=function(e){return(0,Sr.createSelector)(yr,(function(r){return(0,t.denormalize)(e,i,{orders:r})}))},th=function(e){return(e.orderReducer||{}).cancelReasons},rh=function(e){return e.orderReducer.status},nh=function(e){return e.orderReducer.fetchResult},oh=function(e,t){return(0,Sr.createSelector)(nh,(function(r){return r["".concat(e,"_").concat(t)]||{pagination:ZO,result:[]}}))},ah=(0,Sr.createSelectorCreator)(Sr.defaultMemoize,(function(e,t){return e.id===t.id}))(Qs,(function(e){return e})),ch=(0,Sr.createSelector)(nh,ah,yr,(function(e,r,n){var o=r.shop_id,a=r.to_id,c=e["".concat(o,"_").concat(a)];if(!c)return[];var s=c.result||[];return(0,t.denormalize)(s,[i],{orders:n})})),sh=function(e){return(0,Sr.createSelector)(Rr,(function(r){return(0,t.denormalize)(e,u,{products:r})}))},ih=function(e){return(0,Sr.createSelector)(Rr,(function(r){return(0,t.denormalize)(e,[u],{products:r})}))},uh={currentPage:0,perPage:20,total:0,hasMore:!0},lh=function(e){return e.productReducer.fetchResult},dh=function(e){return e.productReducer.allProductsSearchStatus},ph=function(e){return e.productReducer.sellerRecommendProducts},fh=function(e){return e.productReducer.systemRecommendProducts},_h=function(e){return e.productReducer.groups},Eh=function(e){return e.productReducer.systemRecommendProductsFetchStatus},Sh=function(e){return e.productReducer.sellerRecommendProductsFetchStatus},Oh=function(e){return e.productReducer.fetchGroupsStatus},hh=function(e){return(0,Sr.createSelector)(lh,(function(t){return t[e]||{pagination:uh,result:[]}}))},vh=(0,Sr.createSelector)(lh,oi,Rr,(function(e,r,n){var o=e[r];if(!o)return[];var a=o.result||[];return(0,t.denormalize)(a,[u],{products:n})})),Th=function(e){return e.reportReducer.beingReported};!function(e){e.REPORT_REQUESTED="REPORT_REQUESTED",e.CLEAR_REPORT_REQUESTED="CLEAR_REPORT_REQUESTED"}(KO||(KO={}));var mh,gh=(0,dr.createActions)((e(zO={},KO.REPORT_REQUESTED,(function(e){return{event_time:e.event_time,url:e.url}})),e(zO,KO.CLEAR_REPORT_REQUESTED,(function(){return{}})),zO)),bh=gh.reportRequested,yh=gh.clearReportRequested,Rh=Ct().mark(Ih),Dh=Ct().mark(Ph);function Ah(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ch(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ah(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ah(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ih(){var e,t;return Ct().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,Er.select)(Th);case 2:if(!(e=r.sent).length){r.next=10;break}return t=Qt(e),r.next=7,(0,Er.put)(yh());case 7:return t.sort((function(e,t){return Number(t.event_time)-Number(e.event_time)})),r.next=10,(0,Er.call)(uv,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_active",payload:JSON.stringify(Ch(Ch({},t[0]),{},{platform_id:(0,A.isVisitingCNSC)()||(0,A.isVisitingKRSC)()?2:1}))});case 10:case"end":return r.stop()}}),Rh)}function Ph(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,(0,Er.delay)(6e4);case 3:return e.next=5,Ih();case 5:e.next=0;break;case 7:case"end":return e.stop()}}),Dh)}const wh=(e(mh={},KO.REPORT_REQUESTED,(function(e,t){var r=t.payload,n=r.event_time,o=r.url;return{beingReported:[].concat(Qt(e.beingReported),[{event_time:n,url:o}])}})),e(mh,KO.CLEAR_REPORT_REQUESTED,(function(e){return{beingReported:[]}})),mh);function Nh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Uh=[Ph],xh=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Nh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},wh),{beingReported:[]}),kh=Ct().mark(Bh);function Mh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lh(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Mh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var jh,Gh=48e4,Fh=6e4,Hh=!1,Vh="9223372036854775807";function Bh(){var e,t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S;return Ct().wrap((function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=3,(0,Er.delay)(Fh);case 3:return e=void 0,e="mini-session",O.next=7,(0,A.getItem)(e);case 7:if(!(t=O.sent)||!t.token){O.next=58;break}return O.prev=9,O.next=12,(0,Er.select)((function(e){return e.conversationReducer}));case 12:return r=O.sent,n=r.maxLatestReceivedMessageId,o=r.maxLatestTimestampNano,O.next=17,(0,Er.select)(Xn);case 17:return a=O.sent,O.next=20,(0,Er.select)(Bs);case 20:return c=O.sent.toLowerCase(),s=!a&&["all","unread"].includes(c),i=["pinned","unread"].includes(c),u={},s?u.last_timestamp_nano=o||Vh:u.last_message_id=n||Vh,u.last_unread_count_sync=Hh,O.next=28,(0,Er.spawn)(uv,{method:"POST",resource:"user",suffix:"sync",params:Lh({},u)});case 28:return l=O.sent,O.next=31,(0,Er.join)(l);case 31:if(d=O.sent,p=d.have_new_msg,f=d.unread_count,_=d.current_version,Hh=!1,!p){O.next=44;break}return O.next=39,(0,Er.select)((function(e){return e.conversationReducer}));case 39:if(!(O.sent.syncFetchException<3)||i){O.next=44;break}return O.next=44,(0,Er.put)(Ii({direction:"latest",source:A.ConversationSource.SYNC}));case 44:if(!(f>-1)){O.next=53;break}return O.next=47,(0,Er.select)(dn);case 47:if((E=O.sent)===f){O.next=52;break}return O.next=51,(0,Er.put)(mn({count:f}));case 51:Hh=!0;case 52:a||(Fh=E!==f||p?6e4:Fh>=Gh?Gh:2*Fh);case 53:_&&_!==t.version&&(S=Object.assign({},t,{version:_}),(0,A.setItem)(e,S)),O.next=58;break;case 56:O.prev=56,O.t0=O.catch(9);case 58:O.next=0;break;case 60:case"end":return O.stop()}}),kh,null,[[9,56]])}function Yh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wh(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Yh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.REDIRECT_CONVERSATION_REQUESTED="REDIRECT_CONVERSATION_REQUESTED"}(jh||(jh={}));var Qh=Ct().mark(Jh),qh=Ct().mark($h),Kh=Ct().mark(Zh),zh=(0,dr.createActions)(e({},jh.REDIRECT_CONVERSATION_REQUESTED,(function(e){var t=e.userId,r=e.shopId,n=e.orderId,o=e.productId,a=e.message;return{userId:t,shopId:r,orderId:n,productId:o,message:void 0===a?"":a,entryPointType:e.entryPointType}}))),Xh=zh.redirectConversationRequested;function Jh(e){var t;return Ct().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=T("conversations",e),r.next=3,(0,Er.put)(Fr({entities:t.entities}));case 3:case"end":return r.stop()}}),Qh)}function $h(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T;return Ct().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,o=t.orderId,a=t.isFromSearch,c=void 0!==a&&a,s=t.productId,i=t.message,u=t.entryPointType,m.next=3,(0,Er.select)(As);case 3:return l=m.sent,m.next=6,(0,Er.call)(uv,{method:"POST",resource:"conversation",suffix:"redirection",payload:JSON.stringify({user_id:parseInt(r),shop_id:n})});case 6:if(d=m.sent,p=d.id,f=d.faking,_=d.mask,E=d.to_name,O=Wh(Wh({userId:r,shopId:n},S={orderId:o,productId:s}),{},{conversationId:d.id}),h=l.length,v=f||!l.includes(p),u&&oa().put(ca().setEntryPoint({payload:{type:u,conversationId:p}})),!v){m.next=21;break}return m.next=16,(0,Er.call)(Jh,d);case 16:if(!h){m.next=19;break}return m.next=19,(0,Er.put)(Ci({conversationId:p}));case 19:m.next=23;break;case 21:return m.next=23,(0,Er.put)(Hr({name:"conversations",id:p,record:{to_name:E,mask:_}}));case 23:if(!i){m.next=26;break}return m.next=26,(0,Er.put)(RE({draft:i,conversationId:p}));case 26:return m.next=28,(0,Er.call)(A.setItem,"mini-sc_redirect",O);case 28:return m.next=30,(0,Er.select)(Ns);case 30:if(m.sent===p&&!v){m.next=36;break}return m.next=34,(0,Er.put)(iu({conversationId:d.id}));case 34:return m.next=36,(0,Er.put)(Hi({conversation:d,sourceInfo:S}));case 36:return m.next=38,(0,Er.select)(io);case 38:if(m.sent){m.next=44;break}return T="",o?T=A.ChatbotFromType.OrderPage:s?T=A.ChatbotFromType.ProductPage:n&&(T=A.ChatbotFromType.ShopPage),m.next=44,(0,Er.call)(ka,{payload:{shouldShowWindow:!0,from:T}});case 44:if(h){m.next=47;break}return m.next=47,(0,Er.put)(Ci({conversationId:p}));case 47:return m.next=49,(0,Er.put)(ba({shouldShowConversationDetail:!0}));case 49:!c&&oa().put(ca().sendMessagesRequested({payload:{conversationId:d.id,messages:[{type:"text",content:{text:""},isFaking:!0}],more:{isFakingSource:!0}}}));case 50:case"end":return m.stop()}}),qh)}function Zh(){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Er.takeEvery)(Xh,$h);case 2:case"end":return e.stop()}}),Kh)}var ev=[Bh,Zh],tv=Ct().mark(rv);function rv(e,t,r){return Ct().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Er.takeEvery)(e,Ct().mark((function e(n){var o;return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.payload.id){e.next=5;break}return e.next=4,(0,Er.call)(t,n);case 4:return e.abrupt("return");case 5:return e.next=7,(0,Er.race)({task:(0,Er.call)(t,n),cancel:(0,Er.take)((function(e){return e.type===r.toString()&&e.payload.id===o}))});case 7:case"end":return e.stop()}}),e)})));case 2:case"end":return n.stop()}}),tv)}function nv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ov(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?nv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var av=(0,A.checkIsScChat)(),cv=(0,A.getRuntimeVersion)(),sv=function(){var e=window.__SERVICEDOWN_STATT_TIME__,t=window.__SERVICEDOWN_END_TIME__,r=void 0!==e&&void 0!==t,n=Math.ceil(Date.now()/1e3);return r&&n>=e&&n<=t},iv=function(e){var t=e.split("?")[0];return t.endsWith("conversations")||t.endsWith("conversation/list")};function uv(e){return lv.apply(this,arguments)}function lv(){return lv=Dt(Ct().mark((function t(r){var n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g,b,y,R,C,I,P,w,N,U,x,k,M,L,j,G;return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.shared,o=void 0!==n&&n,a=r.url,c=r.ssl,s=void 0===c||c,i=r.server,u=r.subServer,l=r.version,d=void 0===l?"v1.2":l,p=r.parent,f=r.parentId,_=r.resource,E=r.id,S=r.suffix,O=r.method,h=void 0===O?"GET":O,v=r.credentials,T=void 0===v?"include":v,m=r.extension,g=r.params,b=void 0===g?{}:g,y=r.payload,R=r.headers,C=void 0===R?{}:R,I=r.namespace,P=void 0===I?"mini":I,w=r.cleaner,N=void 0===w?function(e){return e}:w,U=r.fetcher,x="mini-session",k="mini-session",M=function(){return!!Vt&&It.store.getState().userReducer.isMainPage},L=function(){if("sc"===S)return E;if("auth"===_)return f;if(b.shop_id)return b.shop_id;if(y)try{return JSON.parse(y).shop_id}catch(e){}},j=function(){var t=Dt(Ct().mark((function t(r){var n,c,l,O,v,g,R,I,w,x,k,j,G,F,H,V,B,Y,W,Q,q,K,z,X,J,$,Z,ee,te,re,ne,oe,ae,ce;return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=wt().get("CTOKEN"),l=(c=r||{}).token,O=c.version,v=c.user,g=(v=void 0===v?{}:v).id,R=v.type,I=0,w=0,x=0,F="",H={},t.next=11,xt.getRegion("subaccount"===R,L());case 11:if(V=t.sent,B=l&&"include"===T||!i?{Authorization:"Bearer ".concat(l),"x-shop-region":V}:{},!i&&(i=(0,A.getApiServer)()),a?j=a:(Y=[s?"https:/":"http:/",i,u,d,P,p,f,_,E,S].filter(Boolean).join("/"),W=m?"".concat(Y,".").concat(m):Y,(Q=r&&r.user&&r.user.uid)&&(b._uid=Q),cv&&(b._v=cv),n&&(b.csrf_token=n),b._api_source=av?"sc":"pcmall",G=Object.entries(b).filter((function(e){var t=D(e,2),r=(t[0],t[1]);return r||0===r})).map((function(e){var t=D(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&"),j=[W,G].filter(Boolean).join("?"),q=[P,p,f,_,E,S].filter(Boolean).join("/"),K=m?"/".concat(q,".").concat(m):"/".concat(q),H._uid=Q||"",H._v=cv||"",z=Object.entries(H).map((function(e){var t=D(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&"),F=[K,z].join("?")),t.prev=15,!(void 0!==E&&parseInt(E)<=0&&!j.includes("message_shortcuts/group")||void 0!==f&&parseInt(f)<=0)){t.next=19;break}throw new Error;case 19:return X={},J=Date.now(),U&&($=lr({url:F,method:h,version:cv,token:B.Authorization||"",fromID:g,payload:y,timestamp:J}),X={ts:J,"x-v":O||"","x-s":ir(O,$)}),Z={method:h,credentials:T,headers:ov(ov(ov({},B),X),C),body:y},ee=U||Jt,t.next=27,ee(j,Z);case 27:te=t.sent,I=te.status,t.t0=I,t.next=204===t.t0?32:404===t.t0?34:452===t.t0?36:500===t.t0?38:502===t.t0?40:42;break;case 32:return re=null,t.abrupt("break",46);case 34:return re={message:"Resource not found"},t.abrupt("break",46);case 36:return re={message:"Tempory Error"},t.abrupt("break",46);case 38:return re={message:"Internal server error"},t.abrupt("break",46);case 40:return re={message:"Bad Gateway"},t.abrupt("break",46);case 42:return 200===I&&(w=parseInt(te.headers.get("total")),x=parseInt(te.headers.get("per-page"))),t.next=45,te.json();case 45:re=t.sent;case 46:if([200,204].includes(I)&&"report_upload"===_&&y&&(ne=JSON.parse(y),oe=ne.vid,performance.mark("REPORT_UPLOAD_".concat(oe))),yt(I)||sv()||It.store.dispatch(uu({flag:!1,alert:!1,list:!1})),200!==I){t.next=53;break}return ae=re instanceof Array?e({total:w,perPage:x},_,re.map((function(e){return N(e,av)}))):N(re,av),o&&M()&&Bt.dispatch(A.CustomShareEvent.SHARE_API_DATA,ov({type:A.ShareDataType.UNREAD},"object"===Ze(ae)?ae:{res:ae})),U&&y&&(k=JSON.parse(y).request_id,(0,A.setItem)(k,J)),t.abrupt("return",ae);case 53:if(204!==I){t.next=55;break}return t.abrupt("return",null);case 55:if(!yt(I)){t.next=77;break}if(!sv()){t.next=63;break}throw iv(j)?It.store.dispatch(uu({list:!0,alert:!0})):It.store.dispatch(uu({flag:!0,alert:!0})),new(bt(I))(re.message,re.errors||re.error_code||re.errcode,re.data);case 63:if(It.store.dispatch(uu({flag:!1,list:!1,alert:!1})),[400,404].includes(I),![429,451,491,493].includes(I)){t.next=70;break}throw new(bt(I))(re);case 70:if(401!==I){t.next=74;break}It.store.dispatch(fr({resource:_})),t.next=77;break;case 74:throw(ce=new(bt(I))(re.message,re.errors||re.error_code||re.errcode,re.data))&&400===I&&(ce._type_="client"),ce;case 77:t.next=83;break;case 79:throw t.prev=79,t.t1=t.catch(15),I||(t.t1.offlineError=!0),t.t1;case 83:case"end":return t.stop()}}),t,null,[[15,79]])})));return function(e){return t.apply(this,arguments)}}(),!o||M()){t.next=8;break}return t.abrupt("return");case 8:G=null;try{G=A.LS.getItem(k,!0)}catch(e){G=null}if(G){t.next=14;break}return t.next=13,(0,A.getItem)(x);case 13:G=t.sent;case 14:return t.abrupt("return",j(G));case 15:case"end":return t.stop()}}),t)}))),lv.apply(this,arguments)}var dv,pv,fv,_v,Ev=function(e,t){if(window.requestIdleCallback)return window.requestIdleCallback(e,t);var r=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-r))}})}),1)},Sv=y(782),Ov=y(830),hv=y.n(Ov),vv=y(292),Tv=y.n(vv),mv={"18a6f08d7326025b60ded61f60c9ea20":"LOAD_HTML","0d2968a6996a60fee2db1270a70ef563":"LOAD_STATIC",ea02fc90bd3663f3179be7a1b7847a83:"APP_PREPARE","4e0b71ed91b3eacb1dfc4ec7f63b2966":"LOGIN_API","9d4a48b69fed6d1001e63ee668a05488":"LOGIN_SUCCEEDED","84fcedc144bfce212ae8db9f6ebb84ec":"SHOW_WEBCHAT"};dv={LOAD_HTML:"31b7f223943eee895738ce50e49a359a",LOAD_STATIC:"0ec7c5189cc4ada79908cfe5d6bd97ca",APP_PREPARE:"a61675f22b23600e51007c24a9b8aaf2",LOGIN_API:"75cbf76696b4f8d988de72cdfeb1877c",LOGIN_SUCCEEDED:"05c0e68ee42384c7e07e47fec4400e28",SHOW_WEBCHAT:"1b16553696a08e9f016235005a5a0678",VIDEO_UPLOAD:"334a26e8a6dc82c95a47430f8af2e198",SERVICE_DONE:"19f2ea17be2d1d80257667787e54c882",MESSAGE_SOCKET:"f76ebd29ea3ed4571c9ea48ca893ac14",READ_SOCKET:"37e5b36437f0166056d3312fcea2b592",LOGIN_FAILED:"df8a83f83c949bb6a2b84c6f0048e203",SOCKET_FAILED:"13ddf42d9169b2ce05feb84224d79057",SHARED_TABS:"94e8d83005c95982268ff1c8b036313e",CHATWS_SOCKET_FAILED:"9034ae776ecbdc29ec67fb0edf78011f"},pv={LOAD_HTML:"18a6f08d7326025b60ded61f60c9ea20",LOAD_STATIC:"0d2968a6996a60fee2db1270a70ef563",APP_PREPARE:"ea02fc90bd3663f3179be7a1b7847a83",LOGIN_API:"4e0b71ed91b3eacb1dfc4ec7f63b2966",LOGIN_SUCCEEDED:"9d4a48b69fed6d1001e63ee668a05488",SHOW_WEBCHAT:"84fcedc144bfce212ae8db9f6ebb84ec",VIDEO_UPLOAD:"cc0dbd7370b7ade934cfe7c01bbd4ae9",SERVICE_DONE:"26ba92fb54150fe3bd6f827bb08ce8c9",MESSAGE_SOCKET:"a01882e94fde5237ca815e13b0e2a88b",READ_SOCKET:"e46fdcb42cae43a7e6f49213f150fa8e",LOGIN_FAILED:"87df9f73fb8b93629ae8a08822cfcf77",SOCKET_FAILED:"3a74221d64cf853a5c3ca65c3c3339eb",SHARED_TABS:"22557ca0a2caca6bae43f1932f088d47",CHATWS_SOCKET_FAILED:"f729b9774aef5b67bfd37afc711bdd3f"},fv="b23651c629e54c7bc1c9a743f25dbb5825cb1ed4e7bb7f8a78cd788dfc769127",_v="2b74d02be173856bde260473166da16b83fcc18d18057ce8b4a73eab5f1c7280";var gv,bv={HTML_LOADED:"HTML_LOADED",STATIC_LOADED:"STATIC_LOADED",APP_PREPARED:"APP_PREPARED",LOGIN_API_RESPONSED:"LOGIN_API_RESPONSED",APP_RENDERING:"APP_RENDERING",RENDER_CONVERSATION_LIST:"RENDER_CONVERSATION_LIST",RENDER_MESSAGE_LIST:"RENDER_MESSAGE_LIST",RENDER_WELCOME_PAGE:"RENDER_WELCOME_PAGE"},yv={WELCOME_PAGE:"WELCOME_PAGE",MESSAGE_LIST:"MESSAGE_LIST",CONVERSATION_LIST:"CONVERSATION_LIST",APP:"APP"},Rv={TYPE_ERROR:"TypeError",RANGE_ERROR:"RangeError",SYNTAX_ERROR:"SyntaxError",REFERENCE_ERROR:"ReferenceError",SAGA_ERROR:"Saga Error",ERROR_BOUNDARY:"Error Boundary",PRELOAD_ERROR:"Preload Error",SOCKET_LOGIN_FAILED:"Socket Login Failed",LOGIN_ERROR:"Login Error",PARAMETER_ERROR:"Parameter Error",API_UNCAUGHT_ERROR:"Api Uncaught Error",API_CLIENT_ERROR:"Api Client Error"},Dv={TYPE_ERROR:"type_error",RANGE_ERROR:"range_error",SYNTAX_ERROR:"syntax_error",REFERENCE_ERROR:"reference_error",ERROR_BOUNDARY:"error_boundary",PRELOAD_ERROR:"preload_error",SOCKET_LOGIN_FAILED:"socket_login_failed",LOGIN_ERROR:"login_error",PARAMETER_ERROR:"parameter_error",API_CLIENT_ERROR:"api_client_error",API_UNCAUGHT_ERROR:"api_uncaught_error"};function Av(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cv(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Av(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Av(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}window.__CHANGE_FETCH__||(window.fetch=Kt(),window.__CHANGE_FETCH__=!0);var Iv,Pv,wv,Nv,Uv=function(e){gv=e},xv=!1,kv=location.host.includes("shopee.cn"),Mv=(0,A.checkIsScChat)(),Lv=[],jv="live"===(0,A.getRuntimeServer)()?dv:pv,Gv=function(){try{var e=performance.getEntriesByName(bv.HTML_LOADED,"mark")[0].startTime,t=performance.getEntriesByName(bv.STATIC_LOADED,"mark")[0].startTime,r=performance.getEntriesByName(bv.APP_PREPARED,"mark")[0].startTime,n=performance.getEntriesByName(bv.LOGIN_API_RESPONSED,"mark")[0].startTime,o=performance.getEntriesByName(bv.APP_RENDERING,"mark")[0].startTime;Lv.push({id:jv.LOAD_HTML,duration:window.__INDEX_HTML_LOADED__},{id:jv.LOAD_STATIC,duration:Math.floor(t-e)},{id:jv.APP_PREPARE,duration:Math.floor(r-t)},{id:jv.LOGIN_API,duration:Math.floor(n-r)},{id:jv.LOGIN_SUCCEEDED,duration:Math.floor(o-n)})}catch(e){}},Fv=function(e,t){try{var r=null,n=performance.getEntriesByName(bv.APP_RENDERING,"mark")[0].startTime;switch(e){case yv.WELCOME_PAGE:r=performance.getEntriesByName(bv.RENDER_WELCOME_PAGE,"mark")[0].startTime,Lv.push({id:jv.RENDER_WELCOME_PAGE,duration:Math.floor(r-n)});break;case yv.MESSAGE_LIST:r=performance.getEntriesByName(bv.RENDER_MESSAGE_LIST,"mark")[0].startTime,Lv.push({id:jv.RENDER_MESSAGE_LIST,duration:Math.floor(r-n)});break;case yv.CONVERSATION_LIST:r=performance.getEntriesByName(bv.RENDER_CONVERSATION_LIST,"mark")[0].startTime,Lv.push({id:jv.RENDER_CONVERSATION_LIST,duration:Math.floor(r-n)})}Lv.push(t),Ev(Vv,{timeout:2e3})}catch(e){}},Hv=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Lv.push({id:e,duration:t,extra:r}),Ev(Vv,{timeout:2e3})};function Vv(e){for(;(e.timeRemaining()>5||e.didTimeout)&&Lv.length;){var t=Lv.shift(),r=t.id,n=t.duration,o=t.extra;r&&Wv(r,n,o),"live"!==(0,A.getRuntimeServer)()&&mv[r]&&console.log("|-- 上报阶段: ",mv[r],", 耗时为: ".concat(n))}Lv.length&&Ev(Vv,{timeout:2e3})}var Bv,Yv=function(){if(!xv){var e=(0,A.getRuntimeServer)(),t="live"===e,r=(0,A.getRuntimeRegion)(),n=(0,A.getRuntimeVersion)();Iv=new Sv.MdapSdk({app_name:"minichat",secret_key:t?fv:_v,environment:e,region:r,app_version:n,sample:t?.2:1}),Pv=new(hv())({path:[/[\\/]webchat[\\/]api[\\/].*[\\/](login|(conversations[\\/](\d+)[\\/]messages)|conversations|orders_by_buyer_id|vouchers|products|items|(offer[\\/]given)|read|(video[\\/](in_whitelist|preupload|report_upload|upload_status)))[\\?]/,"/webchat/api/v1.2/messages"]}),wv=new(Tv())({path:[/.*[\\/]chateasy[\\/].*\.(js|css)/]}),Nv=new Sv.CustomPlugin({}),Iv.use(Pv),Iv.use(wv),Iv.use(Nv),xv=!0}};function Wv(e,t,r){xv||Yv();var n={point_id:e,data:{userType:gv,localOrCn:void 0!==Bv?Bv:Bv=kv&&"CN"!==(0,A.getRuntimeRegion)().toUpperCase()?"cn":"local",chatHost:Mv?"seller":"pcmall"}};t&&(n=Cv(Cv({},n),{},{duration:t})),r&&(n.data=Cv(Cv({},n.data),r)),Nv.sendData(n)}var Qv,qv=y(455),Kv=y.n(qv),zv=Ct().mark($v),Xv=[];Qv=[202,215];var Jv=function(e,t){var r=Qv.includes(e)?"c":"r",n=(t||"").toLocaleLowerCase(),o="".concat((0,A.getCDNUrl)(),"shopee-seller-live-sg/tsp/api/").concat(r,"_").concat(e,"_").concat(n,".json");return Kt()(o).then(function(){var e=Dt(Ct().mark((function e(t){return Ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};function $v(e){var t,r,n,o,a,c;return Ct().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.locale,r="live"===(0,A.getRuntimeServer)()||"live-test"===(0,A.getRuntimeServer)(),n=new(Kv())({name:"webchat"}),o={},s.next=6,n.create({locale:t,env:r?"live":"non-live",translation:{resources:Xv,collections:Qv}});case 6:if(a=s.sent,o=a.translation,!(0,A.checkEmptyObject)(o)){s.next=15;break}return c=[],Qv.concat(Xv).forEach((function(e){c.push(Jv(e,t))})),s.next=13,(0,Er.all)(c);case 13:s.sent.forEach((function(e){Object.assign(o,e)}));case 15:return s.abrupt("return",o);case 16:case"end":return s.stop()}}),zv)}var Zv=function(e){var t=e.previousConversationIds,r=e.fetchedConversationIds,n=e.direction,o=e.fakeConversationId,a=e.sortByWaitTime;switch(n){case"reset":if(o){var c=Array.isArray(r)?Qt(r):[];return c.unshift(o),c}return r;case"latest":return a?t.filter((function(e){return!r.includes(e)})).concat(r):r.concat(t.filter((function(e){return!r.includes(e)})));case"older":return t.concat(r.filter((function(e){return!t.includes(e)})));default:return r}};function eT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tT(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?eT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var rT=function(e,t,r){if(e){var n={};return e.forEach((function(e){n[e]=!0})),(0,A.simpleEqualCheck)(r.slice(0,A.persistLimit),e)?tT(tT({},t),{},{changed:!1}):{changed:!0,conversationIds:e,conversationIdsMap:n,lastConversationId:e[e.length-1]}}return null},nT=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||"number"!=typeof e.storedTimestamp)return!1;var r=18e4,n=18e5;return Date.now()<e.storedTimestamp+(t?r:n)},oT=new(y(187).EventEmitter),aT=!1,cT=null,sT=document.location,iT="".concat(sT.protocol,"//").concat(sT.host,"/favicon.ico");function uT(){var e="t=".concat(Date.now()),t=[iT,e].join("?");cT=setTimeout((function(){Kt()(t,{method:"GET"}).then((function(){clearTimeout(cT),aT=!1,window.dispatchEvent(new Event("judge-online"))})).catch((function(){uT()}))}),5e3)}function lT(){if(aT)return null;aT=!0,uT()}var dT,pT=(0,y(428).createBrowserHistory)({basename:"/chateasy"}),fT=function(){var e=pT.location,t=e&&e.pathname;return t&&t.startsWith("/")?t.split("/")[1]:t},_T=y(846);function ET(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ST(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ET(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ET(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var OT=function(t){var r={};for(var n in t)for(var o in t[n])r=ST(ST({},r),{},e({},o,{section:n,type:t[n][o]}));return r}({buyer_information_dropdown:{clickViewProfile:"more_view_profile",clickMoreReport:"more_report",clickBlockInProfile:"more_block"},buyer_information:{clickProfileMenus:"username_more_button",impressionProfileMenus:""},chat_more_dropdown:{clickClosedInProfile:"chat_more_close",markAsPinned:"pin_chat",markAsUnpinned:"unpin_chat",markAsRead:"mark_as_read",markAsUnread:"mark_as_unread",markAsDelete:"delete",markAsClose:"close",markAsRestart:"restart",markAsMute:"mute",markAsUnmute:"unmute"},conversation_window:{replyIcon:"reply_icon",deleteIcon:"delete_icon",repliedMessageBar:"replied_message_bar",repliedMessageBarCloseButton:"replied_message_bar_close_button",actionDragVideoInMediaPreivew:"",deletePreviewMediaInMediaPreivew:"",closePreviewMediaInMediaPreivew:"",impressionMediaInMediaPreivew:"preview_media",clickAddMediaInMediaPreivew:"preview_add_media",clickResendVideo:"resend_video",impressionVideoMessage:"video_play_thumbnail",impressionImageMessage:"qrcode_alert",clickCancelVideo:"cancel_video",clickAcceptOffer:"accept_offer",clickRejectOffer:"reject_offer",clickViewProductInMall:"view_in_mall",clickViewProductInSellerCenter:"view_in_seller_center",clickViewDetailInSellerCenter:"order_view_detail_button",clickHandleStoryMessage:"story",clickPlayInVideoMessage:"video_play_thumbnail",impressionResendVideo:"resend_video",clickPreviewQrcode:"open_qrcode_alert",clickOrderMessage:"order_message",clickProductMessage:"product_message",clickProductItemMessage:"item_collection_message",clickClaimVoucher:"voucher_claim",impressionPopupOrderCard:"popup_order_card",impressionOrderMessage:"order_message",impressionProductMessage:"product_message",impressionBundleDealCard:"bundle_deal_card",impressionVoucherCard:"claim_card",impressionProductListCard:"product_list_card",impressionCartCard:"cart_card",impressionRateCard:"rate_card",impressionProductCategoryCard:"product_category_card",impressionFlashSaleCard:"flash_sale_card",impressionOrderFromSourceInSpecialMessage:"order_message_source",impressionProductFromSourceInSpecialMessage:"product_message_source",clickVisitProductInSellerCenter:"product_message_source",clickVisitOrderInSellerCenter:"order_message_source",impressionOrClickUnreadBriefMessage:"latest_message",clickFlashSaleItemsDetail:"flash_sale_items",clickViewFlashSaleInMall:"flash_sale_button",clickViewBundleDealInMall:"bundle_deal_button",clickBundleDealDetail:"bundle_deal_items",clickCartButton:"cart_button",clickCartProduct:"cart_product",clickProductListMessage:"product_list_items",clickRateButton:"rate_button",clickRateProduct:"rate_product",impressionVoucherForReceiverInMinichat:"claim_card",impressionPopupProductCard:"popup_product_card"},conversation_window_pop_up:{clickCloseMediaPreviewModalFromX:"close_pop_up",clickCloseMediaPreviewModalFromBackground:"close_pop_up_background",clickPreviewLeftMedia:"left",clickPreviewRightMedia:"right",impressionAfterSwipeMedia:""},conversation_window_qrcode_pop_up:{impressionUnknowQrcode:"qrcode_alert",clickQrcodeToLearnMore:"learn_more",clickBackToChat:"back_to_chat",clickOpenQrcode:"open_image",impressionQrcode:""},conversation_window_video_pop_up:{actionFinishVideo:"video_end",clickSlideBar:"slide_bar",clickDownloadVideo:"download",clickVideoMinimize:"minimize",clickVideoExpand:"expand",impressionReloadVideoError:"reload_video",clickReloadVideo:"reload_video",clickStopVideo:"stop_video",clickRestartVideo:"restart_video"},voucher_information_tab:{impressionVoucherInWorkStation:"voucher_card"},order_information_tab:{clickViewOrderDetail:"order_view_detail",clickSendOrderLink:"order_sendlink"},chat_list_dropdown:{clickFilter:"filter",clickFilterAll:"filter_all",clickFilterUnreplied:"filter_unreplied",clickFilterUnread:"filter_unread",clickFilterPinned:"filter_pinned",clickFilterClosed:"filter_closed"},chat_list:{clickChatMore:"chat_more",clickChatUser:"chat_user"},shop_head_status_dropdown:{clickStatusOnlineButton:"status_online_button",clickStatusHangup:"status_hangup"},delete_confirmation_popup:{deleteConfirm:"delete_confirmation",cancelConfirm:"cancel_confirmation"},error_popup:{error:"error_popup"},product_card_pop_up:{clickSendPopupProductCard:"send",clickClosePopupProductCard:"close"},order_card_pop_up:{clickSendPopupOrderCard:"send",clickClosePopupOrderCard:"close"},order_card:{clickCopyOrderSN:"copy"}}),hT=(["message_shortcuts","auto_reply","notification","translation_assistant","timestamp","performance_data","login_status","faq_assistant","seller_recom"].reduce((function(t,r){return ST(ST({},t),{},e({},"click_".concat(r),{section:"",type:r}))}),{}),ST(ST({},OT),{},(e(dT={impressionMsgGamesFailBlock:{section:"conversation_window",type:"msg_games_fail_block"},impressionMsgGamesFailQuota:{section:"conversation_window",type:"msg_games_fail_quota"},impressionConversationCell:{section:"",type:"chat_conversation"},clickConversationCell:{section:"",type:"chat_conversation"},operateHints:{section:"message_toolbar",type:"shortcut_result_from_auto_popup"},clickEditShortcut:{section:"message_toolbar",type:"shortcut_button_draft"},operateSearchShortcuts:{section:"message_toolbar",type:"shortcut_result_from_search_available"},searchShortcutsFocus:{section:"message_toolbar",type:"shortcut_button"},impressionEmptySearchShortcuts:{section:"message_toolbar",type:"shortcut_result_from_search_empty"},selectShortcutFromShortcutButton:{section:"message_toolbar",type:"shortcut_result_from_shortcut_button"},clickMuteInProfile:{section:"personal_information_dropdown",type:"mute"},clickUnmuteInProfile:{section:"personal_information_dropdown",type:"unmute"},impressionMuteInProfile:{section:"personal_information_dropdown",type:"mute"},impressionUnmuteInProfile:{section:"personal_information_dropdown",type:"unmute"},impressionSafetyTip:{section:"conversation_window",type:"safety_tip"},clickSafetyTipLearnMore:{section:"safety_tip",type:"learn_more"},clickAddFromTemplate:{section:"message_shortcuts_detail_tab",type:"add_message_template"},actionAdjustMessageShortcuts:{section:"message_shortcuts_tab",type:""},actionAdjustMessageShortcutsDetail:{section:"message_shortcuts_detail_tab",type:""},impressionClickableCard:{section:"conversation_window",type:"clickable_message"},clickClickableCard:{section:"conversation_window",type:"clickable_message"},clickRateCardSubmit:{section:"evaluation_card",type:"evaluation_submit_button"},impressionRateCard:{section:"evaluation_card",type:""},impressionRateCardFeedback:{section:"evaluation_card_feedback",type:""},clickTranslationFeedback:{section:"",type:"translation_feedback"},impressionFeedbackPopup:{section:"feedback_popup_window",type:"translation_feedback"},clickFeedbackSubmit:{section:"feedback_popup_window",type:"feedback_submit_button"},impressionFeedbackMore:{section:"feedback_popup_window",type:"feedback_tell_us_more"},clickSendMessageButton:{section:"",type:"send_message_button"},clickRestartButton:{section:"",type:"restart_conversation"},clickStickerInToolbar:{section:"message_toolbar",type:"sticker_button"},clickImageInToolbar:{section:"message_toolbar",type:"image_button"},clickVideoInToolbar:{section:"message_toolbar",type:"video_button"},clickShortcutInToolbar:{section:"message_toolbar",type:"shortcut_button"},clickSendRatingCard:{section:"",type:"appraise_button"},clickVisitSellerCenterFromShopList:{section:"",type:"visit_seller_center"},clickBackChatFromShopList:{section:"",type:"view_message"},clickShopHeadStatus:{section:"",type:"shop_head_status"},viewPage:{section:"",type:""},impressionChatRoom:{section:"conversation_window",type:""},translationShowOriginal:{section:"",type:"show_original"},translationTryAgain:{section:"",type:"try_again"}},"clickShortcutInToolbar",{section:"message_toolbar",type:"shortcut_button"}),e(dT,"clickOrdersInToolbar",{section:"message_toolbar",type:"orders_button"}),e(dT,"clickProductsInToolbar",{section:"message_toolbar",type:"products_button"}),e(dT,"clickSearchNameResult",{section:"",type:"search_name_result"}),e(dT,"clickSearchName",{type:"search_name"}),e(dT,"impressionChatIcon",{type:"chat_icon"}),e(dT,"clickChatIcon",{type:"chat_icon"}),e(dT,"clickToWebchatButton",{type:"to_webchat_button"}),e(dT,"clickFoldButton",{type:"fold_button"}),e(dT,"clickUnFoldButton",{type:"unfold_button"}),e(dT,"clickCloseButton",{type:"close_button"}),e(dT,"impressionUnreadChange",{type:"chat_icon_status_change_to_with_unread_cnt"}),e(dT,"typeMessage",{type:"typing_message",section:"message_toolbar"}),dT)));function vT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var TT,mT=null,gT=function(e){e&&(mT=e)},bT=null,yT=function(){var t;if(t=(0,A.checkIsScChat)(),window.BITrack)bT=window.BITrack;else{var r={appId:t?1:0,fetch:Kt(),source:"pc",platform:"pc",ua:navigator?navigator.userAgent||navigator.vendor:"",getCookies:wt().get,sendEventByInterval:!0,enableAutoTrack:!1};TT=(0,_T.createTrackingV3Sdk)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?vT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({locale:(0,A.getRuntimeRegion)(),env:(0,A.getRuntimeServer)()},r)),bT=TT.sync.bind(TT)}},RT=function(e){var t=e.trackerName,r=e.data,n=e.operation,o=void 0===n?A.TrackerOperation.CLICK:n,a=e.page,c=e.shopId;bT||yT();var s=function(e){var t=e.data,r=e.operation,n=e.page,o=e.shopId,a=hT[e.trackerName],c=a.section,s=void 0===c?"":c,i=a.type,u=void 0===i?"":i,l=mT||{},d=l.shop_id,p=void 0===d?"":d,f=l.role,_=void 0===f?"":f,E=l.id,S=void 0===E?"":E,O=Object.assign({},{shopid:p||o,account_type:_||"shopee_user",account_id:S},t);return{operation:r,page_section:s,target_type:u,page_type:n||"minichat_page",data:r===A.TrackerOperation.IMPRESSION?{viewed_objects:[O]}:O}}({trackerName:t,data:r,operation:o,page:a,shopId:c});bT({data:{type:"v3",timestamp:Date.now(),info:s}})},DT=[],AT=function e(t){for(;(t.timeRemaining()>5||t.didTimeout)&&DT.length;){var r=DT.shift();RT(r)}DT.length&&Ev(e,{timeout:200})},CT=function(e){DT.push(e),Ev(AT,{timeout:200})};function IT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function PT(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?IT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var wT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SG",t=arguments.length>1?arguments[1]:void 0,r=void 0!==t&&!t;return"TW"!==e||r?A.Currencies[e]:"NT$"},NT=function(e,t){return PT(PT({},e),function(e,t){var r=e.original_prices,n=e.actual_prices,o=D(r.map((function(r){return(0,A.formatPrice)(r,e.country,{},t)})),2),a=o[0],c=o[1],s=D(n.map((function(r){return(0,A.formatPrice)(r,e.country,{},t)})),2),i=s[0],u=s[1],l=a===c?a:"".concat(a," - ").concat(c),d=i===u?i:"".concat(i," - ").concat(u),p=a.includes("NaN")||i.includes("NaN");return{original_price_string:p||l===d?"":l,actual_price_string:p?"".concat(wT(e.country,t),"???"):d,storedTimestamp:Date.now()}}(e,t))};function UT(e){return function(){var t=Array.prototype.slice.call(arguments);return e.memoize=e.memoize||{},t in e.memoize?e.memoize[t]:e.memoize[t]=e.apply(this,t)}}})(),R})(),e.exports=n(r(82677),r(26842),r(58518),r(28366),r(36808),r(6222),r(94301),r(68214),r(52153),r(53053),r(34857),r(20573),r(847),r(17311),r(67429),r(46811),r(59065),r(67677),r(58397),r(98282),r(47190),r(97869))},26842:function(e,t,r){var n;n=(e,t,r,n)=>(()=>{var o={757:(e,t,r)=>{e.exports=r(666)},470:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,t:()=>u});var n=r(661),o=r.n(n),a=r(547),c=!1,s=function(e,t){c=!0;var r=t||(0,a.CE)();o().init({lng:r,fallbackLng:r,defaultNS:"common",keySeparator:!1,debug:!1,resources:e&&e.resources||{},interpolation:{prefix:"{",suffix:"}",escapeValue:!1},react:{wait:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"}})},i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common";c||s({resources:{}},e),o().changeLanguage(e),o().addResourceBundle(e,r,t,!0,!0)},u=o().t.bind(o())},547:(e,t,r)=>{"use strict";r.d(t,{An:()=>F,CE:()=>K,Db:()=>z,E3:()=>A,Ey:()=>C,Fy:()=>V,Ht:()=>R,I7:()=>k,I9:()=>X,IE:()=>W,Jy:()=>N,L6:()=>q,Ll:()=>x,Od:()=>M,S1:()=>i,S8:()=>y,Vm:()=>D,X7:()=>Q,Y8:()=>O,YH:()=>j,dV:()=>U,jz:()=>J,k2:()=>G,nr:()=>m,qk:()=>b,r:()=>Y,u7:()=>P,wK:()=>I,xC:()=>L,z$:()=>S});var n,o,a,c,s={sg:"en",ph:"en",tw:"zh-Hant",my:"ms-MY",th:"th-TH",vn:"vi-VN",id:"id-ID",br:"pt-BR",in:"hi",cn:"zh-CN",mx:"es-MX",co:"es-CO",cl:"es-CL",ar:"es-AR",pl:"pl",es:"es-ES",fr:"fr",us:"en",kr:"en"},i=function(e,t,r){n=e.toLowerCase(),o="liveish"===t?"live-test":"stable"===t?"test-stable":t,a=r,c=s[n]||"en"},u=["my","br","mx","co","ar"],l=["id","th"],d=["us"],p=function(e){return u.includes(e)?"com.".concat(e):l.includes(e)?"co.".concat(e):d.includes(e)?"com":e},f=function(e){return"tw"===e?"xiapi":e.toLowerCase()},_=function(e){return p(e)},E=function(){return"live"===o?"shopee":"".concat(o,".shopee")},S=function(){return"cn"===n},O=function(){return"kr"===n};function h(){return v()&&!S()}function v(){var e=window.location.hostname;return e&&e.includes("cn")}var T=function(e,t){return"seller"===e?"vn"!==t||h()?"seller":"banhang":e},m=function(e,t){var r=t?t.toLowerCase():n;return"".concat(T(e,r),".").concat(f(r),".").concat(E(),".").concat("cn")},g=function(e,t){var r,a=t?t.toLowerCase():n;return h()?m(e,a):"".concat(T(e,a),".").concat((r=window.location.hostname,r&&r.includes("shopeebrasil")?"live"===o?"shopeebrasil":"".concat(o,".shopeebrasil"):E()),".").concat(_(a))},b=function(e){return g("seller",e)},y=function(){return"live"===o?"seller.shopee.cn":"seller.".concat(o,".shopee.cn")},R=function(){return"live"===o?"seller.shopee.kr":"seller.".concat(o,".shopee.kr")},D=function(){return"".concat(b(),"/webchat/api")},A=function(){return"".concat(b(),"/api")},C=function(){return g("seller-push-ws")},I=function(){return g("chat-ws")},P=function(e){var t=e?e.toLowerCase():n;return"cn"!==t&&"kr"!==t||(t="my"),v()?"".concat(f(t),".").concat("live"===o?"":"".concat(o,".")).concat("xiapibuy.com"):"".concat(E(),".").concat(_(t))},w=["sg","my","th","ph","vn","id","tw","br"],N=function(e){var t=e?e.toLowerCase():n;if(S())return"https://s-cf-sg.shopeesz.com/file/";if(O())return"https://cf.shopee.sg/file/";var r=w.includes(t);return h()&&r?"https://s-cf-".concat(t,".shopeesz.com/file/"):"https://cf.shopee.".concat(p(t),"/file/")},U=function(e){var t=e?e.toLowerCase():n;return"tw"===t&&v()?"https://cvf.shopee.cn/file/":"https://cvf.shopee.".concat(p(t),"/file/")},x=function(e){var t=e?e.toLowerCase():n,r="test-stable"===o?"staging":o;return"".concat(v()?"deo.shopeesz.com":"deo.shopeemobile.com","/shopee").concat("live"===o?"":"/test","/shopee-sticker-").concat(r,"-").concat(t)},k=function(){return"https://subaccount.".concat(E(),".com/")},M=function(){return"https://deo.shopeemobile.com/shopee/shopee-seller-live-".concat(S()||O()?"sg":n,"/downloads/")},L=function(){return"https://".concat(g("seller"),"/webchat/conversations")},j=function(){return"https://".concat(g("seller"),"/webchat")},G=function(){var e="test-stable"===o?"stable":o;return"https://deo.".concat(h()?"shopeesz":"shopeemobile",".com/shopee/shopee-seller-").concat(e,"-").concat(n,"/")},F={sg:"https://help.shopee.sg/sg/s/article/What-happens-if-I-ve-accumulated-Penalty-Points-1542975961836",my:"https://help.shopee.com.my/my/s/article/What-is-Shopee-s-Seller-Penalty-Points-system-1542971633226",th:"https://help.shopee.co.th/th/s/article/%E0%B8%A3%E0%B8%B0%E0%B8%9A%E0%B8%9A%E0%B8%84%E0%B8%B0%E0%B9%81%E0%B8%99%E0%B8%99%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%9B%E0%B8%A3%E0%B8%B0%E0%B8%9E%E0%B8%A4%E0%B8%95%E0%B8%B4%E0%B8%A3%E0%B9%89%E0%B8%B2%E0%B8%99%E0%B8%84%E0%B9%89%E0%B8%B2%E0%B8%84%E0%B8%B7%E0%B8%AD%E0%B8%AD%E0%B8%B0%E0%B9%84%E0%B8%A3-1542967300368",tw:"https://help.shopee.tw/tw/s/article/%E5%A6%82%E6%9E%9C%E7%B4%AF%E7%A9%8D%E4%BA%86%E8%A8%88%E5%88%86-%E8%B3%A3%E5%AE%B6%E6%9C%83%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2%E7%9A%84%E9%99%90%E5%88%B6-1542986467060",vn:"https://banhang.shopee.vn/edu/article/237",ph:"https://help.shopee.ph/ph/s/article/How-does-the-Seller-Penalty-Points-system-work-1542963021404",id:"https://seller.shopee.co.id/edu/article/1762",in:"https://seller.shopee.in/edu/courseDetail/482"},H={sg:"7a48024995c847d9a4586bab9fde57a7",id:"888adc066bf3426a8c70227470281818",mx:"e58cb9c620f54aec9e18a01632c35c05",br:"d75e2dbb49594bd19d1ea83485339a45",co:"a503e7f7bc4849c0824985ddd9659d33",cl:"5484e709da71430cb8980abc5cef14f0",my:"b7a7ff2afd484f1dbddb3a922c7e90e7",th:"38e4b86fd0c04ae3b2c9200c7ea9c89e",ph:"bafd4812311d417c981d2690cda870bf",vn:"9e0e87184cf14246aabe6af0d78b2aa9",tw:"1bfa4a9834204eccb62858d0e2d9e083",pl:"3e8f2872acee4938951fa12e61f5b3f6",es:"756295fca7a04f0cb25cf51821ced04f"},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sg",t=H[e];return t?"https://help.shopee.".concat(p(e),"/portal/webform/").concat(t):"https://help.shopee.".concat(p(e),"/s/contactusform")},B={sg:"cc5c96e6af6140b6920f13c6fa67ddd1",my:"2e11e4a4fd554f4aaba90814987e8d3f",th:"fab4029ae0614fdd96021ba21bdd5d56",tw:"6331df0cc3e5409c85b5f3331e385a5c",vn:"1214504dda894592a1c7ef4236912f4d",ph:"bafd4812311d417c981d2690cda870bf",id:"13a6214dacf54eeb83cea7110c6adde6",br:"23b02efbc1254721ab69549e442a6466",mx:"e58cb9c620f54aec9e18a01632c35c05",co:"a503e7f7bc4849c0824985ddd9659d33",cl:"5484e709da71430cb8980abc5cef14f0",ar:"16e6e483bc5244d9946daf570c954dc3",pl:"3e8f2872acee4938951fa12e61f5b3f6",es:"756295fca7a04f0cb25cf51821ced04f"},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sg",t="";return t=["tw","vn"].includes(e)?"https://cs.shopee.".concat(p(e)):"https://help.shopee.".concat(p(e)),"".concat(t,"/portal/webform/").concat(B[e])},W=function(){return o},Q=function(){return n},q=function(){return a},K=function(){return c},z=function(e,t,r){var n=e||{},o=n.status,a=n.checkout_id,c=n.order_id,s=n.id,i=n.shop_id;return"unpaid"===o?"https://".concat(P(r),"/user/purchase/checkout/").concat(a,"/?shopid=").concat(i||t):"https://".concat(P(r),"/user/purchase/order/").concat(c||s,"/?shopid=").concat(i||t)},X=function(e,t,r,n){window.open("https://".concat(e?P(t):P(),"/product/").concat(n,"/").concat(r,"/"))},J=function(){return v()?"https://deo.shopeesz.com/shopee/":"https://deo.shopeemobile.com/shopee/"}},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof S?t:S,a=Object.create(o.prototype),c=new C(n||[]);return a._invoke=function(e,t,r){var n=d;return function(o,a){if(n===f)throw new Error("Generator is already running");if(n===_){if("throw"===o)throw a;return P()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=R(c,r);if(s){if(s===E)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var i=l(e,t,r);if("normal"===i.type){if(n=r.done?_:p,i.arg===E)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n=_,r.method="throw",r.arg=i.arg)}}}(e,r,c),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",_="completed",E={};function S(){}function O(){}function h(){}var v={};v[a]=function(){return this};var T=Object.getPrototypeOf,m=T&&T(T(I([])));m&&m!==r&&n.call(m,a)&&(v=m);var g=h.prototype=S.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(o,a,c,s){var i=l(e[o],e,a);if("throw"!==i.type){var u=i.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(i.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return E;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,E;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,E):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,E)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function I(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,c=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}return{next:P}}function P(){return{value:t,done:!0}}return O.prototype=g.constructor=h,h.constructor=O,O.displayName=i(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===O||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,i(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[c]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new y(u(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},b(g),i(g,s,"Generator"),g[a]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],s=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var i=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(i&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,E):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),E}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},994:t=>{"use strict";t.exports=e},602:e=>{"use strict";e.exports=t},661:e=>{"use strict";e.exports=r},349:e=>{"use strict";e.exports=n}},a={};function c(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return o[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{"use strict";c.r(s),c.d(s,{AVAILABLE_IMAGE_TYPE:()=>Ce,AVAILABLE_VIDEO_EXT:()=>Pe,AVAILABLE_VIDEO_TYPE:()=>Ie,AccountType:()=>_e,AgentOnlineStatus:()=>R,AlertType:()=>Ge,AllProductFilters:()=>se,ApiMessageTypes:()=>Zn,BATCH_OPERATE_MAX_SELECTION:()=>Q,BatchOperates:()=>q,CHAT_MIN_TEXT_BOX_HEIGHT:()=>S,ChatBotInteractionType:()=>Le,ChatBotMessageContentSource:()=>je,ChatbotFromType:()=>J,ConversationFilter:()=>K,ConversationSource:()=>ee,ConversationTab:()=>X,ConversationTypeEnum:()=>M,Currencies:()=>r,CustomShareEvent:()=>Ke,DataFetchStatus:()=>C,DiscountType:()=>L,EvaluationErrorCode:()=>u,EvaluationStatus:()=>i,FeedbackInfo:()=>E,FetchMessageStatus:()=>v,HALF_HOUR:()=>Yo,INVALID_PRICE:()=>mt,LS:()=>br,LogisticsLog:()=>ye,LogisticsStatus:()=>Re,MAX_IMAGE_SIZE:()=>Ne,MAX_MEDIA_NUM:()=>p,MAX_SHOWING_ITEM_COUNT:()=>ue,MAX_VIDEO_SIZE:()=>Ue,MAX_Z_INDEX:()=>Xe,MINI_MIN_TEXT_BOX_HEIGHT:()=>O,MessageErrorCode:()=>a,MessageFillStatus:()=>h,MessageOption:()=>e,MessageSendStatus:()=>o,MessageShortcutGroupType:()=>f,MessageSource:()=>te,MessageStatus:()=>d,MessageTypes:()=>n,MessagesRelatedKey:()=>T,NO_ACCESS_KEY:()=>xe,ONE_DAY:()=>Wo,OfferStatus:()=>U,OperationStatus:()=>I,OrderCancelReason:()=>Te,OrderItemStatus:()=>Oe,OrderListTabs:()=>ne,OrderListType:()=>ge,OrderPayMethod:()=>he,OrderStatusExt:()=>me,OrderTabStatus:()=>Ee,OrderTabStatusIndex:()=>Se,OrderType:()=>be,PERMISSION_DELETE_MESSAGE:()=>_,PredictionType:()=>$,ProductFiltersMap:()=>ce,ProductPromotionLabel:()=>le,ProductStatusUsingNumber:()=>oe,ProductStatusUsingString:()=>ae,PromotionStatus:()=>l,ReportType:()=>Z,RewardType:()=>j,SECOND_TO_MILLISECOND:()=>Bo,SERVER_ERROR_CAPACITY:()=>Ae,SERVER_ERROR_VALID_CONV_COUNT:()=>De,SPECIAL_VIDEO_MIME_TYPE:()=>we,SearchFilter:()=>We,SearchResultType:()=>Qe,SellerCancelOrderReason:()=>ve,ShareDataType:()=>ze,SocketConnectionStatus:()=>W,SocketToAlertType:()=>Fe,SortByFilterEnum:()=>z,StorageKey:()=>qe,SubAccountRole:()=>fe,SubAccountShopStatus:()=>pe,SwitchStatus:()=>w,SystemProductFilters:()=>ie,TrackerOperation:()=>Me,TranslationFeedbackQuality:()=>t,TranslationStatus:()=>N,UnreadSource:()=>re,UserLoginStatus:()=>P,VIEW_DETAIL_KEY:()=>ke,VoucherOperateType:()=>Y,VoucherStamp:()=>V,VoucherStatus:()=>H,VoucherTab:()=>G,VoucherTabIndex:()=>F,VoucherType:()=>B,WorkstationCommonKey:()=>He,WorkstationProductCommonKey:()=>Ve,WorkstationProductPanel:()=>de,WorkstationVoucherCommonKey:()=>Be,camelCase:()=>dt,cancelOrderPolicy:()=>qn.An,capitalizeFirstLetter:()=>Jt,changeLanguage:()=>ua.D,checkEmptyObject:()=>$e,checkEntryGuide:()=>Tr,checkHeaderGuide:()=>vr,checkImportTemplateGuide:()=>pr,checkIsScChat:()=>rt,checkMassToolGuide:()=>Er,checkMiniUnrepliedGuide:()=>dr,checkObjectId:()=>Ze,checkProductDeleted:()=>Go,checkProductInvalid:()=>Vo,checkRegionFilterGuide:()=>hr,checkReplyGuide:()=>Or,checkSearchGuilde:()=>Sr,checkTranslationGuilde:()=>fr,checkTranslationSettingsGuide:()=>_r,checkUnrepliedFilterGuide:()=>lr,convertBase64ToBlob:()=>pt,countingDown:()=>qo,customizeTime:()=>wt,debounce:()=>or,deepMerge:()=>ft,downloadVideoWithBlob:()=>Qn,encode:()=>st,escapeRegex:()=>fo,fillMessagePreview:()=>Cn,fillWithZero:()=>Ko,formatDiscount:()=>$o,formatMessageTime:()=>kt,formatPrice:()=>gt,formatTransifyKeyWithNumber:()=>Yt,getApiServer:()=>qn.Vm,getBrowserInfo:()=>Qt,getCDNUrl:()=>qn.jz,getCNSCSellerCenterUrl:()=>qn.S8,getCSChatServer:()=>qn.wK,getCancelOrderDisplayStatus:()=>Mo,getChatBotParams:()=>Rn,getCrmPreviewParams:()=>Dn,getCurrentTimestampString:()=>zo,getCustomMessageText:()=>pn,getFileServer:()=>qn.Jy,getFormattedData:()=>Bn,getFormattedTime:()=>Ut,getHasSameSourceAndTarget:()=>bn,getIsMessageShortcutKeywordValid:()=>uo,getIsMessageValidToDelete:()=>ro,getItem:()=>yr,getKRSCSellerCenterUrl:()=>qn.Ht,getLocaleText:()=>gn,getMallOrderUrl:()=>qn.Db,getMallUrl:()=>qn.u7,getMediaData:()=>Gn,getMessageIsRatecard:()=>mn,getMessageIsSend:()=>no,getMessageShortcutsKeywords:()=>lo,getOrderPayment:()=>So,getOrderStatusTransifyKey:()=>Eo,getPayMethod:()=>ko,getProductStatusTransifyKey:()=>jo,getPushServer:()=>qn.Ey,getReplyTrackerMessageType:()=>eo,getRuntimeLocale:()=>qn.CE,getRuntimeRegion:()=>qn.X7,getRuntimeServer:()=>qn.IE,getRuntimeVersion:()=>qn.L6,getSCApiServer:()=>qn.E3,getSellerCenterUrl:()=>qn.qk,getServiceLocale:()=>rr,getShopeeCNUrl:()=>qn.nr,getShopeeCustomerService:()=>qn.Fy,getSpammerPolicyUrl:()=>qn.r,getSystemMessageByLocale:()=>An,getTimestampNano:()=>Xo,getTranslateFileServer:()=>qn.k2,getTranslationLocale:()=>er,getUrlParam:()=>Wt,getVideoServer:()=>qn.dV,getVoucherCondition:()=>na,getVoucherTimeText:()=>oa,getWebChatPureUrl:()=>qn.YH,getWebChatUrl:()=>qn.xC,goToPcMall:()=>qn.I9,greaterThan:()=>tt,handleBigNumber:()=>_t,handleDisplayTranslation:()=>Zo,handleReportItem:()=>ia,handleReportItems:()=>sa,hasSelectShop:()=>ot,hasTargetMessageOption:()=>hn,hasTargetMessageOptions:()=>Tn,init:()=>qn.S1,isAbnormalProduct:()=>Fo,isDeletedMessage:()=>vn,isProductSoldout:()=>Ho,isValidBrowser:()=>nt,isValidMessageStatusToReply:()=>$n,isValidMessageTypeToReply:()=>zn,isVisitingCNSC:()=>qn.z$,isVisitingKRSC:()=>qn.Y8,itemSize:()=>Ye,makeSecurityTipsMessage:()=>yn,memFn:()=>cr,needWarnNotificationType:()=>m,persistLimit:()=>Ar,previewMessage:()=>On,redirectionWithAccess:()=>nr,removeItem:()=>Dr,removeItemFromArray:()=>Et,searchMessageShortcuts:()=>po,setItem:()=>Rr,simpleEqualCheck:()=>et,stickersURI:()=>qn.Ll,subAccountURL:()=>qn.I7,throttle:()=>ar,transPrice:()=>bt,transformVideoTime:()=>xt,unifyLocale:()=>Zt,updateTimeLocale:()=>Ct,validateDuration:()=>Mn,validateMediaDuration:()=>kn,validateTypeAndSize:()=>Wn,videoURL:()=>qn.Od,voucherIsExpired:()=>ta,voucherIsStockout:()=>ra});var e,t,r={SG:"$",TH:"฿",VN:"₫",ID:"Rp",TW:"$",MY:"RM",PH:"₱",BR:"R$",IN:"₹",CN:"¥",MX:"$",CO:"$",CL:"$",AR:"$",PL:"zł",ES:"€",FR:"€",KR:"₩",US:"$"},n={MSG_TYPE_TEXT:"text",MSG_TYPE_IMAGE:"image",MSG_TYPE_OFFER:"offer",MSG_TYPE_PRODUCT:"product",MSG_TYPE_ORDER:"order",MSG_TYPE_STICKER:"sticker",MSG_TYPE_NOTIFICATION:"notification",MSG_TYPE_VOUCHER:"voucher",MSG_TYPE_FEED_STORY:"feed_story",MSG_TYPE_ITEM_LIST:"item_list",MSG_TYPE_SHOPPING_CART:"shopping_cart",MSG_TYPE_FAQ:"faq",MSG_TYPE_FAQ_QUESTION:"faq_question",MSG_TYPE_FAQ_FEEDBACK:"faq_feedback",MSG_TYPE_FAQ_LIVEAGENT:"faq_liveagent",MSG_TYPE_FAQ_UNSUPPORTED:"faq_unsupported",MSG_TYPE_FAQ_FEEDBACK_PROMPT:"faq_feedback_prompt",MSG_TYPE_FAQ_LIVEAGENT_PROMPT:"faq_liveagent_prompt",MSG_TYPE_UNTATED_ORDER_REMINDER:"unrated_order_reminder",MSG_TYPE_FLASH_SALE:"flash_sale",MSG_TYPE_BUNDLE_DEAL:"bundle_deal",MSG_TYPE_BUNDLE_MESSAGE:"bundle_message",MSG_TYPE_OPTION_PACK:"option_pack",MSG_TYPE_SELECTED_OPTION:"selected_option",MSG_TYPE_ADD_ON_DEAL:"add_on_deal",MSG_TYPE_VIDEO:"video",MSG_TYPE_IMAGE_WITH_TEXT:"image_with_text",MSG_TYPE_RATE_CARD:"rating_card",MSG_TYPE_NEW_FAQ:"new_faq",MSG_TYPE_FAQ_CATEGORY_CHOICE:"faq_category_choice",MSG_TYPE_FAQ_QUESTION_LIST:"faq_question_list",MSG_TYPE_FAQ_TYPE_CHOICE:"faq_type_choice",MSG_TYPE_FAQ_CATEGORY_LIST:"faq_category_list",MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE:"faq_bot_request_text",MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE:"faq_bot_request_order",FAQ_TYPE_BOT_RESPONSE_MESSAGE:"faq_bot_response",MSG_TYPE_SECURITY_TIPS:"security_tips"},o={SENDING:1,FAILED:2,SUCCEED:3},a={FORBIDDEN:28,LIMITING:29,CUSTOM_ERROR:42,BLACKLIST:43,CANCEL_ORDER:44,UNVERIFIED_PHONE_NUMBER:45,EXCEED_DAILY_LIMIT:26,UNTRUSTED_NETWORK:46,NEED_CAPTCHA:47,DFP_ERROR:48,SPAMMER:49,FAQ_EXPIRED:50,FAQ_SESSION_OLD:51,DEFAULT:-1},i={UNRATED:"unrated",RATED:"rated",EXPIRED:"expired",INVALID:"invalid"},u={RATED:"rating_card_rated",EXPIRED:"rating_card_expired"},l={UPCOMING:"upcoming",ONGOING:"ongoing",EXPIRED:"expired"},d={CENSORED_BLACKLIST:"censored_blacklist",NORMAL:"normal"},p=9,f={PERSONAL:1,TEAM:2},_=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER,n.MSG_TYPE_ORDER,n.MSG_TYPE_PRODUCT];!function(e){e[e.MSG_OPT_NORMAL=0]="MSG_OPT_NORMAL",e[e.MSG_OPT_AUTO_REPLY=1]="MSG_OPT_AUTO_REPLY",e[e.MSG_OPT_BLOCKED=2]="MSG_OPT_BLOCKED",e[e.MSG_OPT_CENSORED_BLACKLIST=16]="MSG_OPT_CENSORED_BLACKLIST",e[e.MSG_OPT_CENSORED_WHITELIST=32]="MSG_OPT_CENSORED_WHITELIST",e[e.MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER=64]="MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER",e[e.MSG_OPT_IGNORE_UNREAD_FOR_SENDER=128]="MSG_OPT_IGNORE_UNREAD_FOR_SENDER",e[e.MSG_OPT_INVISIBLE_FOR_RECEIVER=256]="MSG_OPT_INVISIBLE_FOR_RECEIVER",e[e.MSG_OPT_INVISIBLE_FOR_SENDER=512]="MSG_OPT_INVISIBLE_FOR_SENDER",e[e.MSG_OPT_ADS=1024]="MSG_OPT_ADS",e[e.MSG_OPT_FAQ_SESSION=2048]="MSG_OPT_FAQ_SESSION",e[e.MSG_OPT_TRIGGER_FAQ=4096]="MSG_OPT_TRIGGER_FAQ",e[e.MSG_OPT_SOCIAL_MESSAGE=8192]="MSG_OPT_SOCIAL_MESSAGE",e[e.MSG_OPT_OFFWORK_AUTOREPLY=16384]="MSG_OPT_OFFWORK_AUTOREPLY",e[e.MSG_OPT_CANCELORDER_WARNING_SENT=32768]="MSG_OPT_CANCELORDER_WARNING_SENT",e[e.MSG_OPT_CANCELORDER_WARNING_RETRACT=65536]="MSG_OPT_CANCELORDER_WARNING_RETRACT",e[e.MSG_OPT_CANCELORDER_WARNING_NOT_SEND=66496]="MSG_OPT_CANCELORDER_WARNING_NOT_SEND",e[e.MSG_OPT_CHATBOT_SESSION=131072]="MSG_OPT_CHATBOT_SESSION",e[e.MSG_OPT_TRIGGER_CHATBOT=262144]="MSG_OPT_TRIGGER_CHATBOT",e[e.MSG_OPT_PRIVATE_MESSAGE=524288]="MSG_OPT_PRIVATE_MESSAGE",e[e.MSG_OPT_SILENT_FOR_SENDER=1048576]="MSG_OPT_SILENT_FOR_SENDER",e[e.MSG_OPT_DELETE=2097152]="MSG_OPT_DELETE",e[e.MSG_OPT_RECALL=8388608]="MSG_OPT_RECALL"}(e||(e={})),function(e){e[e.bad=1]="bad",e[e.average=2]="average",e[e.good=3]="good"}(t||(t={}));var E={IMPROVED:1,WRONG:2,OFFENSIVE:4},S=156,O=88,h={FILLED:"filled",FILLING:"filling",FAILED:"failed"},v={PRELOADING:"preloading",FETCHING:"fetching"},T={TIME_NOW:"timeNow",PRELOADED:"preloaded"},m=["game_quota_reach","game_block"];function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R,D,A={NORMAL:"normal",PENDING:"pending",SUCCEED:"succeed",FAILED:"failed"},C=y(y({},A),{},{INIT_PENDING:"pendingInit",INIT_FAILED:"failedInit",TEMPORY_ERROR:"temporyError"}),I=y(y({},A),{},{BLACKLIST_ERROR:"blacklistError",INTERNAL_SERVER_ERROR:"internalServerError"}),P={SUCCEED:"succeed",FORBIDDEN_ERROR:"forbidden",INTERNAL_SERVER_ERROR:"internalServerError",LOGOUT:"logout"},w={ENABLED:"enabled",DISABLED:"disabled",NO_PERSSION:"no_permission"},N={SUCCEED:"succeed",FAILED:"failed",HISTORY:"history",SHOW:"show",PENDING:"pending"},U={PENDING:"pending",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled"};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e[e.OFFLINE=-1]="OFFLINE",e[e.ONLINE=0]="ONLINE",e[e.HANGUP=1]="HANGUP"}(R||(R={}));var M,L={AMOUNT:"amount",PERCENTAGE:"percentage"},j={DISCOUNT:"discount",COIN_CASHBACK:"coin_cashback"},G={ONGOING:"ongoing",SCHEDULED:"scheduled"},F=(g(D={},G.ONGOING,0),g(D,G.SCHEDULED,1),D),H=k(k({},G),{},{FINISHED:"finished"}),V={USED:"used",EXPIRED:"expired",REDEEM:"redeem"},B={ITEM:"item",SHOP:"shop"},Y={DETAILS:"details",CLAIM:"claim",USE:"use"},W={CONNECT:"connect",CONNECT_ERROR:"connect_error",DISCONNECT:"disconnect",RECONNECT_ATTEMPT:"reconnect_attempt",RECONNECT_ERROR:"reconnect_error",RECONNECTING:"reconnecting",RECONNECT:"reconnect"},Q=50,q={PIN:"pin",UNPIN:"unpin",MARK_AS_READ:"mark_as_read",MARK_AS_UNREAD:"mark_as_unread",FORWARD:"forward"};!function(e){e[e.Normal=0]="Normal",e[e.Agent=1]="Agent"}(M||(M={}));var K,z,X={CUSTOMER:"customer",AGENT:"agent"};!function(e){e.All="All",e.Unread="Unread",e.Pinned="Pinned",e.Closed="Closed",e.Unreplied="Unreplied"}(K||(K={})),function(e){e[e.LatestMessage=0]="LatestMessage",e[e.LongestWaitTime=1]="LongestWaitTime"}(z||(z={}));var J,$,Z,ee={FILTER:1,SHOP:2,SHOP_LIST:3,SYNC:4,QUEUE:5,FAKING:6,LATEST:7,OLDER:8,DELETE:9,LOAD_MORE:10,SOCKET:11,PRELOAD:12},te={VIEW:1,FETCH:2,CLEAR_SEARCH:3,SHOW:4,SYNC:5,AUTO:6,SEND:7,UPDATE:8,CATCH:9},re={PRELOAD:1,QUEUE:2,RECEIVE_TOTAL:3,RECEIVE_SINGLE:4,SYNC:5},ne={MINE:"mine",HIS:"his"},oe={SOLD_OUT:-1,DELETED:0,NORMAL:1,REVIEWING:2,BANNED:3,INVALID:4,INVALID_HIDE:5,OFFENSIVE_HIDE:6,AUDITING:7,NORMAL_UNLIST:8,DELISTED:9},ae={DELETED:"deleted",BANNED:"banned",NORMAL:"normal",SOLD_OUT:"sold_out",DELISTED:"delisted"},ce={sales:"sold",recent:"mtime"},se={SALES:"sales",RECENT:"recent"},ie={RELATED:"related",TOP_RATED:"top_rated",FREQUENTLY_BOUGHT_TOGETHER:"frequently_bought_together"},ue=4,le={ADD_ON_DEAL:"add_on_deal",BUNDLE_DEAL:"bundle_deal",CAMPAIGN:"campaign",FLASH_SALES:"flash_sales",GIFT_WITH_PURCHASE:"gift_with_purchase",SHOW_DISCOUNT:"show_discount"},de={ALL:"All",SELLER_RECOMMENDATION:"Seller_Recommendation",SYSTEM_RECOMMENDATION:"System_Recommendation"},pe={UNACCESSIBLE:"unaccessible",NONE:"none",UNALLOCATED:"unallocated"},fe={MAIN_SUBACCOUNT:"main_subaccount",ADMIN_SUBACCOUNT:"admin_subaccount",NORMAL_SUBACCOUNT:"normal_subaccount"},_e={SELLER:"seller",SUBACCOUNT:"subaccount"},Ee={ALL:"all",UNPAID:"unpaid",TO_SHIP:"to_ship",SHIPPING:"shipping",COMPLETED:"completed",CANCELLED:"cancelled",REFUND:"refund"},Se={all:0,unpaid:1,to_ship:2,shipping:3,completed:4,cancelled:5,refund:6},Oe={DELETE:0,UNRATED:1,RATED:2,RETURNED:3,RETURN_RATED:4,CANCEL:5},he={PAY_CREDIT_CARD:1,PAY_BANK_TRANSFER:2,PAY_OFFLINE_PAYMENT:3,PAY_IPAY88:4,PAY_FREE:5,PAY_COD:6,PAY_ESUN:7,PAY_BILL_PAYMENT:8,PAY_INDOMARET:13,PAY_KREDIVO:14,PAY_NICEPAY_CC:15,PAY_AIRPAY:18,PAY_SHOPEE_WALLET:20,PAY_SHOPEE_WALLET_V2:27,PAY_AKULAKU:21,PAY_INSTALLMENT:23,PAY_IBANKING:29},ve=[{cancel_reason_code:1,transify_key:"common.order.cancel_reason.out_of_stock"},{cancel_reason_code:3,transify_key:"common.order.cancel_reason.undeliverable_area"}],Te={NONE:0,OUT_OF_STOCK:1,CUSTOMER_REQUEST:2,UNDELIVERABLE_AREA:3,CANNOT_SUPPORT_COD:4,LOST_PARCEL:5,SYSTEM_UNPAID:100,SYSTEM_UNDERPAID:101,SYSTEM_PAYMENT_REJECTED:102,LOGISTICS_REQUEST_CANCELED:200,LOGISTICS_PICKUP_FAILED:201,LOGISTICS_DELIVERY_FAILED:202,LOGISTICS_COD_REJECTED:203,BACKEND_LOGISTICS_NOT_STARTED:204,BACKEND_ESCROW_TERMINATED:300,BACKEND_INACTIVE_SELLER:301,BACKEND_SELLER_DID_NOT_SHIP:302,RULE_ENGINE_AUTO_CANCEL:400},me={ORDER_EXT_DELETE:0,ORDER_EXT_UNPAID:1,ORDER_EXT_PAID:2,ORDER_EXT_SHIPPED:3,ORDER_EXT_COMPLETED:4,ORDER_EXT_INVALID:6,ORDER_EXT_CANCEL_PROCESSING:7,ORDER_EXT_CANCEL_COMPLETED:8,ORDER_EXT_RETURN_PROCESSING:9,ORDER_EXT_RETURN_COMPLETED:10,ORDER_EXT_ESCROW_PAID:11,ORDER_EXT_ESCROW_CREATED:12,ORDER_EXT_ESCROW_PENDING:13,ORDER_EXT_ESCROW_VERIFIED:14,ORDER_EXT_ESCROW_PAYOUT:15,ORDER_EXT_CANCEL_PENDING:16},ge={PAID:1,UNPAID:2,COMPLETED:3,CANCELLED:4,SHIPPED:5,ALL:6,TOSHIP:7,TORECEIVE:8,TOPAY:9,TOSHIP_UNPROCESSED:10,TOSHIP_PROCESSED:11,RETURN:12,GROUP_BUY_ALL:13,GROUP_BUY_ONGOING:14,GROUP_BUY_COMPLETED:15,GROUP_BUY_INVALID:16},be={UNKNOWN:0,SIMPLE:1,ESCROW:2},ye={ORDER_DETAIL_SHIPPING_CONFIRMED:2,ORDER_DETAIL_SHIPPED:4,ORDER_DETAIL_RECEIVED:5,ORDER_DETAIL_CANCELED:6,ORDER_DETAIL_NOTIFY_SHIP:7},Re={LOGISTICS_NOT_STARTED:0,LOGISTICS_REQUEST_CREATED:1,LOGISTICS_PICKUP_DONE:2,LOGISTICS_PICKUP_RETRY:3,LOGISTICS_PICKUP_FAILED:4,LOGISTICS_DELIVERY_DONE:5,LOGISTICS_DELIVERY_FAILED:6,LOGISTICS_REQUEST_CANCELED:7,LOGISTICS_COD_REJECTED:8,LOGISTICS_READY:9,LOGISTICS_INVALID:10,LOGISTICS_LOST:11,LOGISTICS_PENDING_ARRANGE:12},De=-1,Ae=0,Ce=["image/png","image/jpeg","image/jpg"],Ie=["video/*",".flv",".3gp",".rm",".rmvb",".asf",".mp4",".webm"],Pe=["MP4","TS","FLV","WMV","ASF","RM","RMVB","MPG","MPEG","3GP","MOV","WEBM","AVI"],we=["application/vnd.rn-realmedia","application/vnd.rn-realmedia-vbr"],Ne=2097152,Ue=31457280,xe="common.no_sc_access",ke="conversation_detail.workstation.order_panel.manage",Me={CLICK:"click",IMPRESSION:"impression",ACTION_DRAG_VIDEO:"action_drag_video",DELETE_PREVIEW_MEDIA:"delete_preview_media",CLOSE_PREVIEW_MEDIA:"close_preview_media",ACTION_FINISH_VIDEO:"action_finish_video",VIEW:"view",ACTION_ADJUST_MESSAGE_SHORTCUT:"action_adjust_message_shortcut",ACTION_SELECT:"action_select",ACTION_SEARCH:"action_search",CLOSE:"close"},Le={MESSAGE:1001,SOLUTION:1002},je={HEAD_HOTQUESTION_SOURCE:1,SHORTCUT_SOURCE:2,CATEGORY_HOTQUESTION_SOURCE:3,FAQ_RECOMMEND_SOURCE:4,KB_INTENT_SOURCE:5,LIVEAGENT_RECOMMENDER_SOURCE:6};!function(e){e.LandingPage="SIPDirectChatFromChatLandingPage",e.ProductPage="SIPProductPage",e.OrderPage="SIPOrderPageFromBuyer",e.ShopPage="SIPShopPage"}(J||(J={})),function(e){e[e.Faq=0]="Faq",e[e.Intent=1]="Intent"}($||($={})),function(e){e[e.Categories=0]="Categories",e[e.OtherFaqType=1]="OtherFaqType",e[e.Intent=2]="Intent",e[e.Question=3]="Question",e[e.ChatWithSeller=4]="ChatWithSeller"}(Z||(Z={}));var Ge={error:"error",success:"success",normal:"normal",warn:"warn",info:"info"},Fe={pending:Ge.warn,error:Ge.error,resolved:Ge.success},He="conversation_detail.workstation.panel",Ve="".concat(He,".product"),Be="conversation_detail.workstation.voucher_panel",Ye={itemHeight:{conversationCellForBCSubAccount:94,conversationCell:72,shopCardCell:212,shopListCell:72,voucherCell:146,conversationShopListCell:60,dropdownShopListCell:44,contactCell:48},itemWidth:{shopCardCell:356}},We={ALL:"all",CUSTOMER:"customer",MESSAGES:"messages",AGENT:"agent"},Qe={NAME:"name",ORDER:"order",MESSAGE:"message",AGENT:"agent",AGENT_MESSAGE:"agentMessage"},qe={USERID:"__chat_userid__",LAST_ACTIVE:"last-active-time",MINI_ALERT:"mini-should-show-alert"},Ke={ACK:"ack",TAB_FOCUSED:"tabFocused",CALC_CONNECTIONS:"calcConnections",CLOSE_CONNECTION:"closeConnection",SHARE_API_DATA:"shareApiData"},ze={UNREAD:"unread",UPDATE_SETTING:"updateSetting",UPDATE_OFFLINE_SETTING:"updateOfflineSetting"},Xe=199999;function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}var $e=function(e){return!e||0===Object.keys(e).length},Ze=function(e,t){return null===e&&null===t||(null==e?void 0:e.id)===(null==t?void 0:t.id)},et=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},tt=function(e,t){if(!e)return!1;if(!t)return!0;var r=(e+="").length,n=(t+="").length;if(r!==n)return r>n;var o=e.split(""),a=null;return o.forEach((function(e,r){"boolean"!=typeof a&&(a=parseInt(e)>parseInt(t[r])||parseInt(e)===parseInt(t[r])&&null)})),!!a},rt=function(){var e=window.location.hostname;return["seller","banhang","localhost"].some((function(t){return e.includes(t)}))},nt=function(){try{return!("undefined"!=typeof window&&"object"===Je(window.process)&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"===Je(process.versions)&&process.versions.electron||"object"===("undefined"==typeof navigator?"undefined":Je(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}catch(e){return!0}}(),ot=function(e){return!(null==e||!e.id)};function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ct(e){return function(e){if(Array.isArray(e))return at(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return at(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?at(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e){var t=new Uint16Array(e.length);return Array.prototype.forEach.call(t,(function(t,r,n){n[r]=e.charCodeAt(r)})),window.encodeURIComponent(window.btoa(String.fromCharCode.apply(null,new Uint8Array(t.buffer))))}var it,ut,lt,dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()}))},pt=function(e){for(var t=window.atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),o=new Uint8Array(n),a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return new window.Blob([o],{type:r})},ft=function e(t,r){var n=JSON.parse(JSON.stringify(t));for(var o in r)n[o]=n[o]&&"[object Object]"===n[o].toString()?e(n[o],r[o]):r[o];return n},_t=function(e){return e>=1e3?"999+":e},Et=function(e,t){var r=ct(e),n=r.indexOf(t);return n>-1&&r.splice(n,1),r},St=c(994),Ot=["PL","ES","FR"],ht=function(e){return e?e.toUpperCase():"SG"},vt=function(e){var t=e.price,r=e.country,n=function(e,t){return"TW"!==e||void 0!==t&&!t?"CL"===e?"$":(0,St.getCurrencyConfig)(e).symbol||"":"NT$"}(r,e.isSCChat);if(Ot.includes(r))return"".concat(n).concat(t).concat(n);var o=(0,St.getCurrencyConfig)(r).symbolPosition===St.SYMBOL_POSITION.BACK?"".concat(t).concat(n):"".concat(n).concat(t);return"MX"===r?"".concat(o," MXN"):o},Tt=function(e){for(var t="",r=+e,n=["K","M","B"];r>1e3&&(t=n.shift()||"");)r/=1e3;var o=parseInt(100*+r+"")/100;return{value:r=Number.isInteger(o)?o:o.toFixed(2),unit:t}},mt="NaN",gt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=r.withSpaces,a=void 0!==o&&o,c=r.withMinus,s=void 0!==c&&c,i=r.withUnit,u=void 0!==i&&i,l=r.withComma,d=void 0===l||l,p=ht(t),f=Number(e);if(Number.isNaN(f))return vt({price:mt,country:p,isSCChat:n});var _="",E="";if(u){var S=Tt(f);_=S.unit,f=S.value}return s&&(E="-"),f=(0,St.formatCurrency)(p,f,{symbol:"",spaceBetweenSymbol:a,noSeparator:!d}),f=vt({price:f,country:p,isSCChat:n}),"".concat(E).concat(f).concat(_)},bt=function(e,t,r){return t=ht(t),vt({price:e,country:t,isSCChat:r})},yt=c(602),Rt=c.n(yt),Dt=c(470).t,At=new(Rt()),Ct=function(e){return At.locale.set(e)};!function(e){e.Today="today",e.Yesterday="yesterday"}(it||(it={})),function(e){e[e.Time=0]="Time"}(ut||(ut={})),function(e){e[e.sunday=0]="sunday",e[e.monday=1]="monday",e[e.tuesday=2]="tuesday",e[e.wednesday=3]="wednesday",e[e.thursday=4]="thursday",e[e.friday=5]="friday",e[e.saturday=6]="saturday"}(lt||(lt={}));var It,Pt=function(e){var t=e.value,r=e.date,n=e.suffix,o=e.prefix,a="",c="";if(o&&(a=Dt("conversation_detail.message_list.".concat(o.type))+(void 0===o.separator?"  ":o.separator)),n){var s=n.type===ut.Time?function(e){return e.format("hh:mm")}(r):"";c=(void 0===n.separator?", ":n.separator)+s}return a+t+c};!function(e){e[e.Yesterday=0]="Yesterday",e[e.Today=1]="Today",e[e.ThisMonth=2]="ThisMonth",e[e.ThisYear=3]="ThisYear",e[e.ThisWeek=4]="ThisWeek",e[e.NONE=5]="NONE"}(It||(It={}));var wt=function(e,t){var r=t||{},n=r.noTodayFlag,o=r.noTimeFlag,a=r.needFullFormat,c=r.onlyKeepDate,s=r.isConvPreview,i=At.create(e);if(a)return Pt({value:i.format("LHD"),date:i,suffix:{type:ut.Time}});if(c)return i.format("LHD");var u=["tw","cn"].includes(At.locale.current),l=function(e,t){var r=new Date,n=new Date(e);if(t){var o=r-n,a=(new Date).setHours(0,0,0,0);if(o<=6048e5&&o>=r.getTime()-a+864e5)return It.ThisWeek}if(r.getFullYear()===n.getFullYear()){if(r.getMonth()===n.getMonth()){var c=r.getDate(),s=n.getDate();return c===s?It.Today:c-1===s?It.Yesterday:It.ThisMonth}return It.ThisYear}return It.NONE}(e,s);switch(l){case It.Today:var d=n?void 0:{type:it.Today},p={type:ut.Time,separator:""};return Pt({value:"",date:i,prefix:d,suffix:p});case It.Yesterday:var f={type:it.Yesterday},_=o?void 0:{type:ut.Time,separator:""};return Pt({value:"",date:i,prefix:f,suffix:_});case It.ThisWeek:return Dt("common.".concat(lt[new Date(e).getDay()]));case It.ThisMonth:case It.ThisYear:var E=o?void 0:{type:ut.Time};return Pt({value:i.format(s?u?"MM/DD":"DD/MM":"LHDS"),date:i,suffix:E});default:var S=o?void 0:{type:ut.Time};return Pt({value:i.format(s?u?"YY/MM/DD":"DD/MM/YY":"LHD"),date:i,suffix:S})}},Nt="YYYY-MM-DD hh:mm",Ut=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=At.create(e);return r.format(t||Nt)},xt=function(e){var t=Math.ceil(e),r=t/3600<10?"0"+Math.floor(t/3600):Math.floor(t/3600),n=t/60%60<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),o=t%60<10?"0"+t%60:t%60;return t>=3600?"".concat(r,":").concat(n,":").concat(o):"".concat(n,":").concat(o)},kt=function(e){var t=e.created_at,r=e.created_timestamp;return wt(t||1e3*r,{noTodayFlag:!0,noTimeFlag:!0,isConvPreview:!0})},Mt=c(661),Lt=c.n(Mt),jt=function(e){return 0===e||1===e?"one":e>=1e6?"many":"other"},Gt=function(e){return 1===e?"one":Number.isInteger(e)?[2,3,4].includes(e%10)&&![12,13,14].includes(e%100)?"few":![2,3,4].includes(e%10)||[12,13,14].includes(e%100)?"many":"other":"other"},Ft=function(e){return e<=1?"one":"other"},Ht={fr:jt,pl:Gt,default:Ft},Vt={fr:function(e,t){return"".concat(jt(e),".").concat(jt(t))},pl:function(e,t){return"".concat(Gt(e),".").concat(Gt(t))},default:function(e,t){return"".concat(Ft(e),"_").concat(Ft(t))}},Bt=["fr","pl"],Yt=function(e,t,r){var n=Lt().language||"en",o=Bt.includes(n)?n:"default";return void 0!==r?"".concat(e,"_").concat(Vt[o](t,r)):"".concat(e,"_").concat(Ht[o](t))},Wt=function(e,t){var r=t||window.location.search,n=null;if(r){var o=r.indexOf("?")+1,a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");n=r.substr(o).match(a)}return n?unescape(n[2]):null},Qt=function(){var e=navigator.userAgent.toLowerCase(),t=null;return e.indexOf("msie")>0&&(t=e.match(/msie [\d.]+;/gi)),e.indexOf("firefox")>0&&(t=e.match(/firefox\/[\d.]+/gi)),e.indexOf("safari")>0&&e.indexOf("chrome")<0&&(t=e.match(/safari\/[\d.]+/gi)),e.indexOf("chrome")>0&&(t=e.match(/chrome\/[\d.]+/gi)),t?t.toString():"unknown"};function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Kt,zt=["hans","hant"],Xt=["en","zh-hans","zh-hant","ms-my","th-th","vi-vn","id-id","zh-cn","pt-br","hi","es-mx","es-co","es-cl","es-es","es-ar","pl","fr"],Jt=function(e){return"".concat(e[0].toUpperCase()).concat(e.substring(1))},$t=function(e){if(e.includes("-")){var t=e.split("-");return zt.includes(t[1])?"".concat(t[0],"-").concat(Jt(t[1])):"".concat(t[0],"-").concat(t[1].toUpperCase())}return e},Zt=function(e){var t,r=(e||"en").toLowerCase(),n="en",o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return qt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}(Xt);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.includes(r)){n=$t(a);break}}}catch(e){o.e(e)}finally{o.f()}return n},er=function(e){var t=Zt(e);switch(t){case"th-TH":return"th";case"vi-VN":return"vi";case"id-ID":return"id";default:return t}},tr={en:"default","ms-MY":"ms-my","th-TH":"th","zh-Hans":"tw","zh-Hant":"tw","vi-VN":"vn","id-ID":"id","zh-CN":"cn","pt-BR":"pt-br",hi:"hi","es-MX":"es-mx","es-CO":"es-co","es-CL":"es-cl",pl:"pl","es-ES":"es-es",fr:"fr","es-AR":"es-ar"},rr=function(e){var t=Zt(e);return tr[t]||"default"},nr=function(e){var t=e.access,r=e.isSubAccount,n=e.action,o=e.url,a=void 0===o?"":o;t&&(r?n():window.open().location=a)},or=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,o=Date.now();return function(){for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];t&&(clearTimeout(t),t=null);var i=Date.now();i-o>n?(e.apply(void 0,c),o=Date.now()):t=window.setTimeout((function(){e.apply(void 0,c),o=Date.now()}),r)}},ar=function(e,t){var r,n,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=null,s=0,i=function(){s=!1===a.leading?0:(new Date).getTime(),c=null,o=e.apply(r,n),c||(r=n=null)},u=function(){var u=(new Date).getTime();s||!1!==a.leading||(s=u);var l=t-(u-s);r=this;for(var d=arguments.length,p=new Array(d),f=0;f<d;f++)p[f]=arguments[f];return n=p,l<=0||l>t?(c&&(clearTimeout(c),c=null),s=u,o=e.apply(r,n),c||(r=n=null)):c||!1===a.trailing||(c=window.setTimeout(i,l)),o};return u},cr=function(e,t){var r=0;return{check:function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e.apply(void 0,ct(o))?r+=1:this.reset(),r>=t&&(this.reset(),!0)},reset:function(){r=0}}},sr="Auto-Translation",ir="modal",ur=function(e,t){var r=t.superType,n=t.secondaryType,o=e.find((function(e){return e.name===r}));if(o){var a=o.children;if(a.length){var c=a.find((function(e){return e.name===n}));return c||!1}return!1}return!1},lr=function(e){return ur(e,{superType:"Unreplied-Filter",secondaryType:ir})},dr=function(e){return ur(e,{superType:"MiniChat-Unreplied-Filter",secondaryType:ir})},pr=function(e){return ur(e,{superType:"Import-Template",secondaryType:ir})},fr=function(e){return ur(e,{superType:sr,secondaryType:ir})},_r=function(e){return ur(e,{superType:sr,secondaryType:"settings"})},Er=function(e){return ur(e,{superType:"Mass-Tool",secondaryType:ir})},Sr=function(e){return ur(e,{superType:"SearchV3",secondaryType:ir})},Or=function(e){return ur(e,{superType:"Reply",secondaryType:ir})},hr=function(e){return ur(e,{superType:"Region-Filter",secondaryType:ir})},vr=function(e){return ur(e,{superType:"MiniChat-Header",secondaryType:ir})},Tr=function(e){return ur(e,{superType:"MiniChat-Entry",secondaryType:ir})},mr=c(349),gr=c.n(mr),br={getItem:function(e,t){try{var r=window.localStorage.getItem(e);return null==r?r:t?JSON.parse(r):r}catch(e){console.warn("*** LocalStorage Error: Can not get LocalStorage *** \n".concat(e))}},setItem:function(e,t,r){try{var n=r?JSON.stringify(t):t;window.localStorage.setItem(e,n)}catch(e){console.warn("*** LocalStorage Error: Can not set LocalStorage *** \n".concat(e))}},removeItem:function(e){try{window.localStorage.removeItem(e)}catch(e){console.warn("*** LocalStorage Error: Can not remove LocalStorage *** \n".concat(e))}}},yr=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?br.getItem(e):gr().getItem(e)},Rr=function(e,t){return gr().setItem(e,t)},Dr=function(e,t){return t?br.removeItem(e):gr().removeItem(e)},Ar=gr().supports(gr().INDEXEDDB)||gr().supports(gr().WEBSQL)?1e3:100,Cr=c(470).t;function Ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var wr=n.MSG_TYPE_TEXT,Nr=n.MSG_TYPE_IMAGE,Ur=n.MSG_TYPE_OFFER,xr=n.MSG_TYPE_PRODUCT,kr=n.MSG_TYPE_ORDER,Mr=n.MSG_TYPE_STICKER,Lr=n.MSG_TYPE_NOTIFICATION,jr=n.MSG_TYPE_VOUCHER,Gr=n.MSG_TYPE_ITEM_LIST,Fr=n.MSG_TYPE_FAQ,Hr=n.MSG_TYPE_FAQ_QUESTION,Vr=n.MSG_TYPE_FAQ_LIVEAGENT,Br=n.MSG_TYPE_FAQ_FEEDBACK,Yr=n.MSG_TYPE_FAQ_UNSUPPORTED,Wr=n.MSG_TYPE_FAQ_FEEDBACK_PROMPT,Qr=n.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,qr=n.MSG_TYPE_BUNDLE_MESSAGE,Kr=n.MSG_TYPE_OPTION_PACK,zr=n.MSG_TYPE_SELECTED_OPTION,Xr=n.MSG_TYPE_VIDEO,Jr=n.MSG_TYPE_IMAGE_WITH_TEXT,$r=n.MSG_TYPE_RATE_CARD,Zr=n.MSG_TYPE_NEW_FAQ,en=n.MSG_TYPE_FAQ_CATEGORY_CHOICE,tn=n.MSG_TYPE_FAQ_QUESTION_LIST,rn=n.MSG_TYPE_FAQ_TYPE_CHOICE,nn=n.MSG_TYPE_FAQ_CATEGORY_LIST,on=n.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,an=n.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,cn=n.FAQ_TYPE_BOT_RESPONSE_MESSAGE,sn=U.PENDING,un=U.REJECTED,ln="common.unsupported_message",dn=(g(Kt={},n.MSG_TYPE_FAQ_LIVEAGENT,"faq.live_agent"),g(Kt,n.MSG_TYPE_FAQ_UNSUPPORTED,"faq.new_unsupport_input"),g(Kt,n.MSG_TYPE_FAQ_FEEDBACK_PROMPT,"faq.feedback_prompt"),g(Kt,n.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,"faq.new_live_agent_prompt"),g(Kt,n.MSG_TYPE_VIDEO,"conversation_detail.input_field.toolbar.video.tip"),g(Kt,n.MSG_TYPE_IMAGE_WITH_TEXT,"conversation_list.conversation_cell.new_image_message"),Kt),pn=function(e){return Cr(dn[e]||ln)},fn=[Gr],_n=[Xr,Yr,Wr,Qr,Jr],En=[Nr,qr,an,Ur,xr,kr,jr,$r,Mr],Sn=[tn,rn,nn],On=function(t){var r=t.message,n=t.enableTranslation,o=t.locale,a=t.conversationShopId;if(!r)return{text:Cr(ln)};var c=r.type,s=r.content,i=void 0===s?{}:s,u=r.crm_message_preview,l=void 0===u?{}:u,d=r.message_option,p=r.source,f=r.send_status;if(l.text)return{text:l.text};if(null!=i&&i.preview_text&&c===cn)return{text:i.preview_text};if(hn(d,e.MSG_OPT_CENSORED_BLACKLIST))return{text:Cr("common.blacklist.replaced_text")};if(c){var _,E,S=i||{},O=S.text,h=void 0===O?"":O,v=S.title,T=S.opening,m=S.caption,g=S.translation,b=S.product_name,y=S.sticker_name,R=S.chat_product_infos,D=void 0===R?[]:R,A=S.products,C=void 0===A?[]:A,I=no(r,{isAgent:!1,shop_id:a}),P=function(e,t,r,n){var o,a=t||{},c=a.live_agent_text,s=void 0===c?[]:c,i=a.fixed_title,u=a.faq_type_choice_translation;if(_n.includes(e))o=s.length?gn(s,r):pn(e);else if(Sn.includes(e))o=gn(e===rn?u:i,r);else{var l=En.includes(e)?"conversation_list.conversation_cell.new_".concat(e,"_message"):fn.includes(e)?"common.tips.recommended".concat(n?"":"_for_you"):"";o=l?"[".concat(Cr(l),"]"):Cr(ln)}return o}(c,i,o,I);switch(c){case Zr:case Fr:E=T||Cr("faq.no_set.chat_bot_title");break;case wr:var w=bn(i);E=!n||w||d===e.MSG_OPT_SOCIAL_MESSAGE||["crm","proactive_update"].includes(p)||2===f?h:(null==g?void 0:g.text)||h;break;case Vr:case Hr:case Br:case zr:case Kr:case en:case on:E=h||v;break;case Xr:E="[".concat(P,"]");break;case Jr:E="[".concat(P,"] ").concat(m||v||h);break;case Yr:case Wr:case Qr:case tn:case rn:case nn:E=P;break;case xr:E="".concat(P," ").concat(b);break;case Mr:E=y?"[".concat(y,"]"):P;break;case Gr:var N=D.map((function(e){return e.name})).join("; ");E="".concat(P," ").concat(N);break;case Lr:var U=An(i||{},o),x=U.notification_for_sender,k=U.notification_for_receiver;E=I?x:k;break;case $r:E="".concat(P," ").concat(Cr(I?"conversation_list.preview.rate_card_sender":"rate_card.rate_out_service"));break;case Ur:var M=i||{},L=M.status,j=M.products_count,G=M.offer_price;if(L)if(L===sn){var F=Cr("conversation_list.preview.offer_pending_".concat(I?"sender":"receiver"));E="".concat(P," ").concat(F,": ").concat(G," x ").concat(j),I||(_=!0)}else{var H=L===un?"declined":L;E="".concat(P," ").concat(Cr("conversation_detail.workstation.offer_panel.".concat(H)))}else E=P;break;case kr:E="".concat(P," ").concat(C.map((function(e){return e.title})).join("; "));break;case jr:var V=i||{},B=V.type,Y=V.rule_text,W=V.discount_text;if(B){var Q="[".concat(Cr("conversation_detail.workstation.voucher_panel.".concat(B,"_voucher")),"]");E="".concat(Q," ").concat(W,", ").concat(Y)}else E=P;break;default:E=P}return{text:E,isPendingReceivedOffer:_}}return{text:Cr(ln)}},hn=function(e,t){return(e&t)===t},vn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return hn(t.message_option,e.MSG_OPT_DELETE)},Tn=function(e,t){return t.some((function(t){return hn(e,t)}))},mn=function(e){return e===$r},gn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=e.find((function(e){return er(t).toLocaleLowerCase().includes(e.lang.toLocaleLowerCase())}))||e.find((function(e){return"en"===e.lang}));return(r||{}).text},bn=function(e){var t=e||{},r=t.translation,n=t.mid;if(!r)return!0;var o=(void 0===n?{}:n).source_language,a=void 0===o?"":o,c=r||{},s=c.final,i=c.mid,u=c.target_language,l=void 0===u?"":u,d=c.source_language,p=void 0===d?"":d,f=s?s.target_language:l,_=s?s.source_language:p,E=i?i.source_language:a;return E?E===f:_===f&&"unknown"!==_},yn=function(e,t){return{type:n.MSG_TYPE_SECURITY_TIPS,content:{text:""},id:e,conversation_id:t,to_id:"",from_id:"",shop_id:"",created_timestamp:Math.floor((new Date).getTime()/1e3)}},Rn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.updateMaxGeneralOptionHideTime,n=void 0===r||r,o=t.updateMessageOption,a=void 0===o||o,c=e||{},s=c.created_timestamp,i=c.message_option,u=n?{max_general_option_hide_time:s}:{},l=a?{last_message_option:i}:{};return Pr(Pr({},u),l)},Dn=function(e){var t=e.crm_message_preview,r=void 0===t?{}:t;return r.text?{crm_message_preview:r}:{crm_message_preview:{}}},An=function(e,t){var r=e.noti_text_of_all_languages,n=void 0===r?[]:r;if(!n.length)return e;var o=n.find((function(e){return er(t).toLocaleLowerCase().includes(e.language.toLocaleLowerCase())}));if(o)return o;var a=n.find((function(e){return"en"===e.language}));return a||e},Cn=function(e){var t=e.type,r=e.textContent,n=e.content,o={};switch(t){case kr:o={products:(r||{}).products};break;case jr:var a=r||{};o={rule_text:a.rule_text,discount_text:a.discount_text,type:a.type};break;case Ur:var c=r||{};o={status:c.status,products_count:c.products_count,offer_price:c.offer_price};break;case xr:o={product_name:n.product_name||(null==r?void 0:r.name)}}return Pr(Pr({},e),{},{content:Pr(Pr({},n),o)})};function In(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function Pn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){In(a,n,o,c,s,"next",e)}function s(e){In(a,n,o,c,s,"throw",e)}c(void 0)}))}}var wn,Nn=c(757),Un=c.n(Nn),xn=c(470).t,kn=function(e){return Mn(e)?xn(Yt("label.exceed_media_limit.video_duration",180),{max:180}):null},Mn=function(e){var t=e.type,r=e.duration,n=void 0===r?0:r;return"video"===t&&(n<0||n>180)},Ln=function(){return window.createObjectURL||window.URL.createObjectURL},jn=function(e){return{type:"video",cover:"",file:e,duration:0}},Gn=function(e,t){return new Promise((function(r){"image"===t?function(e,t){var r=Ln()(e),n=new Image;n.onload=function(){var o=n.width,a=n.height;t({type:"image",cover:r,file:e,width:o,height:a})},n.src=r}(e,r):"video"===t&&function(e,t){var r;try{r=Ln()(e)}catch(r){return void t(jn(e))}var n=document.createElement("video");n.setAttribute("crossOrigin","anonymous"),n.setAttribute("autoplay","autoplay"),n.muted=!0,n.src=r,n.addEventListener("loadeddata",(function(){n?function(e,t,r,n){var o=document.createElement("canvas"),a=e,c=a.videoWidth,s=a.videoHeight,i=a.duration;o.width=c,o.height=s,o.getContext("2d").drawImage(e,0,0,c,s);var u={type:"video",file:t,duration:Math.ceil(i),width:c,height:s,videoUrl:r};o.toBlob?o.toBlob((function(t){u.cover=t?Ln()(t):"",n(u),e=null}),"image/png",.5):(u.cover=o.toDataURL?o.toDataURL("image/png"):"",n(u))}(n,e,r,t):t(jn(e))})),n.addEventListener("error",(function(){t(jn(e))}))}(e,r)}))},Fn=function(e){return e.size},Hn=function(e){return e.type},Vn=function(e){var t=Hn(e);return function(e){return e.includes("video")||we.includes(e)}(t)?"video":function(e){return e.includes("image")}(t)?"image":null},Bn=function(){var e=Pn(Un().mark((function e(t){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map(function(){var e=Pn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn(t,Vn(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yn="common.toast.file_unsupport",Wn=function(e,t,r,n){var o=Vn(e);if("all"===r&&!o||"all"!==r&&o!==r)return xn(Yn);if("video"===o){if(!t)return xn(Yn);if(!function(e){return Fn(e)<=Ue}(e))return xn("label.exceed_media_limit.video_size",{max:30});if(!function(e){var t=function(e){return e.name}(e),r=(t.substr(t.lastIndexOf(".")+1)||"").toUpperCase();return Pe.includes(r)}(e))return xn(Yn)}else if("image"===o){if(!function(e,t){return Fn(e)<=(t||Ne)}(e,n))return n?xn("ps_feedback_upload_img_size_error"):xn("common.toast.file_size_exceeds",{maxFileSize:"2MB"});if(!function(e){return Ce.includes(Hn(e))}(e))return xn("feedback_modal.error.upload_image_failed.format")}return null},Qn=function(e,t){var r=new XMLHttpRequest;r.open("get",e),r.responseType="blob",r.onload=function(){t(r.response)},r.send()},qn=c(547),Kn=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER],zn=function(e){return Kn.includes(e)},Xn=[e.MSG_OPT_TRIGGER_FAQ,e.MSG_OPT_FAQ_SESSION,e.MSG_OPT_CANCELORDER_WARNING_NOT_SEND],Jn=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER,n.MSG_TYPE_ITEM_LIST,n.MSG_TYPE_SHOPPING_CART,n.MSG_TYPE_UNTATED_ORDER_REMINDER,n.MSG_TYPE_ADD_ON_DEAL,n.MSG_TYPE_VOUCHER,n.MSG_TYPE_BUNDLE_DEAL,n.MSG_TYPE_FLASH_SALE,n.MSG_TYPE_OFFER,n.MSG_TYPE_ORDER,n.MSG_TYPE_PRODUCT,n.MSG_TYPE_IMAGE_WITH_TEXT],$n=function(e,t){var r=e.type,c=e.send_status,s=e.errorCode,i=e.status,u=e.message_option;if(!t){var l=Jn.includes(r)&&!Xn.find((function(e){return hn(u,e)})),p=c!==o.SENDING&&c!==o.FAILED&&i!==d.CENSORED_BLACKLIST&&s!==a.BLACKLIST;if(l&&p){var f=(e||{}).textContent,_=void 0===f?{}:f;if(r===n.MSG_TYPE_ORDER)return!(!_||!_.id);if(r===n.MSG_TYPE_PRODUCT){var E=_,S=E.id,O=E.actual_price;return!(!S||!O)}return!0}}return!1},Zn=(g(wn={},n.MSG_TYPE_TEXT,0),g(wn,n.MSG_TYPE_IMAGE,1),g(wn,n.MSG_TYPE_OFFER,3),g(wn,n.MSG_TYPE_PRODUCT,4),g(wn,n.MSG_TYPE_ORDER,5),g(wn,n.MSG_TYPE_STICKER,6),g(wn,n.MSG_TYPE_VIDEO,18),g(wn,n.MSG_TYPE_ITEM_LIST,1011),g(wn,n.MSG_TYPE_VOUCHER,1013),g(wn,n.MSG_TYPE_SHOPPING_CART,1014),g(wn,n.MSG_TYPE_UNTATED_ORDER_REMINDER,1015),g(wn,n.MSG_TYPE_BUNDLE_DEAL,1016),g(wn,n.MSG_TYPE_FLASH_SALE,1017),g(wn,n.MSG_TYPE_ADD_ON_DEAL,1018),wn),eo=function(e){return void 0!==Zn[e]?Zn[e]:-1},to=[e.MSG_OPT_AUTO_REPLY,e.MSG_OPT_BLOCKED,e.MSG_OPT_CENSORED_BLACKLIST,e.MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER,e.MSG_OPT_IGNORE_UNREAD_FOR_SENDER,e.MSG_OPT_INVISIBLE_FOR_RECEIVER,e.MSG_OPT_INVISIBLE_FOR_SENDER,e.MSG_OPT_ADS,e.MSG_OPT_FAQ_SESSION,e.MSG_OPT_TRIGGER_FAQ,e.MSG_OPT_OFFWORK_AUTOREPLY,e.MSG_OPT_CANCELORDER_WARNING_RETRACT,e.MSG_OPT_CHATBOT_SESSION,e.MSG_OPT_TRIGGER_CHATBOT,e.MSG_OPT_PRIVATE_MESSAGE,e.MSG_OPT_SILENT_FOR_SENDER],ro=function(e,t,r){var n=e.type,a=e.send_status,c=e.created_timestamp,s=e.message_option,i=!0;return t&&_.includes(n)&&![o.SENDING,o.FAILED].includes(a)&&!Tn(s,to)||(i=!1),(!r||Math.floor((new Date).getTime()/1e3)-c>=r)&&(i=!1),i},no=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.isAgent,n=t.to_tob_user_id,o=t.shop_id,a=e.from_id,c=e.to_shop_id;return r?a!==n:c!==o};function oo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ao(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oo(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var co,so,io=function(e,t){return t.map((function(t){return function(e,t){var r=function(e,t){var r=t.trim().toLocaleLowerCase();return e.filter((function(e){return e.trim().toLocaleLowerCase().startsWith(r)})).length}(e.tags,t),n=function(e,t){var r=fo(t),n=new RegExp(r,"gi");return(e.match(n)||[]).length}(e.content,t);return 1e4*r+1*n}(e,t)})).reduce((function(e,t){return e+t}),0)},uo=function(e){return e.trim().length>=1},lo=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return e.trim()?[e]:[];var r=e.split(",").filter((function(e){return e.trim()})),n=ct(new Set(r));return n.sort((function(e,t){return e.length>t.length?-1:1}))},po=function(e,t){return t.length?function(e){return e.sort((function(e,t){return e.weight>t.weight?-1:1}))}(function(e){return e.filter((function(e){return e.weight}))}(e.map((function(e){return ao(ao({},e),{},{weight:io(e,t)})})))):e},fo=function(e){return e.replace(/[.[\]{}()+?*^\\$?]/g,"\\$&")},_o=c(470).t,Eo=function(e){return"common.order.status.".concat(e)},So=function(e){var t=e.order,r=e.region,n=e.isOwnOrder,o=e.isNewPrice,a=t.products,c=void 0===a?[]:a,s=t.estimated_escrow,i=void 0===s?0:s,u=t.total_price,l=void 0===u?0:u,d=t.voucher_price,p=void 0===d?0:d,f=t.price_before_discount,_=void 0===f?0:f,E=t.credit_card_promotion,S=void 0===E?0:E,O=c.reduce((function(e,t){return e+(t.coin_offset||0)}),0);return{shopeeCoin:O,payment:gt(o?i||l?n?i:l:_||l:_-p-S-O,r)}},Oo=he.PAY_CREDIT_CARD,ho=he.PAY_BANK_TRANSFER,vo=he.PAY_OFFLINE_PAYMENT,To=he.PAY_IPAY88,mo=he.PAY_FREE,go=he.PAY_COD,bo=he.PAY_ESUN,yo=he.PAY_BILL_PAYMENT,Ro=he.PAY_INDOMARET,Do=he.PAY_KREDIVO,Ao=he.PAY_NICEPAY_CC,Co=he.PAY_AIRPAY,Io=he.PAY_SHOPEE_WALLET,Po=he.PAY_SHOPEE_WALLET_V2,wo=he.PAY_AKULAKU,No=he.PAY_INSTALLMENT,Uo=he.PAY_IBANKING,xo=(g(co={},Oo,"cc"),g(co,ho,"bank_transfer"),g(co,vo,"offline"),g(co,To,"online"),g(co,mo,"waived"),g(co,go,"cod"),g(co,bo,"esun"),g(co,yo,"bill_payment"),g(co,Ro,"indomaret"),g(co,Do,"kredivo"),g(co,Ao,"cc_installment"),g(co,Co,"airpay"),g(co,Io,"shopee_wallet"),g(co,Po,"shopee_wallet_v2"),g(co,wo,"akulaku"),g(co,No,"installment"),g(co,Uo,"ibanking"),co),ko=function(e){var t=xo[e];return t?_o("common.order.pay_method.".concat(t)):""},Mo=function(e,t){var r=e.list_type,n=e.status_ext,o=e.order_type,a=e.payment_method,c=e.shipping_method,s=e.logistics_status,i=e.pickup_cutoff_time;if(n===me.ORDER_EXT_CANCEL_PENDING)return!1;var u=["MY","TW","VN","PH"].includes(t),l=!!i&&Date.now()>=new Date(i).getTime(),d=!0;switch(r){case ge.TOPAY:if(a===he.PAY_OFFLINE_PAYMENT)return d;break;case ge.TOSHIP:return l&&u&&a===he.PAY_COD&&s===Re.LOGISTICS_REQUEST_CREATED||(o===be.ESCROW?(n===me.ORDER_EXT_RETURN_PROCESSING||c>0&&s===Re.LOGISTICS_REQUEST_CREATED&&l)&&(d=!1):o===be.SIMPLE&&(d=!1)),d}return d},Lo=(g(so={},oe.DELETED,ae.DELETED),g(so,oe.BANNED,ae.BANNED),g(so,oe.SOLD_OUT,ae.SOLD_OUT),g(so,oe.DELISTED,ae.DELISTED),so),jo=function(e){return e===oe.NORMAL?"conversation_detail.conversation_origin.product_origin.product_stock":"common.product.".concat(Lo[e])},Go=function(e,t){return!(!e||t!==oe.DELETED)},Fo=function(e){return void 0!==e&&e!==oe.NORMAL},Ho=function(e){return void 0!==e&&e<=0},Vo=function(e,t){return Fo(e)||Ho(t)},Bo=1e3,Yo=1800,Wo=86400,Qo=[Wo,3600,60],qo=function(e){var t=e,r=Qo.map((function(e){var r=t>e?Math.floor(t/e):0;return t-=r*e,r}));return r.push(t),r},Ko=function(e){return"".concat(e>=10?"":"0").concat(e)},zo=function(){return Math.ceil(Date.now()/1e3).toString()},Xo=function(e){return e*Math.pow(10,9)+""},Jo=["zh-CN","zh-Hant","zh-Hans"],$o=function(e){var t=Lt().language||"en",r=Zt(t);return Jo.includes(r)?((100-e)/10).toFixed(e%10?1:0):"".concat(e,"%")},Zo=function(e,t,r,n,o){return n||t?e:e||o&&!!r},ea=c(470).t,ta=function(e){return e===H.FINISHED},ra=function(e,t){return e===t},na=function(e,t){return gt(e,t,{withUnit:e>=1e4})},oa=function(e,t,r,n){return ea("conversation_detail.workstation.voucher_panel.".concat(n?H.ONGOING:e,"_time"),{time:e===H.SCHEDULED?Ut(t,"MM.DD.YYYY h:mm"):Ut(r,"MM.DD.YYYY")})};function aa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ca(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var sa=function(e,t,r){var n=e.categories,o=void 0===n?[]:n,a=e.other_faq_types,c=void 0===a?[]:a,s=e.intents,i=void 0===s?[]:s,u=e.questions,l=void 0===u?[]:u,d=[];return o.length&&o.forEach((function(e,r){d.push(ia({item:e,index:r,type:Z.Categories,isNewFaq:t}))})),c.length&&c.forEach((function(e,n){d.push(ia({item:e,index:n+o.length,type:Z.OtherFaqType,isNewFaq:t,locale:r}))})),i.length&&i.forEach((function(e,r){d.push(ia({item:e,index:r+o.length+c.length,type:Z.Intent,isNewFaq:t}))})),l.length&&l.forEach((function(e,r){d.push(ia({item:e,index:r,type:Z.Question,isNewFaq:t}))})),d},ia=function(e){var t=e.item,r=e.index,n=e.type,o=e.isNewFaq,a=e.locale,c={};switch(n){case Z.Categories:c={content:t.title,location:r};break;case Z.OtherFaqType:c={content:gn(t.faq_type_choice_translation,a),location:r};break;case Z.Intent:var s=t;c=ca(ca({},JSON.parse(s.pass_through_data)),{},{content:s.text,location:r});break;case Z.Question:c={content:t.text,location:r};break;case Z.ChatWithSeller:c={content:t.content}}return{data:JSON.stringify(ca(ca({},c),{},{is_intent_prediction:n===Z.Intent?$.Intent:$.Faq,is_default_hq:o?1:0})),type:1}},ua=c(470)})(),s})(),e.exports=n(r(37725),r(14906),r(58518),r(69483))}}]);